!function r(o,a,i){function u(e,t){if(!a[e]){if(!o[e]){var n="function"==typeof require&&require;if(!t&&n)return n(e,!0);if(s)return s(e,!0);throw(n=new Error("Cannot find module '"+e+"'")).code="MODULE_NOT_FOUND",n}n=a[e]={exports:{}},o[e][0].call(n.exports,function(t){return u(o[e][1][t]||t)},n,n.exports,r,o,a,i)}return a[e].exports}for(var s="function"==typeof require&&require,t=0;t<i.length;t++)u(i[t]);return u}({1:[function(t,e,n){!function(o,F){"use strict";function C(t){return document.createElement(t)}function L(t,e){for(var n in e)try{t.style[n]=e[n]}catch(t){}return t}function j(t){return null==t?String(t):"object"==typeof t||"function"==typeof t?Object.prototype.toString.call(t).match(/\s([a-z]+)/i)[1].toLowerCase()||"object":typeof t}function I(t,e){if("array"!==j(e))return-1;if(e.indexOf)return e.indexOf(t);for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}function D(){var t,e=arguments;for(t in e[1])if(e[1].hasOwnProperty(t))switch(j(e[1][t])){case"object":e[0][t]=D({},e[0][t],e[1][t]);break;case"array":e[0][t]=e[1][t].slice(0);break;default:e[0][t]=e[1][t]}return 2<e.length?D.apply(null,[e[0]].concat(Array.prototype.slice.call(e,2))):e[0]}function q(t){return 1===(t=Math.round(255*t).toString(16)).length?"0"+t:t}function Y(t,e,n,r){t.addEventListener?t[r?"removeEventListener":"addEventListener"](e,n,!1):t.attachEvent&&t[r?"detachEvent":"attachEvent"]("on"+e,n)}var N,t;t=o.performance,N=t&&(t.now||t.webkitNow)?t[t.now?"now":"webkitNow"].bind(t):function(){return+new Date};var W=o.cancelAnimationFrame||o.cancelRequestAnimationFrame,B=o.requestAnimationFrame;!function(){for(var t=["moz","webkit","o"],r=0,e=0,n=t.length;e<n&&!W;++e)W=o[t[e]+"CancelAnimationFrame"]||o[t[e]+"CancelRequestAnimationFrame"],B=W&&o[t[e]+"RequestAnimationFrame"];W||(B=function(t){var e=N(),n=Math.max(0,16-(e-r));return r=e+n,o.setTimeout(function(){t(e+n)},n)},W=function(t){clearTimeout(t)})}();var G="string"===j(document.createElement("div").textContent)?"textContent":"innerText";function z(e,t){"object"===j(e)&&e.nodeType===F&&(t=e,e=document.body),e=e||document.body;var i,u,n,r,o,a,s,c,f,l=this,h=D({},z.defaults,t||{}),_={},m=[],d=100,p=[],v=h.threshold,g=0,y=N()-v,b=[],M=[],x="fps"===h.show;function w(t,e,n,r){return u[0|t][Math.round(Math.min((e-n)/(r-n)*d,d))]}function P(){_.legend.fps!==x&&(_.legend.fps=x,_.legend[G]=x?"FPS":"ms"),s=x?l.fps:l.duration,_.count[G]=999<s?"999+":s.toFixed(99<s?0:h.decimals)}function E(){if(n=N(),y<n-h.threshold&&(l.fps-=l.fps/Math.max(1,60*h.smoothing/h.interval),l.duration=1e3/l.fps),function(){for(c=h.history;c--;)b[c]=0===c?l.fps:b[c-1],M[c]=0===c?l.duration:M[c-1]}(),P(),h.heat){if(p.length)for(c=p.length;c--;)p[c].el.style[i[p[c].name].heatOn]=x?w(i[p[c].name].heatmap,l.fps,0,h.maxFps):w(i[p[c].name].heatmap,l.duration,h.threshold,0);if(_.graph&&i.column.heatOn)for(c=m.length;c--;)m[c].style[i.column.heatOn]=x?w(i.column.heatmap,b[c],0,h.maxFps):w(i.column.heatmap,M[c],h.threshold,0)}if(_.graph)for(f=0;f<h.history;f++)m[f].style.height=(x?b[f]?Math.round(a/h.maxFps*Math.min(b[f],h.maxFps)):0:M[f]?Math.round(a/h.threshold*Math.min(M[f],h.threshold)):0)+"px"}function R(){h.interval<20?(r=B(R),E()):(r=setTimeout(R,h.interval),o=B(E))}function k(t){(t=t||window.event).preventDefault?(t.preventDefault(),t.stopPropagation()):(t.returnValue=!1,t.cancelBubble=!0),l.toggle()}function A(){h.toggleOn&&Y(_.container,h.toggleOn,k,1),e.removeChild(_.container)}function S(){if(i=z.theme[h.theme],!(u=i.compiledHeatmaps||[]).length&&i.heatmaps.length){for(f=0;f<i.heatmaps.length;f++)for(u[f]=[],c=0;c<=d;c++)u[f][c]=(t=.33/d*c,e=i.heatmaps[f].saturation,n=i.heatmaps[f].lightness,a=o=r=void 0,0===(a=n<=.5?n*(1+e):n+e-n*e)?"#000":(t=a*((a-(e=2*n-a))/a)*((t*=6)-(n=Math.floor(t))),t=0===n||6===n?(r=a,o=e+t,e):1===n?(r=a-t,o=a,e):2===n?(o=a,(r=e)+t):3===n?(r=e,o=a-t,a):4===n?(r=e+t,o=e,a):(o=e,(r=a)-t),"#"+q(r)+q(o)+q(t)));i.compiledHeatmaps=u}var t,e,n,r,o,a}function O(){for(var t in _.container&&A(),S(),_.container=L(C("div"),i.container),_.count=_.container.appendChild(L(C("div"),i.count)),_.legend=_.container.appendChild(L(C("div"),i.legend)),_.graph=h.graph?_.container.appendChild(L(C("div"),i.graph)):0,p.length=0,_)_[t]&&i[t].heatOn&&p.push({name:t,el:_[t]});if(m.length=0,_.graph)for(_.graph.style.width=h.history*i.column.width+(h.history-1)*i.column.spacing+"px",c=0;c<h.history;c++)m[c]=_.graph.appendChild(L(C("div"),i.column)),m[c].style.position="absolute",m[c].style.bottom=0,m[c].style.right=c*i.column.width+c*i.column.spacing+"px",m[c].style.width=i.column.width+"px",m[c].style.height="0px";T(),P(),e.appendChild(_.container),_.graph&&(a=_.graph.clientHeight),h.toggleOn&&("click"===h.toggleOn&&(_.container.style.cursor="pointer"),Y(_.container,h.toggleOn,k))}function T(){L(_.container,h)}l.options=h,l.fps=0,l.duration=0,l.isPaused=0,l.tickStart=function(){g=N()},l.tick=function(){n=N(),v+=(n-y-v)/h.smoothing,l.fps=1e3/v,l.duration=g<y?v:n-g,y=n},l.pause=function(){return r&&(l.isPaused=1,clearTimeout(r),W(r),W(o),r=o=0),l},l.resume=function(){return r||(l.isPaused=0,R()),l},l.set=function(t,e){return h[t]=e,x="fps"===h.show,-1!==I(t,U)&&O(),-1!==I(t,V)&&T(),l},l.showDuration=function(){return l.set("show","ms"),l},l.showFps=function(){return l.set("show","fps"),l},l.toggle=function(){return l.set("show",x?"ms":"fps"),l},l.hide=function(){return l.pause(),_.container.style.display="none",l},l.show=function(){return l.resume(),_.container.style.display="block",l},l.destroy=function(){l.pause(),A(),l.tick=l.tickStart=function(){}},O(),R()}z.extend=D,(window.FPSMeter=z).defaults={interval:100,smoothing:10,show:"fps",toggleOn:"click",decimals:1,maxFps:60,threshold:100,position:"absolute",zIndex:10,left:"5px",top:"5px",right:"auto",bottom:"auto",margin:"0 0 0 0",theme:"dark",heat:0,graph:0,history:20};var U=["toggleOn","theme","heat","graph","history"],V=["position","zIndex","left","top","right","bottom","margin"]}(window),function(t){"use strict";t.theme={};var e=t.theme.base={heatmaps:[],container:{heatOn:null,heatmap:null,padding:"5px",minWidth:"95px",height:"30px",lineHeight:"30px",textAlign:"right",textShadow:"none"},count:{heatOn:null,heatmap:null,position:"absolute",top:0,right:0,padding:"5px 10px",height:"30px",fontSize:"24px",fontFamily:"Consolas, Andale Mono, monospace",zIndex:2},legend:{heatOn:null,heatmap:null,position:"absolute",top:0,left:0,padding:"5px 10px",height:"30px",fontSize:"12px",lineHeight:"32px",fontFamily:"sans-serif",textAlign:"left",zIndex:2},graph:{heatOn:null,heatmap:null,position:"relative",boxSizing:"padding-box",MozBoxSizing:"padding-box",height:"100%",zIndex:1},column:{width:4,spacing:1,heatOn:null,heatmap:null}};t.theme.dark=t.extend({},e,{heatmaps:[{saturation:.8,lightness:.8}],container:{background:"#222",color:"#fff",border:"1px solid #1a1a1a",textShadow:"1px 1px 0 #222"},count:{heatOn:"color"},column:{background:"#3f3f3f"}}),t.theme.light=t.extend({},e,{heatmaps:[{saturation:.5,lightness:.5}],container:{color:"#666",background:"#fff",textShadow:"1px 1px 0 rgba(255,255,255,.5), -1px -1px 0 rgba(255,255,255,.5)",boxShadow:"0 0 0 1px rgba(0,0,0,.1)"},count:{heatOn:"color"},column:{background:"#eaeaea"}}),t.theme.colorful=t.extend({},e,{heatmaps:[{saturation:.5,lightness:.6}],container:{heatOn:"backgroundColor",background:"#888",color:"#fff",textShadow:"1px 1px 0 rgba(0,0,0,.2)",boxShadow:"0 0 0 1px rgba(0,0,0,.1)"},column:{background:"#777",backgroundColor:"rgba(0,0,0,.2)"}}),t.theme.transparent=t.extend({},e,{heatmaps:[{saturation:.8,lightness:.5}],container:{padding:0,color:"#fff",textShadow:"1px 1px 0 rgba(0,0,0,.5)"},count:{padding:"0 5px",height:"40px",lineHeight:"40px"},legend:{padding:"0 5px",height:"40px",lineHeight:"42px"},graph:{height:"40px"},column:{width:5,background:"#999",heatOn:"backgroundColor",opacity:.5}})}((window,FPSMeter))},{}],2:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.setMatrixArrayType=function(t){n.ARRAY_TYPE=o=t},n.toRadian=function(t){return t*i},n.equals=function(t,e){return Math.abs(t-e)<=r*Math.max(1,Math.abs(t),Math.abs(e))},n.RANDOM=n.ARRAY_TYPE=n.EPSILON=void 0;var r=1e-6;n.EPSILON=r;var o="undefined"!=typeof Float32Array?Float32Array:Array;n.ARRAY_TYPE=o;var a=Math.random;n.RANDOM=a;var i=Math.PI/180;Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)})},{}],3:[function(t,e,n){"use strict";function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(n,"__esModule",{value:!0}),n.vec4=n.vec3=n.vec2=n.quat2=n.quat=n.mat4=n.mat3=n.mat2d=n.mat2=n.glMatrix=void 0;var r=o(t("./common.js"));n.glMatrix=r;r=o(t("./mat2.js"));n.mat2=r;r=o(t("./mat2d.js"));n.mat2d=r;r=o(t("./mat3.js"));n.mat3=r;r=o(t("./mat4.js"));n.mat4=r;r=o(t("./quat.js"));n.quat=r;r=o(t("./quat2.js"));n.quat2=r;r=o(t("./vec2.js"));n.vec2=r;r=o(t("./vec3.js"));n.vec3=r;t=o(t("./vec4.js"));function u(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return u=function(){return t},t}function o(t){if(t&&t.__esModule)return t;if(null===t||"object"!==i(t)&&"function"!=typeof t)return{default:t};var e=u();if(e&&e.has(t))return e.get(t);var n,r,o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in t)Object.prototype.hasOwnProperty.call(t,n)&&((r=a?Object.getOwnPropertyDescriptor(t,n):null)&&(r.get||r.set)?Object.defineProperty(o,n,r):o[n]=t[n]);return o.default=t,e&&e.set(t,o),o}n.vec4=t},{"./common.js":2,"./mat2.js":4,"./mat2d.js":5,"./mat3.js":6,"./mat4.js":7,"./quat.js":8,"./quat2.js":9,"./vec2.js":10,"./vec3.js":11,"./vec4.js":12}],4:[function(t,e,n){"use strict";function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(n,"__esModule",{value:!0}),n.create=function(){var t=new s.ARRAY_TYPE(4);s.ARRAY_TYPE!=Float32Array&&(t[1]=0,t[2]=0);return t[0]=1,t[3]=1,t},n.clone=function(t){var e=new s.ARRAY_TYPE(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},n.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},n.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},n.fromValues=function(t,e,n,r){var o=new s.ARRAY_TYPE(4);return o[0]=t,o[1]=e,o[2]=n,o[3]=r,o},n.set=function(t,e,n,r,o){return t[0]=e,t[1]=n,t[2]=r,t[3]=o,t},n.transpose=function(t,e){{var n;t===e?(n=e[1],t[1]=e[2],t[2]=n):(t[0]=e[0],t[1]=e[2],t[2]=e[1],t[3]=e[3])}return t},n.invert=function(t,e){var n=e[0],r=e[1],o=e[2],a=e[3],e=n*a-o*r;return e?(e=1/e,t[0]=a*e,t[1]=-r*e,t[2]=-o*e,t[3]=n*e,t):null},n.adjoint=function(t,e){var n=e[0];return t[0]=e[3],t[1]=-e[1],t[2]=-e[2],t[3]=n,t},n.determinant=function(t){return t[0]*t[3]-t[2]*t[1]},n.multiply=r,n.rotate=function(t,e,n){var r=e[0],o=e[1],a=e[2],i=e[3],e=Math.sin(n),n=Math.cos(n);return t[0]=r*n+a*e,t[1]=o*n+i*e,t[2]=r*-e+a*n,t[3]=o*-e+i*n,t},n.scale=function(t,e,n){var r=e[0],o=e[1],a=e[2],i=e[3],e=n[0],n=n[1];return t[0]=r*e,t[1]=o*e,t[2]=a*n,t[3]=i*n,t},n.fromRotation=function(t,e){var n=Math.sin(e),e=Math.cos(e);return t[0]=e,t[1]=n,t[2]=-n,t[3]=e,t},n.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t},n.str=function(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},n.frob=function(t){return Math.hypot(t[0],t[1],t[2],t[3])},n.LDU=function(t,e,n,r){return t[2]=r[2]/r[0],n[0]=r[0],n[1]=r[1],n[3]=r[3]-t[2]*n[1],[t,e,n]},n.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t},n.subtract=o,n.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]},n.equals=function(t,e){var n=t[0],r=t[1],o=t[2],a=t[3],i=e[0],u=e[1],t=e[2],e=e[3];return Math.abs(n-i)<=s.EPSILON*Math.max(1,Math.abs(n),Math.abs(i))&&Math.abs(r-u)<=s.EPSILON*Math.max(1,Math.abs(r),Math.abs(u))&&Math.abs(o-t)<=s.EPSILON*Math.max(1,Math.abs(o),Math.abs(t))&&Math.abs(a-e)<=s.EPSILON*Math.max(1,Math.abs(a),Math.abs(e))},n.multiplyScalar=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t},n.multiplyScalarAndAdd=function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t},n.sub=n.mul=void 0;var s=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==i(t)&&"function"!=typeof t)return{default:t};var e=u();if(e&&e.has(t))return e.get(t);var n,r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in t){var a;Object.prototype.hasOwnProperty.call(t,n)&&((a=o?Object.getOwnPropertyDescriptor(t,n):null)&&(a.get||a.set)?Object.defineProperty(r,n,a):r[n]=t[n])}r.default=t,e&&e.set(t,r);return r}(t("./common.js"));function u(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return u=function(){return t},t}function r(t,e,n){var r=e[0],o=e[1],a=e[2],i=e[3],u=n[0],s=n[1],e=n[2],n=n[3];return t[0]=r*u+a*s,t[1]=o*u+i*s,t[2]=r*e+a*n,t[3]=o*e+i*n,t}function o(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t}n.mul=r,n.sub=o},{"./common.js":2}],5:[function(t,e,n){"use strict";function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(n,"__esModule",{value:!0}),n.create=function(){var t=new h.ARRAY_TYPE(6);h.ARRAY_TYPE!=Float32Array&&(t[1]=0,t[2]=0,t[4]=0,t[5]=0);return t[0]=1,t[3]=1,t},n.clone=function(t){var e=new h.ARRAY_TYPE(6);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e},n.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t},n.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},n.fromValues=function(t,e,n,r,o,a){var i=new h.ARRAY_TYPE(6);return i[0]=t,i[1]=e,i[2]=n,i[3]=r,i[4]=o,i[5]=a,i},n.set=function(t,e,n,r,o,a,i){return t[0]=e,t[1]=n,t[2]=r,t[3]=o,t[4]=a,t[5]=i,t},n.invert=function(t,e){var n=e[0],r=e[1],o=e[2],a=e[3],i=e[4],u=e[5],e=n*a-r*o;return e?(e=1/e,t[0]=a*e,t[1]=-r*e,t[2]=-o*e,t[3]=n*e,t[4]=(o*u-a*i)*e,t[5]=(r*i-n*u)*e,t):null},n.determinant=function(t){return t[0]*t[3]-t[1]*t[2]},n.multiply=r,n.rotate=function(t,e,n){var r=e[0],o=e[1],a=e[2],i=e[3],u=e[4],s=e[5],e=Math.sin(n),n=Math.cos(n);return t[0]=r*n+a*e,t[1]=o*n+i*e,t[2]=r*-e+a*n,t[3]=o*-e+i*n,t[4]=u,t[5]=s,t},n.scale=function(t,e,n){var r=e[0],o=e[1],a=e[2],i=e[3],u=e[4],s=e[5],e=n[0],n=n[1];return t[0]=r*e,t[1]=o*e,t[2]=a*n,t[3]=i*n,t[4]=u,t[5]=s,t},n.translate=function(t,e,n){var r=e[0],o=e[1],a=e[2],i=e[3],u=e[4],s=e[5],e=n[0],n=n[1];return t[0]=r,t[1]=o,t[2]=a,t[3]=i,t[4]=r*e+a*n+u,t[5]=o*e+i*n+s,t},n.fromRotation=function(t,e){var n=Math.sin(e),e=Math.cos(e);return t[0]=e,t[1]=n,t[2]=-n,t[3]=e,t[4]=0,t[5]=0,t},n.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t[4]=0,t[5]=0,t},n.fromTranslation=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=e[0],t[5]=e[1],t},n.str=function(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"},n.frob=function(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],1)},n.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t},n.subtract=o,n.multiplyScalar=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t},n.multiplyScalarAndAdd=function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t},n.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]},n.equals=function(t,e){var n=t[0],r=t[1],o=t[2],a=t[3],i=t[4],u=t[5],s=e[0],c=e[1],f=e[2],l=e[3],t=e[4],e=e[5];return Math.abs(n-s)<=h.EPSILON*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(r-c)<=h.EPSILON*Math.max(1,Math.abs(r),Math.abs(c))&&Math.abs(o-f)<=h.EPSILON*Math.max(1,Math.abs(o),Math.abs(f))&&Math.abs(a-l)<=h.EPSILON*Math.max(1,Math.abs(a),Math.abs(l))&&Math.abs(i-t)<=h.EPSILON*Math.max(1,Math.abs(i),Math.abs(t))&&Math.abs(u-e)<=h.EPSILON*Math.max(1,Math.abs(u),Math.abs(e))},n.sub=n.mul=void 0;var h=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==i(t)&&"function"!=typeof t)return{default:t};var e=u();if(e&&e.has(t))return e.get(t);var n,r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in t){var a;Object.prototype.hasOwnProperty.call(t,n)&&((a=o?Object.getOwnPropertyDescriptor(t,n):null)&&(a.get||a.set)?Object.defineProperty(r,n,a):r[n]=t[n])}r.default=t,e&&e.set(t,r);return r}(t("./common.js"));function u(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return u=function(){return t},t}function r(t,e,n){var r=e[0],o=e[1],a=e[2],i=e[3],u=e[4],s=e[5],c=n[0],f=n[1],l=n[2],h=n[3],e=n[4],n=n[5];return t[0]=r*c+a*f,t[1]=o*c+i*f,t[2]=r*l+a*h,t[3]=o*l+i*h,t[4]=r*e+a*n+u,t[5]=o*e+i*n+s,t}function o(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t}n.mul=r,n.sub=o},{"./common.js":2}],6:[function(t,e,n){"use strict";function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(n,"__esModule",{value:!0}),n.create=function(){var t=new g.ARRAY_TYPE(9);g.ARRAY_TYPE!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0);return t[0]=1,t[4]=1,t[8]=1,t},n.fromMat4=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t},n.clone=function(t){var e=new g.ARRAY_TYPE(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e},n.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},n.fromValues=function(t,e,n,r,o,a,i,u,s){var c=new g.ARRAY_TYPE(9);return c[0]=t,c[1]=e,c[2]=n,c[3]=r,c[4]=o,c[5]=a,c[6]=i,c[7]=u,c[8]=s,c},n.set=function(t,e,n,r,o,a,i,u,s,c){return t[0]=e,t[1]=n,t[2]=r,t[3]=o,t[4]=a,t[5]=i,t[6]=u,t[7]=s,t[8]=c,t},n.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},n.transpose=function(t,e){{var n,r,o;t===e?(n=e[1],r=e[2],o=e[5],t[1]=e[3],t[2]=e[6],t[3]=n,t[5]=e[7],t[6]=r,t[7]=o):(t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8])}return t},n.invert=function(t,e){var n=e[0],r=e[1],o=e[2],a=e[3],i=e[4],u=e[5],s=e[6],c=e[7],f=e[8],l=f*i-u*c,h=-f*a+u*s,_=c*a-i*s,e=n*l+r*h+o*_;return e?(e=1/e,t[0]=l*e,t[1]=(-f*r+o*c)*e,t[2]=(u*r-o*i)*e,t[3]=h*e,t[4]=(f*n-o*s)*e,t[5]=(-u*n+o*a)*e,t[6]=_*e,t[7]=(-c*n+r*s)*e,t[8]=(i*n-r*a)*e,t):null},n.adjoint=function(t,e){var n=e[0],r=e[1],o=e[2],a=e[3],i=e[4],u=e[5],s=e[6],c=e[7],e=e[8];return t[0]=i*e-u*c,t[1]=o*c-r*e,t[2]=r*u-o*i,t[3]=u*s-a*e,t[4]=n*e-o*s,t[5]=o*a-n*u,t[6]=a*c-i*s,t[7]=r*s-n*c,t[8]=n*i-r*a,t},n.determinant=function(t){var e=t[0],n=t[1],r=t[2],o=t[3],a=t[4],i=t[5],u=t[6],s=t[7],t=t[8];return e*(t*a-i*s)+n*(-t*o+i*u)+r*(s*o-a*u)},n.multiply=r,n.translate=function(t,e,n){var r=e[0],o=e[1],a=e[2],i=e[3],u=e[4],s=e[5],c=e[6],f=e[7],l=e[8],e=n[0],n=n[1];return t[0]=r,t[1]=o,t[2]=a,t[3]=i,t[4]=u,t[5]=s,t[6]=e*r+n*i+c,t[7]=e*o+n*u+f,t[8]=e*a+n*s+l,t},n.rotate=function(t,e,n){var r=e[0],o=e[1],a=e[2],i=e[3],u=e[4],s=e[5],c=e[6],f=e[7],l=e[8],e=Math.sin(n),n=Math.cos(n);return t[0]=n*r+e*i,t[1]=n*o+e*u,t[2]=n*a+e*s,t[3]=n*i-e*r,t[4]=n*u-e*o,t[5]=n*s-e*a,t[6]=c,t[7]=f,t[8]=l,t},n.scale=function(t,e,n){var r=n[0],n=n[1];return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=n*e[3],t[4]=n*e[4],t[5]=n*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},n.fromTranslation=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t},n.fromRotation=function(t,e){var n=Math.sin(e),e=Math.cos(e);return t[0]=e,t[1]=n,t[2]=0,t[3]=-n,t[4]=e,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},n.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},n.fromMat2d=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t},n.fromQuat=function(t,e){var n=e[0],r=e[1],o=e[2],a=e[3],i=n+n,u=r+r,s=o+o,c=n*i,f=r*i,e=r*u,n=o*i,r=o*u,o=o*s,i=a*i,u=a*u,s=a*s;return t[0]=1-e-o,t[3]=f-s,t[6]=n+u,t[1]=f+s,t[4]=1-c-o,t[7]=r-i,t[2]=n-u,t[5]=r+i,t[8]=1-c-e,t},n.normalFromMat4=function(t,e){var n=e[0],r=e[1],o=e[2],a=e[3],i=e[4],u=e[5],s=e[6],c=e[7],f=e[8],l=e[9],h=e[10],_=e[11],m=e[12],d=e[13],p=e[14],v=e[15],g=n*u-r*i,y=n*s-o*i,b=n*c-a*i,M=r*s-o*u,x=r*c-a*u,w=o*c-a*s,P=f*d-l*m,E=f*p-h*m,e=f*v-_*m,f=l*p-h*d,l=l*v-_*d,h=h*v-_*p,_=g*h-y*l+b*f+M*e-x*E+w*P;return _?(_=1/_,t[0]=(u*h-s*l+c*f)*_,t[1]=(s*e-i*h-c*E)*_,t[2]=(i*l-u*e+c*P)*_,t[3]=(o*l-r*h-a*f)*_,t[4]=(n*h-o*e+a*E)*_,t[5]=(r*e-n*l-a*P)*_,t[6]=(d*w-p*x+v*M)*_,t[7]=(p*b-m*w-v*y)*_,t[8]=(m*x-d*b+v*g)*_,t):null},n.projection=function(t,e,n){return t[0]=2/e,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/n,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t},n.str=function(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"},n.frob=function(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8])},n.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t},n.subtract=o,n.multiplyScalar=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t},n.multiplyScalarAndAdd=function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t[6]=e[6]+n[6]*r,t[7]=e[7]+n[7]*r,t[8]=e[8]+n[8]*r,t},n.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]},n.equals=function(t,e){var n=t[0],r=t[1],o=t[2],a=t[3],i=t[4],u=t[5],s=t[6],c=t[7],f=t[8],l=e[0],h=e[1],_=e[2],m=e[3],d=e[4],p=e[5],v=e[6],t=e[7],e=e[8];return Math.abs(n-l)<=g.EPSILON*Math.max(1,Math.abs(n),Math.abs(l))&&Math.abs(r-h)<=g.EPSILON*Math.max(1,Math.abs(r),Math.abs(h))&&Math.abs(o-_)<=g.EPSILON*Math.max(1,Math.abs(o),Math.abs(_))&&Math.abs(a-m)<=g.EPSILON*Math.max(1,Math.abs(a),Math.abs(m))&&Math.abs(i-d)<=g.EPSILON*Math.max(1,Math.abs(i),Math.abs(d))&&Math.abs(u-p)<=g.EPSILON*Math.max(1,Math.abs(u),Math.abs(p))&&Math.abs(s-v)<=g.EPSILON*Math.max(1,Math.abs(s),Math.abs(v))&&Math.abs(c-t)<=g.EPSILON*Math.max(1,Math.abs(c),Math.abs(t))&&Math.abs(f-e)<=g.EPSILON*Math.max(1,Math.abs(f),Math.abs(e))},n.sub=n.mul=void 0;var g=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==i(t)&&"function"!=typeof t)return{default:t};var e=u();if(e&&e.has(t))return e.get(t);var n,r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in t){var a;Object.prototype.hasOwnProperty.call(t,n)&&((a=o?Object.getOwnPropertyDescriptor(t,n):null)&&(a.get||a.set)?Object.defineProperty(r,n,a):r[n]=t[n])}r.default=t,e&&e.set(t,r);return r}(t("./common.js"));function u(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return u=function(){return t},t}function r(t,e,n){var r=e[0],o=e[1],a=e[2],i=e[3],u=e[4],s=e[5],c=e[6],f=e[7],l=e[8],h=n[0],_=n[1],m=n[2],d=n[3],p=n[4],v=n[5],g=n[6],e=n[7],n=n[8];return t[0]=h*r+_*i+m*c,t[1]=h*o+_*u+m*f,t[2]=h*a+_*s+m*l,t[3]=d*r+p*i+v*c,t[4]=d*o+p*u+v*f,t[5]=d*a+p*s+v*l,t[6]=g*r+e*i+n*c,t[7]=g*o+e*u+n*f,t[8]=g*a+e*s+n*l,t}function o(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t}n.mul=r,n.sub=o},{"./common.js":2}],7:[function(t,e,n){"use strict";function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(n,"__esModule",{value:!0}),n.create=function(){var t=new F.ARRAY_TYPE(16);F.ARRAY_TYPE!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0);return t[0]=1,t[5]=1,t[10]=1,t[15]=1,t},n.clone=function(t){var e=new F.ARRAY_TYPE(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},n.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},n.fromValues=function(t,e,n,r,o,a,i,u,s,c,f,l,h,_,m,d){var p=new F.ARRAY_TYPE(16);return p[0]=t,p[1]=e,p[2]=n,p[3]=r,p[4]=o,p[5]=a,p[6]=i,p[7]=u,p[8]=s,p[9]=c,p[10]=f,p[11]=l,p[12]=h,p[13]=_,p[14]=m,p[15]=d,p},n.set=function(t,e,n,r,o,a,i,u,s,c,f,l,h,_,m,d,p){return t[0]=e,t[1]=n,t[2]=r,t[3]=o,t[4]=a,t[5]=i,t[6]=u,t[7]=s,t[8]=c,t[9]=f,t[10]=l,t[11]=h,t[12]=_,t[13]=m,t[14]=d,t[15]=p,t},n.identity=m,n.transpose=function(t,e){{var n,r,o,a,i,u;t===e?(n=e[1],r=e[2],o=e[3],a=e[6],i=e[7],u=e[11],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=r,t[9]=a,t[11]=e[14],t[12]=o,t[13]=i,t[14]=u):(t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15])}return t},n.invert=function(t,e){var n=e[0],r=e[1],o=e[2],a=e[3],i=e[4],u=e[5],s=e[6],c=e[7],f=e[8],l=e[9],h=e[10],_=e[11],m=e[12],d=e[13],p=e[14],v=e[15],g=n*u-r*i,y=n*s-o*i,b=n*c-a*i,M=r*s-o*u,x=r*c-a*u,w=o*c-a*s,P=f*d-l*m,E=f*p-h*m,R=f*v-_*m,k=l*p-h*d,A=l*v-_*d,S=h*v-_*p,e=g*S-y*A+b*k+M*R-x*E+w*P;return e?(e=1/e,t[0]=(u*S-s*A+c*k)*e,t[1]=(o*A-r*S-a*k)*e,t[2]=(d*w-p*x+v*M)*e,t[3]=(h*x-l*w-_*M)*e,t[4]=(s*R-i*S-c*E)*e,t[5]=(n*S-o*R+a*E)*e,t[6]=(p*b-m*w-v*y)*e,t[7]=(f*w-h*b+_*y)*e,t[8]=(i*A-u*R+c*P)*e,t[9]=(r*R-n*A-a*P)*e,t[10]=(m*x-d*b+v*g)*e,t[11]=(l*b-f*x-_*g)*e,t[12]=(u*E-i*k-s*P)*e,t[13]=(n*k-r*E+o*P)*e,t[14]=(d*y-m*M-p*g)*e,t[15]=(f*M-l*y+h*g)*e,t):null},n.adjoint=function(t,e){var n=e[0],r=e[1],o=e[2],a=e[3],i=e[4],u=e[5],s=e[6],c=e[7],f=e[8],l=e[9],h=e[10],_=e[11],m=e[12],d=e[13],p=e[14],e=e[15];return t[0]=u*(h*e-_*p)-l*(s*e-c*p)+d*(s*_-c*h),t[1]=-(r*(h*e-_*p)-l*(o*e-a*p)+d*(o*_-a*h)),t[2]=r*(s*e-c*p)-u*(o*e-a*p)+d*(o*c-a*s),t[3]=-(r*(s*_-c*h)-u*(o*_-a*h)+l*(o*c-a*s)),t[4]=-(i*(h*e-_*p)-f*(s*e-c*p)+m*(s*_-c*h)),t[5]=n*(h*e-_*p)-f*(o*e-a*p)+m*(o*_-a*h),t[6]=-(n*(s*e-c*p)-i*(o*e-a*p)+m*(o*c-a*s)),t[7]=n*(s*_-c*h)-i*(o*_-a*h)+f*(o*c-a*s),t[8]=i*(l*e-_*d)-f*(u*e-c*d)+m*(u*_-c*l),t[9]=-(n*(l*e-_*d)-f*(r*e-a*d)+m*(r*_-a*l)),t[10]=n*(u*e-c*d)-i*(r*e-a*d)+m*(r*c-a*u),t[11]=-(n*(u*_-c*l)-i*(r*_-a*l)+f*(r*c-a*u)),t[12]=-(i*(l*p-h*d)-f*(u*p-s*d)+m*(u*h-s*l)),t[13]=n*(l*p-h*d)-f*(r*p-o*d)+m*(r*h-o*l),t[14]=-(n*(u*p-s*d)-i*(r*p-o*d)+m*(r*s-o*u)),t[15]=n*(u*h-s*l)-i*(r*h-o*l)+f*(r*s-o*u),t},n.determinant=function(t){var e=t[0],n=t[1],r=t[2],o=t[3],a=t[4],i=t[5],u=t[6],s=t[7],c=t[8],f=t[9],l=t[10],h=t[11],_=t[12],m=t[13],d=t[14],t=t[15];return(e*i-n*a)*(l*t-h*d)-(e*u-r*a)*(f*t-h*m)+(e*s-o*a)*(f*d-l*m)+(n*u-r*i)*(c*t-h*_)-(n*s-o*i)*(c*d-l*_)+(r*s-o*u)*(c*m-f*_)},n.multiply=r,n.translate=function(t,e,n){var r,o,a,i,u,s,c,f,l,h,_,m=n[0],d=n[1],p=n[2];e===t?(t[12]=e[0]*m+e[4]*d+e[8]*p+e[12],t[13]=e[1]*m+e[5]*d+e[9]*p+e[13],t[14]=e[2]*m+e[6]*d+e[10]*p+e[14],t[15]=e[3]*m+e[7]*d+e[11]*p+e[15]):(r=e[0],o=e[1],a=e[2],i=e[3],u=e[4],s=e[5],c=e[6],f=e[7],l=e[8],h=e[9],_=e[10],n=e[11],t[0]=r,t[1]=o,t[2]=a,t[3]=i,t[4]=u,t[5]=s,t[6]=c,t[7]=f,t[8]=l,t[9]=h,t[10]=_,t[11]=n,t[12]=r*m+u*d+l*p+e[12],t[13]=o*m+s*d+h*p+e[13],t[14]=a*m+c*d+_*p+e[14],t[15]=i*m+f*d+n*p+e[15]);return t},n.scale=function(t,e,n){var r=n[0],o=n[1],n=n[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*o,t[5]=e[5]*o,t[6]=e[6]*o,t[7]=e[7]*o,t[8]=e[8]*n,t[9]=e[9]*n,t[10]=e[10]*n,t[11]=e[11]*n,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},n.rotate=function(t,e,n,r){var o,a,i,u,s,c,f,l,h,_,m,d,p,v,g,y,b,M,x,w=r[0],P=r[1],E=r[2],R=Math.hypot(w,P,E);if(R<F.EPSILON)return null;w*=R=1/R,P*=R,E*=R,M=Math.sin(n),x=Math.cos(n),o=1-x,a=e[0],i=e[1],u=e[2],s=e[3],c=e[4],f=e[5],l=e[6],h=e[7],_=e[8],m=e[9],d=e[10],p=e[11],v=w*w*o+x,g=P*w*o+E*M,y=E*w*o-P*M,b=w*P*o-E*M,r=P*P*o+x,R=E*P*o+w*M,n=w*E*o+P*M,M=P*E*o-w*M,x=E*E*o+x,t[0]=a*v+c*g+_*y,t[1]=i*v+f*g+m*y,t[2]=u*v+l*g+d*y,t[3]=s*v+h*g+p*y,t[4]=a*b+c*r+_*R,t[5]=i*b+f*r+m*R,t[6]=u*b+l*r+d*R,t[7]=s*b+h*r+p*R,t[8]=a*n+c*M+_*x,t[9]=i*n+f*M+m*x,t[10]=u*n+l*M+d*x,t[11]=s*n+h*M+p*x,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]);return t},n.rotateX=function(t,e,n){var r=Math.sin(n),o=Math.cos(n),a=e[4],i=e[5],u=e[6],s=e[7],c=e[8],f=e[9],l=e[10],n=e[11];e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]);return t[4]=a*o+c*r,t[5]=i*o+f*r,t[6]=u*o+l*r,t[7]=s*o+n*r,t[8]=c*o-a*r,t[9]=f*o-i*r,t[10]=l*o-u*r,t[11]=n*o-s*r,t},n.rotateY=function(t,e,n){var r=Math.sin(n),o=Math.cos(n),a=e[0],i=e[1],u=e[2],s=e[3],c=e[8],f=e[9],l=e[10],n=e[11];e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]);return t[0]=a*o-c*r,t[1]=i*o-f*r,t[2]=u*o-l*r,t[3]=s*o-n*r,t[8]=a*r+c*o,t[9]=i*r+f*o,t[10]=u*r+l*o,t[11]=s*r+n*o,t},n.rotateZ=function(t,e,n){var r=Math.sin(n),o=Math.cos(n),a=e[0],i=e[1],u=e[2],s=e[3],c=e[4],f=e[5],l=e[6],n=e[7];e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]);return t[0]=a*o+c*r,t[1]=i*o+f*r,t[2]=u*o+l*r,t[3]=s*o+n*r,t[4]=c*o-a*r,t[5]=f*o-i*r,t[6]=l*o-u*r,t[7]=n*o-s*r,t},n.fromTranslation=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t},n.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},n.fromRotation=function(t,e,n){var r=n[0],o=n[1],a=n[2],i=Math.hypot(r,o,a);if(i<F.EPSILON)return null;return r*=i=1/i,o*=i,a*=i,n=Math.sin(e),i=Math.cos(e),e=1-i,t[0]=r*r*e+i,t[1]=o*r*e+a*n,t[2]=a*r*e-o*n,t[3]=0,t[4]=r*o*e-a*n,t[5]=o*o*e+i,t[6]=a*o*e+r*n,t[7]=0,t[8]=r*a*e+o*n,t[9]=o*a*e-r*n,t[10]=a*a*e+i,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},n.fromXRotation=function(t,e){var n=Math.sin(e),e=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e,t[6]=n,t[7]=0,t[8]=0,t[9]=-n,t[10]=e,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},n.fromYRotation=function(t,e){var n=Math.sin(e),e=Math.cos(e);return t[0]=e,t[1]=0,t[2]=-n,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=n,t[9]=0,t[10]=e,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},n.fromZRotation=function(t,e){var n=Math.sin(e),e=Math.cos(e);return t[0]=e,t[1]=n,t[2]=0,t[3]=0,t[4]=-n,t[5]=e,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},n.fromRotationTranslation=h,n.fromQuat2=function(t,e){var n=new F.ARRAY_TYPE(3),r=-e[0],o=-e[1],a=-e[2],i=e[3],u=e[4],s=e[5],c=e[6],f=e[7],l=r*r+o*o+a*a+i*i;0<l?(n[0]=2*(u*i+f*r+s*a-c*o)/l,n[1]=2*(s*i+f*o+c*r-u*a)/l,n[2]=2*(c*i+f*a+u*o-s*r)/l):(n[0]=2*(u*i+f*r+s*a-c*o),n[1]=2*(s*i+f*o+c*r-u*a),n[2]=2*(c*i+f*a+u*o-s*r));return h(t,e,n),t},n.getTranslation=function(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t},n.getScaling=_,n.getRotation=function(t,e){var n=new F.ARRAY_TYPE(3);_(n,e);var r=1/n[0],o=1/n[1],a=1/n[2],i=e[0]*r,u=e[1]*o,s=e[2]*a,c=e[4]*r,f=e[5]*o,l=e[6]*a,n=e[8]*r,r=e[9]*o,o=e[10]*a,e=i+f+o,a=0;0<e?(a=2*Math.sqrt(1+e),t[3]=.25*a,t[0]=(l-r)/a,t[1]=(n-s)/a,t[2]=(u-c)/a):f<i&&o<i?(a=2*Math.sqrt(1+i-f-o),t[3]=(l-r)/a,t[0]=.25*a,t[1]=(u+c)/a,t[2]=(n+s)/a):o<f?(a=2*Math.sqrt(1+f-i-o),t[3]=(n-s)/a,t[0]=(u+c)/a,t[1]=.25*a,t[2]=(l+r)/a):(a=2*Math.sqrt(1+o-i-f),t[3]=(u-c)/a,t[0]=(n+s)/a,t[1]=(l+r)/a,t[2]=.25*a);return t},n.fromRotationTranslationScale=function(t,e,n,r){var o=e[0],a=e[1],i=e[2],u=e[3],s=o+o,c=a+a,f=i+i,l=o*s,h=o*c,_=o*f,e=a*c,o=a*f,a=i*f,i=u*s,s=u*c,c=u*f,u=r[0],f=r[1],r=r[2];return t[0]=(1-(e+a))*u,t[1]=(h+c)*u,t[2]=(_-s)*u,t[3]=0,t[4]=(h-c)*f,t[5]=(1-(l+a))*f,t[6]=(o+i)*f,t[7]=0,t[8]=(_+s)*r,t[9]=(o-i)*r,t[10]=(1-(l+e))*r,t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t},n.fromRotationTranslationScaleOrigin=function(t,e,n,r,o){var a=e[0],i=e[1],u=e[2],s=e[3],c=a+a,f=i+i,l=u+u,h=a*c,_=a*f,m=a*l,d=i*f,p=i*l,v=u*l,g=s*c,e=s*f,a=s*l,i=r[0],u=r[1],c=r[2],f=o[0],s=o[1],l=o[2],r=(1-(d+v))*i,o=(_+a)*i,i=(m-e)*i,a=(_-a)*u,v=(1-(h+v))*u,u=(p+g)*u,e=(m+e)*c,g=(p-g)*c,c=(1-(h+d))*c;return t[0]=r,t[1]=o,t[2]=i,t[3]=0,t[4]=a,t[5]=v,t[6]=u,t[7]=0,t[8]=e,t[9]=g,t[10]=c,t[11]=0,t[12]=n[0]+f-(r*f+a*s+e*l),t[13]=n[1]+s-(o*f+v*s+g*l),t[14]=n[2]+l-(i*f+u*s+c*l),t[15]=1,t},n.fromQuat=function(t,e){var n=e[0],r=e[1],o=e[2],a=e[3],i=n+n,u=r+r,s=o+o,c=n*i,f=r*i,e=r*u,n=o*i,r=o*u,o=o*s,i=a*i,u=a*u,s=a*s;return t[0]=1-e-o,t[1]=f+s,t[2]=n-u,t[3]=0,t[4]=f-s,t[5]=1-c-o,t[6]=r+i,t[7]=0,t[8]=n+u,t[9]=r-i,t[10]=1-c-e,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},n.frustum=function(t,e,n,r,o,a,i){var u=1/(n-e),s=1/(o-r),c=1/(a-i);return t[0]=2*a*u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*a*s,t[6]=0,t[7]=0,t[8]=(n+e)*u,t[9]=(o+r)*s,t[10]=(i+a)*c,t[11]=-1,t[12]=0,t[13]=0,t[14]=i*a*2*c,t[15]=0,t},n.perspective=function(t,e,n,r,o){e=1/Math.tan(e/2);t[0]=e/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=o&&o!==1/0?(e=1/(r-o),t[10]=(o+r)*e,t[14]=2*o*r*e):(t[10]=-1,t[14]=-2*r);return t},n.perspectiveFromFieldOfView=function(t,e,n,r){var o=Math.tan(e.upDegrees*Math.PI/180),a=Math.tan(e.downDegrees*Math.PI/180),i=Math.tan(e.leftDegrees*Math.PI/180),u=Math.tan(e.rightDegrees*Math.PI/180),s=2/(i+u),e=2/(o+a);return t[0]=s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e,t[6]=0,t[7]=0,t[8]=-(i-u)*s*.5,t[9]=(o-a)*e*.5,t[10]=r/(n-r),t[11]=-1,t[12]=0,t[13]=0,t[14]=r*n/(n-r),t[15]=0,t},n.ortho=function(t,e,n,r,o,a,i){var u=1/(e-n),s=1/(r-o),c=1/(a-i);return t[0]=-2*u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(e+n)*u,t[13]=(o+r)*s,t[14]=(i+a)*c,t[15]=1,t},n.lookAt=function(t,e,n,r){var o,a=e[0],i=e[1],u=e[2],s=r[0],c=r[1],f=r[2],l=n[0],h=n[1],_=n[2];if(Math.abs(a-l)<F.EPSILON&&Math.abs(i-h)<F.EPSILON&&Math.abs(u-_)<F.EPSILON)return m(t);o=a-l,e=i-h,r=u-_,n=1/Math.hypot(o,e,r),l=c*(r*=n)-f*(e*=n),h=f*(o*=n)-s*r,_=s*e-c*o,(n=Math.hypot(l,h,_))?(l*=n=1/n,h*=n,_*=n):_=h=l=0;f=e*_-r*h,s=r*l-o*_,c=o*h-e*l,(n=Math.hypot(f,s,c))?(f*=n=1/n,s*=n,c*=n):c=s=f=0;return t[0]=l,t[1]=f,t[2]=o,t[3]=0,t[4]=h,t[5]=s,t[6]=e,t[7]=0,t[8]=_,t[9]=c,t[10]=r,t[11]=0,t[12]=-(l*a+h*i+_*u),t[13]=-(f*a+s*i+c*u),t[14]=-(o*a+e*i+r*u),t[15]=1,t},n.targetTo=function(t,e,n,r){var o=e[0],a=e[1],i=e[2],u=r[0],s=r[1],c=r[2],f=o-n[0],l=a-n[1],e=i-n[2],r=f*f+l*l+e*e;0<r&&(r=1/Math.sqrt(r),f*=r,l*=r,e*=r);n=s*e-c*l,c=c*f-u*e,s=u*l-s*f;0<(r=n*n+c*c+s*s)&&(r=1/Math.sqrt(r),n*=r,c*=r,s*=r);return t[0]=n,t[1]=c,t[2]=s,t[3]=0,t[4]=l*s-e*c,t[5]=e*n-f*s,t[6]=f*c-l*n,t[7]=0,t[8]=f,t[9]=l,t[10]=e,t[11]=0,t[12]=o,t[13]=a,t[14]=i,t[15]=1,t},n.str=function(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"},n.frob=function(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])},n.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t[9]=e[9]+n[9],t[10]=e[10]+n[10],t[11]=e[11]+n[11],t[12]=e[12]+n[12],t[13]=e[13]+n[13],t[14]=e[14]+n[14],t[15]=e[15]+n[15],t},n.subtract=o,n.multiplyScalar=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t[9]=e[9]*n,t[10]=e[10]*n,t[11]=e[11]*n,t[12]=e[12]*n,t[13]=e[13]*n,t[14]=e[14]*n,t[15]=e[15]*n,t},n.multiplyScalarAndAdd=function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t[6]=e[6]+n[6]*r,t[7]=e[7]+n[7]*r,t[8]=e[8]+n[8]*r,t[9]=e[9]+n[9]*r,t[10]=e[10]+n[10]*r,t[11]=e[11]+n[11]*r,t[12]=e[12]+n[12]*r,t[13]=e[13]+n[13]*r,t[14]=e[14]+n[14]*r,t[15]=e[15]+n[15]*r,t},n.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]},n.equals=function(t,e){var n=t[0],r=t[1],o=t[2],a=t[3],i=t[4],u=t[5],s=t[6],c=t[7],f=t[8],l=t[9],h=t[10],_=t[11],m=t[12],d=t[13],p=t[14],v=t[15],g=e[0],y=e[1],b=e[2],M=e[3],x=e[4],w=e[5],P=e[6],E=e[7],R=e[8],k=e[9],A=e[10],S=e[11],O=e[12],T=e[13],t=e[14],e=e[15];return Math.abs(n-g)<=F.EPSILON*Math.max(1,Math.abs(n),Math.abs(g))&&Math.abs(r-y)<=F.EPSILON*Math.max(1,Math.abs(r),Math.abs(y))&&Math.abs(o-b)<=F.EPSILON*Math.max(1,Math.abs(o),Math.abs(b))&&Math.abs(a-M)<=F.EPSILON*Math.max(1,Math.abs(a),Math.abs(M))&&Math.abs(i-x)<=F.EPSILON*Math.max(1,Math.abs(i),Math.abs(x))&&Math.abs(u-w)<=F.EPSILON*Math.max(1,Math.abs(u),Math.abs(w))&&Math.abs(s-P)<=F.EPSILON*Math.max(1,Math.abs(s),Math.abs(P))&&Math.abs(c-E)<=F.EPSILON*Math.max(1,Math.abs(c),Math.abs(E))&&Math.abs(f-R)<=F.EPSILON*Math.max(1,Math.abs(f),Math.abs(R))&&Math.abs(l-k)<=F.EPSILON*Math.max(1,Math.abs(l),Math.abs(k))&&Math.abs(h-A)<=F.EPSILON*Math.max(1,Math.abs(h),Math.abs(A))&&Math.abs(_-S)<=F.EPSILON*Math.max(1,Math.abs(_),Math.abs(S))&&Math.abs(m-O)<=F.EPSILON*Math.max(1,Math.abs(m),Math.abs(O))&&Math.abs(d-T)<=F.EPSILON*Math.max(1,Math.abs(d),Math.abs(T))&&Math.abs(p-t)<=F.EPSILON*Math.max(1,Math.abs(p),Math.abs(t))&&Math.abs(v-e)<=F.EPSILON*Math.max(1,Math.abs(v),Math.abs(e))},n.sub=n.mul=void 0;var F=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==i(t)&&"function"!=typeof t)return{default:t};var e=u();if(e&&e.has(t))return e.get(t);var n,r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in t){var a;Object.prototype.hasOwnProperty.call(t,n)&&((a=o?Object.getOwnPropertyDescriptor(t,n):null)&&(a.get||a.set)?Object.defineProperty(r,n,a):r[n]=t[n])}r.default=t,e&&e.set(t,r);return r}(t("./common.js"));function u(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return u=function(){return t},t}function m(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function r(t,e,n){var r=e[0],o=e[1],a=e[2],i=e[3],u=e[4],s=e[5],c=e[6],f=e[7],l=e[8],h=e[9],_=e[10],m=e[11],d=e[12],p=e[13],v=e[14],g=e[15],y=n[0],b=n[1],M=n[2],e=n[3];return t[0]=y*r+b*u+M*l+e*d,t[1]=y*o+b*s+M*h+e*p,t[2]=y*a+b*c+M*_+e*v,t[3]=y*i+b*f+M*m+e*g,y=n[4],b=n[5],M=n[6],e=n[7],t[4]=y*r+b*u+M*l+e*d,t[5]=y*o+b*s+M*h+e*p,t[6]=y*a+b*c+M*_+e*v,t[7]=y*i+b*f+M*m+e*g,y=n[8],b=n[9],M=n[10],e=n[11],t[8]=y*r+b*u+M*l+e*d,t[9]=y*o+b*s+M*h+e*p,t[10]=y*a+b*c+M*_+e*v,t[11]=y*i+b*f+M*m+e*g,y=n[12],b=n[13],M=n[14],e=n[15],t[12]=y*r+b*u+M*l+e*d,t[13]=y*o+b*s+M*h+e*p,t[14]=y*a+b*c+M*_+e*v,t[15]=y*i+b*f+M*m+e*g,t}function h(t,e,n){var r=e[0],o=e[1],a=e[2],i=e[3],u=r+r,s=o+o,c=a+a,f=r*u,l=r*s,e=r*c,r=o*s,o=o*c,a=a*c,u=i*u,s=i*s,c=i*c;return t[0]=1-(r+a),t[1]=l+c,t[2]=e-s,t[3]=0,t[4]=l-c,t[5]=1-(f+a),t[6]=o+u,t[7]=0,t[8]=e+s,t[9]=o-u,t[10]=1-(f+r),t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function _(t,e){var n=e[0],r=e[1],o=e[2],a=e[4],i=e[5],u=e[6],s=e[8],c=e[9],e=e[10];return t[0]=Math.hypot(n,r,o),t[1]=Math.hypot(a,i,u),t[2]=Math.hypot(s,c,e),t}function o(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t[9]=e[9]-n[9],t[10]=e[10]-n[10],t[11]=e[11]-n[11],t[12]=e[12]-n[12],t[13]=e[13]-n[13],t[14]=e[14]-n[14],t[15]=e[15]-n[15],t}n.mul=r,n.sub=o},{"./common.js":2}],8:[function(t,e,n){"use strict";function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(n,"__esModule",{value:!0}),n.create=c,n.identity=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},n.setAxisAngle=f,n.getAxisAngle=function(t,e){var n=2*Math.acos(e[3]),r=Math.sin(n/2);r>_.EPSILON?(t[0]=e[0]/r,t[1]=e[1]/r,t[2]=e[2]/r):(t[0]=1,t[1]=0,t[2]=0);return n},n.getAngle=function(t,e){e=g(t,e);return Math.acos(2*e*e-1)},n.multiply=l,n.rotateX=function(t,e,n){n*=.5;var r=e[0],o=e[1],a=e[2],i=e[3],e=Math.sin(n),n=Math.cos(n);return t[0]=r*n+i*e,t[1]=o*n+a*e,t[2]=a*n-o*e,t[3]=i*n-r*e,t},n.rotateY=function(t,e,n){n*=.5;var r=e[0],o=e[1],a=e[2],i=e[3],e=Math.sin(n),n=Math.cos(n);return t[0]=r*n-a*e,t[1]=o*n+i*e,t[2]=a*n+r*e,t[3]=i*n-o*e,t},n.rotateZ=function(t,e,n){n*=.5;var r=e[0],o=e[1],a=e[2],i=e[3],e=Math.sin(n),n=Math.cos(n);return t[0]=r*n+o*e,t[1]=o*n-r*e,t[2]=a*n+i*e,t[3]=i*n-a*e,t},n.calculateW=function(t,e){var n=e[0],r=e[1],e=e[2];return t[0]=n,t[1]=r,t[2]=e,t[3]=Math.sqrt(Math.abs(1-n*n-r*r-e*e)),t},n.exp=h,n.ln=m,n.pow=function(t,e,n){return m(t,e),v(t,t,n),h(t,t),t},n.slerp=d,n.random=function(t){var e=_.RANDOM(),n=_.RANDOM(),r=_.RANDOM(),o=Math.sqrt(1-e),e=Math.sqrt(e);return t[0]=o*Math.sin(2*Math.PI*n),t[1]=o*Math.cos(2*Math.PI*n),t[2]=e*Math.sin(2*Math.PI*r),t[3]=e*Math.cos(2*Math.PI*r),t},n.invert=function(t,e){var n=e[0],r=e[1],o=e[2],a=e[3],e=n*n+r*r+o*o+a*a,e=e?1/e:0;return t[0]=-n*e,t[1]=-r*e,t[2]=-o*e,t[3]=a*e,t},n.conjugate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t},n.fromMat3=p,n.fromEuler=function(t,e,n,r){var o=.5*Math.PI/180;e*=o,n*=o,r*=o;var a=Math.sin(e),i=Math.cos(e),o=Math.sin(n),e=Math.cos(n),n=Math.sin(r),r=Math.cos(r);return t[0]=a*e*r-i*o*n,t[1]=i*o*r+a*e*n,t[2]=i*e*n-a*o*r,t[3]=i*e*r+a*o*n,t},n.str=function(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},n.setAxes=n.sqlerp=n.rotationTo=n.equals=n.exactEquals=n.normalize=n.sqrLen=n.squaredLength=n.len=n.length=n.lerp=n.dot=n.scale=n.mul=n.add=n.set=n.copy=n.fromValues=n.clone=void 0;var _=s(t("./common.js")),r=s(t("./mat3.js")),o=s(t("./vec3.js")),a=s(t("./vec4.js"));function u(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return u=function(){return t},t}function s(t){if(t&&t.__esModule)return t;if(null===t||"object"!==i(t)&&"function"!=typeof t)return{default:t};var e=u();if(e&&e.has(t))return e.get(t);var n,r,o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in t)Object.prototype.hasOwnProperty.call(t,n)&&((r=a?Object.getOwnPropertyDescriptor(t,n):null)&&(r.get||r.set)?Object.defineProperty(o,n,r):o[n]=t[n]);return o.default=t,e&&e.set(t,o),o}function c(){var t=new _.ARRAY_TYPE(4);return _.ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function f(t,e,n){n*=.5;var r=Math.sin(n);return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=Math.cos(n),t}function l(t,e,n){var r=e[0],o=e[1],a=e[2],i=e[3],u=n[0],s=n[1],e=n[2],n=n[3];return t[0]=r*n+i*u+o*e-a*s,t[1]=o*n+i*s+a*u-r*e,t[2]=a*n+i*e+r*s-o*u,t[3]=i*n-r*u-o*s-a*e,t}function h(t,e){var n=e[0],r=e[1],o=e[2],a=e[3],i=Math.sqrt(n*n+r*r+o*o),e=Math.exp(a),a=0<i?e*Math.sin(i)/i:0;return t[0]=n*a,t[1]=r*a,t[2]=o*a,t[3]=e*Math.cos(i),t}function m(t,e){var n=e[0],r=e[1],o=e[2],a=e[3],e=Math.sqrt(n*n+r*r+o*o),e=0<e?Math.atan2(e,a)/e:0;return t[0]=n*e,t[1]=r*e,t[2]=o*e,t[3]=.5*Math.log(n*n+r*r+o*o+a*a),t}function d(t,e,n,r){var o,a=e[0],i=e[1],u=e[2],s=e[3],c=n[0],f=n[1],l=n[2],h=n[3],e=a*c+i*f+u*l+s*h;return e<0&&(e=-e,c=-c,f=-f,l=-l,h=-h),r=1-e>_.EPSILON?(n=Math.acos(e),e=Math.sin(n),o=Math.sin((1-r)*n)/e,Math.sin(r*n)/e):(o=1-r,r),t[0]=o*a+r*c,t[1]=o*i+r*f,t[2]=o*u+r*l,t[3]=o*s+r*h,t}function p(t,e){var n,r,o,a=e[0]+e[4]+e[8];return 0<a?(o=Math.sqrt(a+1),t[3]=.5*o,t[0]=(e[5]-e[7])*(o=.5/o),t[1]=(e[6]-e[2])*o,t[2]=(e[1]-e[3])*o):(e[4]>e[n=0]&&(n=1),r=((n=e[8]>e[3*n+n]?2:n)+1)%3,a=(n+2)%3,o=Math.sqrt(e[3*n+n]-e[3*r+r]-e[3*a+a]+1),t[n]=.5*o,t[3]=(e[3*r+a]-e[3*a+r])*(o=.5/o),t[r]=(e[3*r+n]+e[3*n+r])*o,t[a]=(e[3*a+n]+e[3*n+a])*o),t}t=a.clone;n.clone=t;t=a.fromValues;n.fromValues=t;t=a.copy;n.copy=t;t=a.set;n.set=t;t=a.add;n.add=t,n.mul=l;var v=a.scale;n.scale=v;var g=a.dot;n.dot=g;t=a.lerp;n.lerp=t;t=a.length;n.length=t,n.len=t;t=a.squaredLength;n.squaredLength=t,n.sqrLen=t;var y=a.normalize;n.normalize=y;t=a.exactEquals;n.exactEquals=t;a=a.equals;n.equals=a;var b,M,x,a=(b=o.create(),M=o.fromValues(1,0,0),x=o.fromValues(0,1,0),function(t,e,n){var r=o.dot(e,n);return r<-.999999?(o.cross(b,M,e),o.len(b)<1e-6&&o.cross(b,x,e),o.normalize(b,b),f(t,b,Math.PI),t):.999999<r?(t[0]=0,t[1]=0,t[2]=0,t[3]=1,t):(o.cross(b,e,n),t[0]=b[0],t[1]=b[1],t[2]=b[2],t[3]=1+r,y(t,t))});n.rotationTo=a;var w,P,a=(w=c(),P=c(),function(t,e,n,r,o,a){return d(w,e,o,a),d(P,n,r,a),d(t,w,P,2*a*(1-a)),t});n.sqlerp=a;var E,r=(E=r.create(),function(t,e,n,r){return E[0]=n[0],E[3]=n[1],E[6]=n[2],E[1]=r[0],E[4]=r[1],E[7]=r[2],E[2]=-e[0],E[5]=-e[1],E[8]=-e[2],y(t,p(t,E))});n.setAxes=r},{"./common.js":2,"./mat3.js":6,"./vec3.js":11,"./vec4.js":12}],9:[function(t,e,n){"use strict";function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(n,"__esModule",{value:!0}),n.create=function(){var t=new p.ARRAY_TYPE(8);p.ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[4]=0,t[5]=0,t[6]=0,t[7]=0);return t[3]=1,t},n.clone=function(t){var e=new p.ARRAY_TYPE(8);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e},n.fromValues=function(t,e,n,r,o,a,i,u){var s=new p.ARRAY_TYPE(8);return s[0]=t,s[1]=e,s[2]=n,s[3]=r,s[4]=o,s[5]=a,s[6]=i,s[7]=u,s},n.fromRotationTranslationValues=function(t,e,n,r,o,a,i){var u=new p.ARRAY_TYPE(8);u[0]=t,u[1]=e,u[2]=n,u[3]=r;o*=.5,a*=.5,i*=.5;return u[4]=o*r+a*n-i*e,u[5]=a*r+i*t-o*n,u[6]=i*r+o*e-a*t,u[7]=-o*t-a*e-i*n,u},n.fromRotationTranslation=a,n.fromTranslation=function(t,e){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=.5*e[0],t[5]=.5*e[1],t[6]=.5*e[2],t[7]=0,t},n.fromRotation=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=0,t[5]=0,t[6]=0,t[7]=0,t},n.fromMat4=function(t,e){var n=m.create();o.getRotation(n,e);var r=new p.ARRAY_TYPE(3);return o.getTranslation(r,e),a(t,n,r),t},n.copy=f,n.identity=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t[6]=0,t[7]=0,t},n.set=function(t,e,n,r,o,a,i,u,s){return t[0]=e,t[1]=n,t[2]=r,t[3]=o,t[4]=a,t[5]=i,t[6]=u,t[7]=s,t},n.getDual=function(t,e){return t[0]=e[4],t[1]=e[5],t[2]=e[6],t[3]=e[7],t},n.setDual=function(t,e){return t[4]=e[0],t[5]=e[1],t[6]=e[2],t[7]=e[3],t},n.getTranslation=function(t,e){var n=e[4],r=e[5],o=e[6],a=e[7],i=-e[0],u=-e[1],s=-e[2],e=e[3];return t[0]=2*(n*e+a*i+r*s-o*u),t[1]=2*(r*e+a*u+o*i-n*s),t[2]=2*(o*e+a*s+n*u-r*i),t},n.translate=function(t,e,n){var r=e[0],o=e[1],a=e[2],i=e[3],u=.5*n[0],s=.5*n[1],c=.5*n[2],f=e[4],l=e[5],n=e[6],e=e[7];return t[0]=r,t[1]=o,t[2]=a,t[3]=i,t[4]=i*u+o*c-a*s+f,t[5]=i*s+a*u-r*c+l,t[6]=i*c+r*s-o*u+n,t[7]=-r*u-o*s-a*c+e,t},n.rotateX=function(t,e,n){var r=-e[0],o=-e[1],a=-e[2],i=e[3],u=e[4],s=e[5],c=e[6],f=e[7],l=u*i+f*r+s*a-c*o,h=s*i+f*o+c*r-u*a,_=c*i+f*a+u*o-s*r,c=f*i-u*r-s*o-c*a;return m.rotateX(t,e,n),r=t[0],o=t[1],a=t[2],i=t[3],t[4]=l*i+c*r+h*a-_*o,t[5]=h*i+c*o+_*r-l*a,t[6]=_*i+c*a+l*o-h*r,t[7]=c*i-l*r-h*o-_*a,t},n.rotateY=function(t,e,n){var r=-e[0],o=-e[1],a=-e[2],i=e[3],u=e[4],s=e[5],c=e[6],f=e[7],l=u*i+f*r+s*a-c*o,h=s*i+f*o+c*r-u*a,_=c*i+f*a+u*o-s*r,c=f*i-u*r-s*o-c*a;return m.rotateY(t,e,n),r=t[0],o=t[1],a=t[2],i=t[3],t[4]=l*i+c*r+h*a-_*o,t[5]=h*i+c*o+_*r-l*a,t[6]=_*i+c*a+l*o-h*r,t[7]=c*i-l*r-h*o-_*a,t},n.rotateZ=function(t,e,n){var r=-e[0],o=-e[1],a=-e[2],i=e[3],u=e[4],s=e[5],c=e[6],f=e[7],l=u*i+f*r+s*a-c*o,h=s*i+f*o+c*r-u*a,_=c*i+f*a+u*o-s*r,c=f*i-u*r-s*o-c*a;return m.rotateZ(t,e,n),r=t[0],o=t[1],a=t[2],i=t[3],t[4]=l*i+c*r+h*a-_*o,t[5]=h*i+c*o+_*r-l*a,t[6]=_*i+c*a+l*o-h*r,t[7]=c*i-l*r-h*o-_*a,t},n.rotateByQuatAppend=function(t,e,n){var r=n[0],o=n[1],a=n[2],i=n[3],u=e[0],s=e[1],c=e[2],n=e[3];return t[0]=u*i+n*r+s*a-c*o,t[1]=s*i+n*o+c*r-u*a,t[2]=c*i+n*a+u*o-s*r,t[3]=n*i-u*r-s*o-c*a,u=e[4],s=e[5],c=e[6],n=e[7],t[4]=u*i+n*r+s*a-c*o,t[5]=s*i+n*o+c*r-u*a,t[6]=c*i+n*a+u*o-s*r,t[7]=n*i-u*r-s*o-c*a,t},n.rotateByQuatPrepend=function(t,e,n){var r=e[0],o=e[1],a=e[2],i=e[3],u=n[0],s=n[1],c=n[2],e=n[3];return t[0]=r*e+i*u+o*c-a*s,t[1]=o*e+i*s+a*u-r*c,t[2]=a*e+i*c+r*s-o*u,t[3]=i*e-r*u-o*s-a*c,u=n[4],s=n[5],c=n[6],e=n[7],t[4]=r*e+i*u+o*c-a*s,t[5]=o*e+i*s+a*u-r*c,t[6]=a*e+i*c+r*s-o*u,t[7]=i*e-r*u-o*s-a*c,t},n.rotateAroundAxis=function(t,e,n,r){if(Math.abs(r)<p.EPSILON)return f(t,e);var o=Math.hypot(n[0],n[1],n[2]);r*=.5;var a=Math.sin(r),i=a*n[0]/o,u=a*n[1]/o,s=a*n[2]/o,c=Math.cos(r),a=e[0],n=e[1],o=e[2],r=e[3];t[0]=a*c+r*i+n*s-o*u,t[1]=n*c+r*u+o*i-a*s,t[2]=o*c+r*s+a*u-n*i,t[3]=r*c-a*i-n*u-o*s;a=e[4],n=e[5],o=e[6],e=e[7];return t[4]=a*c+e*i+n*s-o*u,t[5]=n*c+e*u+o*i-a*s,t[6]=o*c+e*s+a*u-n*i,t[7]=e*c-a*i-n*u-o*s,t},n.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t},n.multiply=s,n.scale=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t},n.lerp=function(t,e,n,r){var o=1-r;c(e,n)<0&&(r=-r);return t[0]=e[0]*o+n[0]*r,t[1]=e[1]*o+n[1]*r,t[2]=e[2]*o+n[2]*r,t[3]=e[3]*o+n[3]*r,t[4]=e[4]*o+n[4]*r,t[5]=e[5]*o+n[5]*r,t[6]=e[6]*o+n[6]*r,t[7]=e[7]*o+n[7]*r,t},n.invert=function(t,e){var n=l(e);return t[0]=-e[0]/n,t[1]=-e[1]/n,t[2]=-e[2]/n,t[3]=e[3]/n,t[4]=-e[4]/n,t[5]=-e[5]/n,t[6]=-e[6]/n,t[7]=e[7]/n,t},n.conjugate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t[4]=-e[4],t[5]=-e[5],t[6]=-e[6],t[7]=e[7],t},n.normalize=function(t,e){var n=l(e);{var r,o,a,i,u,s,c,f;0<n&&(n=Math.sqrt(n),r=e[0]/n,o=e[1]/n,a=e[2]/n,i=e[3]/n,u=e[4],s=e[5],c=e[6],f=e[7],e=r*u+o*s+a*c+i*f,t[0]=r,t[1]=o,t[2]=a,t[3]=i,t[4]=(u-r*e)/n,t[5]=(s-o*e)/n,t[6]=(c-a*e)/n,t[7]=(f-i*e)/n)}return t},n.str=function(t){return"quat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+")"},n.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]},n.equals=function(t,e){var n=t[0],r=t[1],o=t[2],a=t[3],i=t[4],u=t[5],s=t[6],c=t[7],f=e[0],l=e[1],h=e[2],_=e[3],m=e[4],d=e[5],t=e[6],e=e[7];return Math.abs(n-f)<=p.EPSILON*Math.max(1,Math.abs(n),Math.abs(f))&&Math.abs(r-l)<=p.EPSILON*Math.max(1,Math.abs(r),Math.abs(l))&&Math.abs(o-h)<=p.EPSILON*Math.max(1,Math.abs(o),Math.abs(h))&&Math.abs(a-_)<=p.EPSILON*Math.max(1,Math.abs(a),Math.abs(_))&&Math.abs(i-m)<=p.EPSILON*Math.max(1,Math.abs(i),Math.abs(m))&&Math.abs(u-d)<=p.EPSILON*Math.max(1,Math.abs(u),Math.abs(d))&&Math.abs(s-t)<=p.EPSILON*Math.max(1,Math.abs(s),Math.abs(t))&&Math.abs(c-e)<=p.EPSILON*Math.max(1,Math.abs(c),Math.abs(e))},n.sqrLen=n.squaredLength=n.len=n.length=n.dot=n.mul=n.setReal=n.getReal=void 0;var p=r(t("./common.js")),m=r(t("./quat.js")),o=r(t("./mat4.js"));function u(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return u=function(){return t},t}function r(t){if(t&&t.__esModule)return t;if(null===t||"object"!==i(t)&&"function"!=typeof t)return{default:t};var e=u();if(e&&e.has(t))return e.get(t);var n,r,o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in t)Object.prototype.hasOwnProperty.call(t,n)&&((r=a?Object.getOwnPropertyDescriptor(t,n):null)&&(r.get||r.set)?Object.defineProperty(o,n,r):o[n]=t[n]);return o.default=t,e&&e.set(t,o),o}function a(t,e,n){var r=.5*n[0],o=.5*n[1],a=.5*n[2],i=e[0],u=e[1],n=e[2],e=e[3];return t[0]=i,t[1]=u,t[2]=n,t[3]=e,t[4]=r*e+o*n-a*u,t[5]=o*e+a*i-r*n,t[6]=a*e+r*u-o*i,t[7]=-r*i-o*u-a*n,t}function f(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t}t=m.copy;n.getReal=t;t=m.copy;function s(t,e,n){var r=e[0],o=e[1],a=e[2],i=e[3],u=n[4],s=n[5],c=n[6],f=n[7],l=e[4],h=e[5],_=e[6],m=e[7],d=n[0],p=n[1],e=n[2],n=n[3];return t[0]=r*n+i*d+o*e-a*p,t[1]=o*n+i*p+a*d-r*e,t[2]=a*n+i*e+r*p-o*d,t[3]=i*n-r*d-o*p-a*e,t[4]=r*f+i*u+o*c-a*s+l*n+m*d+h*e-_*p,t[5]=o*f+i*s+a*u-r*c+h*n+m*p+_*d-l*e,t[6]=a*f+i*c+r*s-o*u+_*n+m*e+l*p-h*d,t[7]=i*f-r*u-o*s-a*c+m*n-l*d-h*p-_*e,t}n.setReal=t,n.mul=s;var c=m.dot;n.dot=c;t=m.length;n.length=t,n.len=t;var l=m.squaredLength;n.squaredLength=l,n.sqrLen=l},{"./common.js":2,"./mat4.js":7,"./quat.js":8}],10:[function(t,e,n){"use strict";function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(n,"__esModule",{value:!0}),n.create=r,n.clone=function(t){var e=new o.ARRAY_TYPE(2);return e[0]=t[0],e[1]=t[1],e},n.fromValues=function(t,e){var n=new o.ARRAY_TYPE(2);return n[0]=t,n[1]=e,n},n.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t},n.set=function(t,e,n){return t[0]=e,t[1]=n,t},n.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t},n.subtract=a,n.multiply=s,n.divide=c,n.ceil=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t},n.floor=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t},n.min=function(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t},n.max=function(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t},n.round=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t},n.scale=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t},n.scaleAndAdd=function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t},n.distance=f,n.squaredDistance=l,n.length=h,n.squaredLength=_,n.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t},n.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t},n.normalize=function(t,e){var n=e[0],r=e[1],r=n*n+r*r;0<r&&(r=1/Math.sqrt(r));return t[0]=e[0]*r,t[1]=e[1]*r,t},n.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]},n.cross=function(t,e,n){n=e[0]*n[1]-e[1]*n[0];return t[0]=t[1]=0,t[2]=n,t},n.lerp=function(t,e,n,r){var o=e[0],e=e[1];return t[0]=o+r*(n[0]-o),t[1]=e+r*(n[1]-e),t},n.random=function(t,e){e=e||1;var n=2*o.RANDOM()*Math.PI;return t[0]=Math.cos(n)*e,t[1]=Math.sin(n)*e,t},n.transformMat2=function(t,e,n){var r=e[0],e=e[1];return t[0]=n[0]*r+n[2]*e,t[1]=n[1]*r+n[3]*e,t},n.transformMat2d=function(t,e,n){var r=e[0],e=e[1];return t[0]=n[0]*r+n[2]*e+n[4],t[1]=n[1]*r+n[3]*e+n[5],t},n.transformMat3=function(t,e,n){var r=e[0],e=e[1];return t[0]=n[0]*r+n[3]*e+n[6],t[1]=n[1]*r+n[4]*e+n[7],t},n.transformMat4=function(t,e,n){var r=e[0],e=e[1];return t[0]=n[0]*r+n[4]*e+n[12],t[1]=n[1]*r+n[5]*e+n[13],t},n.rotate=function(t,e,n,r){var o=e[0]-n[0],a=e[1]-n[1],e=Math.sin(r),r=Math.cos(r);return t[0]=o*r-a*e+n[0],t[1]=o*e+a*r+n[1],t},n.angle=function(t,e){var n=t[0],r=t[1],o=e[0],t=e[1],e=Math.sqrt(n*n+r*r)*Math.sqrt(o*o+t*t),e=e&&(n*o+r*t)/e;return Math.acos(Math.min(Math.max(e,-1),1))},n.zero=function(t){return t[0]=0,t[1]=0,t},n.str=function(t){return"vec2("+t[0]+", "+t[1]+")"},n.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]},n.equals=function(t,e){var n=t[0],r=t[1],t=e[0],e=e[1];return Math.abs(n-t)<=o.EPSILON*Math.max(1,Math.abs(n),Math.abs(t))&&Math.abs(r-e)<=o.EPSILON*Math.max(1,Math.abs(r),Math.abs(e))},n.forEach=n.sqrLen=n.sqrDist=n.dist=n.div=n.mul=n.sub=n.len=void 0;var o=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==i(t)&&"function"!=typeof t)return{default:t};var e=u();if(e&&e.has(t))return e.get(t);var n,r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in t){var a;Object.prototype.hasOwnProperty.call(t,n)&&((a=o?Object.getOwnPropertyDescriptor(t,n):null)&&(a.get||a.set)?Object.defineProperty(r,n,a):r[n]=t[n])}r.default=t,e&&e.set(t,r);return r}(t("./common.js"));function u(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return u=function(){return t},t}function r(){var t=new o.ARRAY_TYPE(2);return o.ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0),t}function a(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t}function s(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t}function c(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t}function f(t,e){var n=e[0]-t[0],t=e[1]-t[1];return Math.hypot(n,t)}function l(t,e){var n=e[0]-t[0],t=e[1]-t[1];return n*n+t*t}function h(t){var e=t[0],t=t[1];return Math.hypot(e,t)}function _(t){var e=t[0],t=t[1];return e*e+t*t}n.len=h,n.sub=a,n.mul=s,n.div=c,n.dist=f,n.sqrDist=l,n.sqrLen=_;var m,t=(m=r(),function(t,e,n,r,o,a){var i,u;for(e=e||2,n=n||0,u=r?Math.min(r*e+n,t.length):t.length,i=n;i<u;i+=e)m[0]=t[i],m[1]=t[i+1],o(m,m,a),t[i]=m[0],t[i+1]=m[1];return t});n.forEach=t},{"./common.js":2}],11:[function(t,e,n){"use strict";function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(n,"__esModule",{value:!0}),n.create=r,n.clone=function(t){var e=new u.ARRAY_TYPE(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},n.length=o,n.fromValues=function(t,e,n){var r=new u.ARRAY_TYPE(3);return r[0]=t,r[1]=e,r[2]=n,r},n.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},n.set=function(t,e,n,r){return t[0]=e,t[1]=n,t[2]=r,t},n.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t},n.subtract=a,n.multiply=c,n.divide=f,n.ceil=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t},n.floor=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t},n.min=function(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t},n.max=function(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t},n.round=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t},n.scale=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t},n.scaleAndAdd=function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t},n.distance=l,n.squaredDistance=h,n.squaredLength=_,n.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t},n.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t},n.normalize=function(t,e){var n=e[0],r=e[1],o=e[2],o=n*n+r*r+o*o;0<o&&(o=1/Math.sqrt(o));return t[0]=e[0]*o,t[1]=e[1]*o,t[2]=e[2]*o,t},n.dot=m,n.cross=function(t,e,n){var r=e[0],o=e[1],a=e[2],i=n[0],e=n[1],n=n[2];return t[0]=o*n-a*e,t[1]=a*i-r*n,t[2]=r*e-o*i,t},n.lerp=function(t,e,n,r){var o=e[0],a=e[1],e=e[2];return t[0]=o+r*(n[0]-o),t[1]=a+r*(n[1]-a),t[2]=e+r*(n[2]-e),t},n.hermite=function(t,e,n,r,o,a){var i=a*a,u=i*(2*a-3)+1,s=i*(a-2)+a,c=i*(a-1),a=i*(3-2*a);return t[0]=e[0]*u+n[0]*s+r[0]*c+o[0]*a,t[1]=e[1]*u+n[1]*s+r[1]*c+o[1]*a,t[2]=e[2]*u+n[2]*s+r[2]*c+o[2]*a,t},n.bezier=function(t,e,n,r,o,a){var i=1-a,u=i*i,s=a*a,c=u*i,u=3*a*u,i=3*s*i,a=s*a;return t[0]=e[0]*c+n[0]*u+r[0]*i+o[0]*a,t[1]=e[1]*c+n[1]*u+r[1]*i+o[1]*a,t[2]=e[2]*c+n[2]*u+r[2]*i+o[2]*a,t},n.random=function(t,e){e=e||1;var n=2*u.RANDOM()*Math.PI,r=2*u.RANDOM()-1,o=Math.sqrt(1-r*r)*e;return t[0]=Math.cos(n)*o,t[1]=Math.sin(n)*o,t[2]=r*e,t},n.transformMat4=function(t,e,n){var r=e[0],o=e[1],a=e[2],e=n[3]*r+n[7]*o+n[11]*a+n[15];return e=e||1,t[0]=(n[0]*r+n[4]*o+n[8]*a+n[12])/e,t[1]=(n[1]*r+n[5]*o+n[9]*a+n[13])/e,t[2]=(n[2]*r+n[6]*o+n[10]*a+n[14])/e,t},n.transformMat3=function(t,e,n){var r=e[0],o=e[1],e=e[2];return t[0]=r*n[0]+o*n[3]+e*n[6],t[1]=r*n[1]+o*n[4]+e*n[7],t[2]=r*n[2]+o*n[5]+e*n[8],t},n.transformQuat=function(t,e,n){var r=n[0],o=n[1],a=n[2],i=n[3],u=e[0],s=e[1],c=e[2],f=o*c-a*s,l=a*u-r*c,n=r*s-o*u,e=o*n-a*l,a=a*f-r*n,o=r*l-o*f,i=2*i;return f*=i,l*=i,n*=i,e*=2,a*=2,o*=2,t[0]=u+f+e,t[1]=s+l+a,t[2]=c+n+o,t},n.rotateX=function(t,e,n,r){var o=[],a=[];return o[0]=e[0]-n[0],o[1]=e[1]-n[1],o[2]=e[2]-n[2],a[0]=o[0],a[1]=o[1]*Math.cos(r)-o[2]*Math.sin(r),a[2]=o[1]*Math.sin(r)+o[2]*Math.cos(r),t[0]=a[0]+n[0],t[1]=a[1]+n[1],t[2]=a[2]+n[2],t},n.rotateY=function(t,e,n,r){var o=[],a=[];return o[0]=e[0]-n[0],o[1]=e[1]-n[1],o[2]=e[2]-n[2],a[0]=o[2]*Math.sin(r)+o[0]*Math.cos(r),a[1]=o[1],a[2]=o[2]*Math.cos(r)-o[0]*Math.sin(r),t[0]=a[0]+n[0],t[1]=a[1]+n[1],t[2]=a[2]+n[2],t},n.rotateZ=function(t,e,n,r){var o=[],a=[];return o[0]=e[0]-n[0],o[1]=e[1]-n[1],o[2]=e[2]-n[2],a[0]=o[0]*Math.cos(r)-o[1]*Math.sin(r),a[1]=o[0]*Math.sin(r)+o[1]*Math.cos(r),a[2]=o[2],t[0]=a[0]+n[0],t[1]=a[1]+n[1],t[2]=a[2]+n[2],t},n.angle=function(t,e){var n=t[0],r=t[1],o=t[2],a=e[0],i=e[1],u=e[2],o=Math.sqrt(n*n+r*r+o*o),u=Math.sqrt(a*a+i*i+u*u),u=o*u,u=u&&m(t,e)/u;return Math.acos(Math.min(Math.max(u,-1),1))},n.zero=function(t){return t[0]=0,t[1]=0,t[2]=0,t},n.str=function(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"},n.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]},n.equals=function(t,e){var n=t[0],r=t[1],o=t[2],a=e[0],t=e[1],e=e[2];return Math.abs(n-a)<=u.EPSILON*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(r-t)<=u.EPSILON*Math.max(1,Math.abs(r),Math.abs(t))&&Math.abs(o-e)<=u.EPSILON*Math.max(1,Math.abs(o),Math.abs(e))},n.forEach=n.sqrLen=n.len=n.sqrDist=n.dist=n.div=n.mul=n.sub=void 0;var u=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==i(t)&&"function"!=typeof t)return{default:t};var e=s();if(e&&e.has(t))return e.get(t);var n,r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in t){var a;Object.prototype.hasOwnProperty.call(t,n)&&((a=o?Object.getOwnPropertyDescriptor(t,n):null)&&(a.get||a.set)?Object.defineProperty(r,n,a):r[n]=t[n])}r.default=t,e&&e.set(t,r);return r}(t("./common.js"));function s(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return s=function(){return t},t}function r(){var t=new u.ARRAY_TYPE(3);return u.ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function o(t){var e=t[0],n=t[1],t=t[2];return Math.hypot(e,n,t)}function a(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t}function c(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t}function f(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t}function l(t,e){var n=e[0]-t[0],r=e[1]-t[1],t=e[2]-t[2];return Math.hypot(n,r,t)}function h(t,e){var n=e[0]-t[0],r=e[1]-t[1],t=e[2]-t[2];return n*n+r*r+t*t}function _(t){var e=t[0],n=t[1],t=t[2];return e*e+n*n+t*t}function m(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}n.sub=a,n.mul=c,n.div=f,n.dist=l,n.sqrDist=h,n.len=o,n.sqrLen=_;var d,t=(d=r(),function(t,e,n,r,o,a){var i,u;for(e=e||3,n=n||0,u=r?Math.min(r*e+n,t.length):t.length,i=n;i<u;i+=e)d[0]=t[i],d[1]=t[i+1],d[2]=t[i+2],o(d,d,a),t[i]=d[0],t[i+1]=d[1],t[i+2]=d[2];return t});n.forEach=t},{"./common.js":2}],12:[function(t,e,n){"use strict";function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(n,"__esModule",{value:!0}),n.create=r,n.clone=function(t){var e=new c.ARRAY_TYPE(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},n.fromValues=function(t,e,n,r){var o=new c.ARRAY_TYPE(4);return o[0]=t,o[1]=e,o[2]=n,o[3]=r,o},n.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},n.set=function(t,e,n,r,o){return t[0]=e,t[1]=n,t[2]=r,t[3]=o,t},n.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t},n.subtract=o,n.multiply=a,n.divide=s,n.ceil=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t[3]=Math.ceil(e[3]),t},n.floor=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t[3]=Math.floor(e[3]),t},n.min=function(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t[3]=Math.min(e[3],n[3]),t},n.max=function(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t[3]=Math.max(e[3],n[3]),t},n.round=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t[3]=Math.round(e[3]),t},n.scale=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t},n.scaleAndAdd=function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t},n.distance=f,n.squaredDistance=l,n.length=h,n.squaredLength=_,n.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t},n.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t},n.normalize=function(t,e){var n=e[0],r=e[1],o=e[2],a=e[3],e=n*n+r*r+o*o+a*a;0<e&&(e=1/Math.sqrt(e));return t[0]=n*e,t[1]=r*e,t[2]=o*e,t[3]=a*e,t},n.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]},n.cross=function(t,e,n,r){var o=n[0]*r[1]-n[1]*r[0],a=n[0]*r[2]-n[2]*r[0],i=n[0]*r[3]-n[3]*r[0],u=n[1]*r[2]-n[2]*r[1],s=n[1]*r[3]-n[3]*r[1],c=n[2]*r[3]-n[3]*r[2],f=e[0],n=e[1],r=e[2],e=e[3];return t[0]=n*c-r*s+e*u,t[1]=-f*c+r*i-e*a,t[2]=f*s-n*i+e*o,t[3]=-f*u+n*a-r*o,t},n.lerp=function(t,e,n,r){var o=e[0],a=e[1],i=e[2],e=e[3];return t[0]=o+r*(n[0]-o),t[1]=a+r*(n[1]-a),t[2]=i+r*(n[2]-i),t[3]=e+r*(n[3]-e),t},n.random=function(t,e){var n,r,o,a,i,u;e=e||1;for(;n=2*c.RANDOM()-1,r=2*c.RANDOM()-1,i=n*n+r*r,1<=i;);for(;o=2*c.RANDOM()-1,a=2*c.RANDOM()-1,u=o*o+a*a,1<=u;);var s=Math.sqrt((1-i)/u);return t[0]=e*n,t[1]=e*r,t[2]=e*o*s,t[3]=e*a*s,t},n.transformMat4=function(t,e,n){var r=e[0],o=e[1],a=e[2],e=e[3];return t[0]=n[0]*r+n[4]*o+n[8]*a+n[12]*e,t[1]=n[1]*r+n[5]*o+n[9]*a+n[13]*e,t[2]=n[2]*r+n[6]*o+n[10]*a+n[14]*e,t[3]=n[3]*r+n[7]*o+n[11]*a+n[15]*e,t},n.transformQuat=function(t,e,n){var r=e[0],o=e[1],a=e[2],i=n[0],u=n[1],s=n[2],c=n[3],f=c*r+u*a-s*o,l=c*o+s*r-i*a,n=c*a+i*o-u*r,a=-i*r-u*o-s*a;return t[0]=f*c+a*-i+l*-s-n*-u,t[1]=l*c+a*-u+n*-i-f*-s,t[2]=n*c+a*-s+f*-u-l*-i,t[3]=e[3],t},n.zero=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t},n.str=function(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},n.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]},n.equals=function(t,e){var n=t[0],r=t[1],o=t[2],a=t[3],i=e[0],u=e[1],t=e[2],e=e[3];return Math.abs(n-i)<=c.EPSILON*Math.max(1,Math.abs(n),Math.abs(i))&&Math.abs(r-u)<=c.EPSILON*Math.max(1,Math.abs(r),Math.abs(u))&&Math.abs(o-t)<=c.EPSILON*Math.max(1,Math.abs(o),Math.abs(t))&&Math.abs(a-e)<=c.EPSILON*Math.max(1,Math.abs(a),Math.abs(e))},n.forEach=n.sqrLen=n.len=n.sqrDist=n.dist=n.div=n.mul=n.sub=void 0;var c=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==i(t)&&"function"!=typeof t)return{default:t};var e=u();if(e&&e.has(t))return e.get(t);var n,r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in t){var a;Object.prototype.hasOwnProperty.call(t,n)&&((a=o?Object.getOwnPropertyDescriptor(t,n):null)&&(a.get||a.set)?Object.defineProperty(r,n,a):r[n]=t[n])}r.default=t,e&&e.set(t,r);return r}(t("./common.js"));function u(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return u=function(){return t},t}function r(){var t=new c.ARRAY_TYPE(4);return c.ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}function o(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t}function a(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t[3]=e[3]*n[3],t}function s(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t[3]=e[3]/n[3],t}function f(t,e){var n=e[0]-t[0],r=e[1]-t[1],o=e[2]-t[2],t=e[3]-t[3];return Math.hypot(n,r,o,t)}function l(t,e){var n=e[0]-t[0],r=e[1]-t[1],o=e[2]-t[2],t=e[3]-t[3];return n*n+r*r+o*o+t*t}function h(t){var e=t[0],n=t[1],r=t[2],t=t[3];return Math.hypot(e,n,r,t)}function _(t){var e=t[0],n=t[1],r=t[2],t=t[3];return e*e+n*n+r*r+t*t}n.sub=o,n.mul=a,n.div=s,n.dist=f,n.sqrDist=l,n.len=h,n.sqrLen=_;var m,t=(m=r(),function(t,e,n,r,o,a){var i,u;for(e=e||4,n=n||0,u=r?Math.min(r*e+n,t.length):t.length,i=n;i<u;i+=e)m[0]=t[i],m[1]=t[i+1],m[2]=t[i+2],m[3]=t[i+3],o(m,m,a),t[i]=m[0],t[i+1]=m[1],t[i+2]=m[2],t[i+3]=m[3];return t});n.forEach=t},{"./common.js":2}],13:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=15},{}],14:[function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,i,u,s){return new(u=u||Promise)(function(n,e){function r(t){try{a(s.next(t))}catch(t){e(t)}}function o(t){try{a(s.throw(t))}catch(t){e(t)}}function a(t){var e;t.done?n(t.value):((e=t.value)instanceof u?e:new u(function(t){t(e)})).then(r,o)}a((s=s.apply(t,i||[])).next())})},o=this&&this.__generator||function(n,r){var o,a,i,u={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},t={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(o)throw new TypeError("Generator is already executing.");for(;u;)try{if(o=1,a&&(i=2&e[0]?a.return:e[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,e[1])).done)return i;switch(a=0,(e=i?[2&e[0],i.value]:e)[0]){case 0:case 1:i=e;break;case 4:return u.label++,{value:e[1],done:!1};case 5:u.label++,a=e[1],e=[0];continue;case 7:e=u.ops.pop(),u.trys.pop();continue;default:if(!(i=0<(i=u.trys).length&&i[i.length-1])&&(6===e[0]||2===e[0])){u=0;continue}if(3===e[0]&&(!i||e[1]>i[0]&&e[1]<i[3])){u.label=e[1];break}if(6===e[0]&&u.label<i[1]){u.label=i[1],i=e;break}if(i&&u.label<i[2]){u.label=i[2],u.ops.push(e);break}i[2]&&u.ops.pop(),u.trys.pop();continue}e=r.call(n,u)}catch(t){e=[6,t],a=0}finally{o=i=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};Object.defineProperty(n,"__esModule",{value:!0});var i=t("../constants"),a=t("./generation/ChunkGenerator"),u=t("./webGLRenderer/WebGLRenderer");t("fpsmeter");s.prototype.init=function(){return r(this,void 0,void 0,function(){return o(this,function(t){switch(t.label){case 0:return[4,this._renderer.init()];case 1:return t.sent(),[2]}})})},s.prototype.start=function(){this.isRunning()||(this._running=!0,this._chunkGenerator.start(),this._tick())},s.prototype.stop=function(){this._running=!1,this._chunkGenerator.stop()},s.prototype.isRunning=function(){return this._running&&!this._error_gcontext},s.prototype._tick=function(){var t=this,e=function(){t._running&&!t._error_gcontext&&(t._main_loop(),window.requestAnimationFrame(e))};e()},s.prototype._main_loop=function(){this._fps_meter.tickStart();var t=this._renderer.getCameraPosition();this._chunkGenerator.update(t),this._renderer.update(this._chunkGenerator.getChunks()),this._renderer.renderScene(this._chunkGenerator.getChunks());var e=[0|Math.floor(t[0]/i.default),0|Math.floor(t[1]/i.default),0|Math.floor(t[2]/i.default)];this._renderer.pushText(o="Coordinates: "+e[0]+"/"+e[1]+"/"+e[2],[0,0],1);var n,r,o,a=this._renderer.getFreeFlyCamera().getTimeImmobile();3<a&&(n=5<a?1:(a-3)/2,(t=this._renderer.getSize())[0]=.75*t[0],r=0,(e=["         *---*         ","         |W/Z|         ","         *---*         ","                       ","   *---* *---* *---*   ","   |A/Q| | S | | D |   ","   *---* *---* *---*   ","","        *----*         ","        | UP |         ","        *----*         ","                       "," *----* *----* *-----* "," |LEFT| |DOWN| |RIGHT| "," *----* *----* *-----* ","","   *---------------*   ","   |MOUSE SUPPORTED|   ","   *---------------*   ","","*---------------------*","|TOUCHSCREEN SUPPORTED|","*---------------------*"]).forEach(function(t){return r=Math.max(r,t.length)}),r*=16*n,a=16*e.length*n,o=e.join("\n"),a=[.5*t[0]-.5*r,.5*t[1]+.5*a],this._renderer.pushText(o,a,n)),this._renderer.renderHUD(this._chunkGenerator.getChunks(),this._chunkGenerator.getProcessingPositions(),this._touches),this._fps_meter.tick()},t=s;function s(){var o=this;this._touches=[];var t=document.getElementById("fpsmeter");if(!t)throw new Error("fpsmeter not found");this._fps_meter=new FPSMeter(t,{theme:"transparent"});var e=document.getElementById("canvasesdiv");if(!e)throw new Error("canvasesdiv not found");t=document.getElementById("main-canvas");if(!t)throw new Error("main-canvas not found");this._renderer=new u.default(e,t),this._chunkGenerator=new a.default({chunk_is_visible:function(t){return o._renderer.chunk_is_visible(t)},point_is_visible:function(t){return o._renderer.point_is_visible(t)},add_geom:function(t){return o._renderer.add_geom(t)},update_geom:function(t,e){return o._renderer.update_geom(t,e)}});t=function(t){for(var e=t.targetTouches,n=o._renderer.getSize(),r=o._touches.length=0;r<e.length;++r)o._touches.push([e[r].pageX,n[1]-e[r].pageY])};e.addEventListener("touchstart",t),e.addEventListener("touchend",t),e.addEventListener("touchmove",t);t=document.getElementById("gui_fullscreen");if(!t)throw new Error("gui_fullscreen not found");t.addEventListener("click",function(){var t=document.getElementById("canvasesdiv");if(!t)throw new Error("canvasesdiv not found");t.requestFullscreen?t.requestFullscreen():t.webkitRequestFullscreen?t.webkitRequestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.msRequestFullscreen&&t.msRequestFullscreen()});t=function(){var t=document.getElementById("canvasesdiv");if(!t)throw new Error("canvasesdiv not found");var e=document.getElementById("main-canvas");if(!t)throw new Error("main-canvas not found");var n=null,r=null,r=document.fullscreen||document.mozFullScreen||document.webkitIsFullScreen||document.msFullscreenElement?(t.style.position="absolute",n=window.innerWidth,window.innerHeight):(t.style.position="relative",n=800,600);t.style.left="0px",t.style.top="0px",e.width=n,e.height=r,o._renderer.resize(n,r)};document.addEventListener("fullscreenchange",t,!1),document.addEventListener("mozfullscreenchange",t,!1),document.addEventListener("webkitfullscreenchange",t,!1),document.addEventListener("msfullscreenchange",t,!1),this._running=!1,this._error_gcontext=!1,this._renderer.set_on_context_lost(function(){console.log("on_context_lost"),o._error_gcontext=!0,o.stop()}),this._renderer.set_on_context_restored(function(){console.log("on_context_restored"),o._error_gcontext=!1,o.start()})}n.default=t},{"../constants":13,"./generation/ChunkGenerator":15,"./webGLRenderer/WebGLRenderer":18,fpsmeter:1}],15:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var f,l=t("../../constants");(t=f=f||{})[t.available=1]="available",t[t.working=2]="working";r.prototype.start=function(){this._running=!0},r.prototype.stop=function(){this._running&&(this._running=!1,this._chunk_queue.length=0,this._chunks.length=0,this._geoms.length=0)},r.prototype.update=function(t){if(this._running){this._camera_pos=t;t=[0|Math.floor(t[0]/l.default),0|Math.floor(t[1]/l.default),0|Math.floor(t[2]/l.default)];if(0==this._chunks.length||t[0]!=this._saved_index[0]||t[1]!=this._saved_index[1]||t[2]!=this._saved_index[2]){this._saved_index[0]=t[0],this._saved_index[1]=t[1],this._saved_index[2]=t[2],this._chunk_queue.length=0;for(var e=[Math.floor(t[0]-3),Math.floor(t[1]-3),Math.floor(t[2]-3)],n=[Math.floor(t[0]+3),Math.floor(t[1]+3),Math.floor(t[2]+3)],r=0;r<this._chunks.length;++r){var o=[this._chunks[r].position[0]/l.default|0,this._chunks[r].position[1]/l.default|0,this._chunks[r].position[2]/l.default|0];(o[0]<e[0]||n[0]<o[0]||o[1]<e[1]||n[1]<o[1]||o[2]<e[2]||n[2]<o[2])&&(this._geoms.push(this._chunks[r].geometry),this._chunks.splice(r,1),--r)}for(var a=e[2];a<=n[2];++a)for(var i=e[1];i<=n[1];++i)for(var u=e[0];u<=n[0];++u){for(var s=[u*l.default,i*l.default,a*l.default],c=!1,f=0;f<this._chunks.length;++f)if(this._chunks[f].position[0]===s[0]&&this._chunks[f].position[1]===s[1]&&this._chunks[f].position[2]===s[2]){c=!0;break}c||this._chunk_queue.push(s)}this._launchWorker()}}},r.prototype._launchWorker=function(){var t=this._workers.find(function(t){return t.status==f.available});if(void 0!==t&&0!=this._chunk_queue.length){var e,n,r,o=void 0;if(1==this._chunk_queue.length)o=this._chunk_queue.pop();else{for(var a=-1,i=9999,u=void 0,s=0;s<this._chunk_queue.length;++s){var c=this._chunk_queue[s];-1!=a&&!this._def.chunk_is_visible(c)||(e=this._camera_pos[0]-c[0]-l.default/2,n=this._camera_pos[1]-c[1]-l.default/2,r=this._camera_pos[2]-c[2]-l.default/2,i<(c=Math.sqrt(e*e+n*n+r*r))||(i=c,u=this._chunk_queue[a=s]))}this._chunk_queue.splice(a,1),o=u}void 0!==o&&(this._processing_pos.push(o),t.status=f.working,t.instance.postMessage({position:o,float32buffer:t.float32buffer},[t.float32buffer.buffer]))}},r.prototype.getChunks=function(){return this._chunks},r.prototype.getProcessingPositions=function(){return this._processing_pos},t=r;function r(t){var o=this;this._running=!1,this._chunks=[],this._chunk_queue=[],this._geoms=[],this._saved_index=[1,0,0],this._workers=[],this._camera_pos=[0,0,0],this._processing_pos=[],this._def=t;for(var e=this,n=0;n<2;++n)!function(){var r={instance:new Worker("./dist/worker.js"),float32buffer:new Float32Array(1e6),status:f.available};r.instance.addEventListener("message",function(t){var e=t.data.position;r.float32buffer=t.data.float32buffer,r.status=f.available;for(var n=0;n<o._processing_pos.length;++n)if(o._processing_pos[n][0]===e[0]&&o._processing_pos[n][1]===e[1]&&o._processing_pos[n][2]===e[2]){o._processing_pos.splice(n,1);break}o._running&&(t=void 0,0==o._geoms.length?t=o._def.add_geom(r.float32buffer):(t=o._geoms.pop())&&o._def.update_geom(t,r.float32buffer),t?(o._chunks.push({position:e,geometry:t,coord2d:null,visible:!1}),o._launchWorker()):console.log("worker: processing the result -> invalid geometry"))},!1),e._workers.push(r)}()}n.default=t},{"../../constants":13}],16:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.letters_frag=n.letters_vert=n.experimental_frag=n.experimental_vert=n.color_frag=n.color_vert=void 0;n.color_vert="\n\nattribute vec3 a_vertexPosition;\nattribute vec3 a_vertexColor;\n\nvarying vec4 v_color;\n\nuniform mat4 u_modelviewMatrix;\nuniform mat4 u_projMatrix;\n\nvoid main(void)\n{\n    v_color = vec4(a_vertexColor,1.0);\n\n    gl_Position = u_projMatrix * u_modelviewMatrix * vec4(a_vertexPosition, 1.0);\n}\n";n.color_frag="\n\nprecision mediump float;\n\nvarying vec4 v_color;\n\nvoid main(void)\n{\n    gl_FragColor = v_color;\n}\n";n.experimental_vert="\n\nattribute vec3 a_vertexPosition;\nattribute vec3 a_vertexColor;\nattribute vec3 a_vertexNormal;\nattribute vec3 a_vertexBCenter;\n\nuniform mat4 u_modelviewMatrix;\nuniform mat4 u_projMatrix;\nuniform vec3 u_cameraPos;\n\nvarying vec3 v_color;\nvarying vec3 v_bCenter;\n\nvarying vec3 v_normalInterp;\nvarying vec3 v_vertPos;\nvarying float v_distance;\n\nvarying vec3 v_pureVertexPos;\nvarying vec3 v_pureNormalInterp;\n\nconst float k_range_min = 20.0;\nconst float k_range_max = 23.0;\n\nvoid main(void)\n{\n    vec4 vertPos4 = u_modelviewMatrix * vec4(a_vertexPosition, 1.0);\n    v_vertPos = vec3(vertPos4) / vertPos4.w;\n    v_normalInterp = vec3(u_modelviewMatrix * vec4(a_vertexNormal, 0.0));\n\n    v_pureVertexPos = a_vertexPosition;\n    v_pureNormalInterp = a_vertexNormal;\n\n    float tmp_dist = length(a_vertexPosition - u_cameraPos);\n\n    v_distance = tmp_dist;\n\n    v_color = a_vertexColor;\n    v_bCenter = a_vertexBCenter;\n\n    if (tmp_dist < k_range_min ||\n        tmp_dist > k_range_max)\n    {\n        gl_Position = u_projMatrix * u_modelviewMatrix * vec4(a_vertexPosition, 1.0);\n    }\n    else\n    {\n        // bump effect -> bump in the direction of the normal\n\n        gl_Position = u_projMatrix * u_modelviewMatrix * vec4(a_vertexPosition + a_vertexNormal, 1.0);\n    }\n}\n";n.experimental_frag='\n\nprecision mediump float;\n\nuniform sampler2D u_sampler;\n\nvarying vec3 v_color;\nvarying vec3 v_bCenter;\n\nvarying vec3 v_normalInterp;\nvarying vec3 v_vertPos;\nvarying float v_distance;\n\nvarying vec3 v_pureVertexPos;\nvarying vec3 v_pureNormalInterp;\n\nconst vec3 k_lightPos = vec3(0.0,0.0,0.0);\nconst vec3 k_specColor = vec3(1.0, 1.0, 1.0);\n\nconst float k_range_min = 20.0;\nconst float k_range_max = 23.0;\n\nvoid main(void)\n{\n\n    { // wireframe\n\n        if (gl_FrontFacing)\n        {\n            // "bumped wireframe" effect on the front facing\n\n            if (v_distance > k_range_min &&\n                v_distance < k_range_max)\n            {\n\n                if (all(greaterThan(v_bCenter, vec3(0.03))) &&\n                    any(lessThan(v_bCenter, vec3(0.08))))\n                {\n                    gl_FragColor = vec4(v_color, 1.0);\n                    return;\n                }\n\n            }\n\n        }\n        else\n        {\n            // normal wireframe effect on the back facing\n\n            if (any(lessThan(v_bCenter, vec3(0.06))))\n            {\n                gl_FragColor = vec4(1);\n                return;\n            }\n        }\n\n        // wireframe only for the backface\n        if (!gl_FrontFacing)\n            discard;\n\n    } // /wireframe\n\n    vec3 tmp_color = v_color;\n\n    { // texture\n\n        // current 3d texture coordinate\n        vec3 flooredPos = vec3(\n            v_pureVertexPos.x - floor(v_pureVertexPos.x),\n            v_pureVertexPos.y - floor(v_pureVertexPos.y),\n            v_pureVertexPos.z - floor(v_pureVertexPos.z)\n        );\n\n        vec3 blend_weights = abs( normalize( v_pureNormalInterp.xyz ) );\n        blend_weights = max( ( blend_weights - 0.2 ) * 7., 0. );\n        blend_weights /= ( blend_weights.x + blend_weights.y + blend_weights.z );\n\n        // horizontal texture coordinates -> should be a wall\n        vec2 texcoord1 = vec2(flooredPos.y * 0.5 + 0.5, flooredPos.z * 0.5);\n        vec2 texcoord2 = vec2(flooredPos.x * 0.5 + 0.5, flooredPos.z * 0.5);\n\n        // vertical texture coord -> should be green grass\n        vec2 texcoord3 = vec2(flooredPos.x * 0.5, flooredPos.y * 0.5 + 0.5);\n\n        if (v_pureNormalInterp.z < 0.0)\n        {\n            // switch the texture Y -> dirt on the ceilling instead of grass\n            texcoord3.y -= 0.5;\n        }\n\n        // horizontal color\n        vec3 texColor1 = texture2D( u_sampler, texcoord1 ).rgb;\n        vec3 texColor2 = texture2D( u_sampler, texcoord2 ).rgb;\n\n        // vertical color\n        vec3 texColor3 = texture2D( u_sampler, texcoord3 ).rgb;\n\n        tmp_color = texColor1 * blend_weights.xxx +\n                    texColor2 * blend_weights.yyy +\n                    texColor3 * blend_weights.zzz;\n\n    } // texture\n\n    { // lighting\n\n        vec3 normal = normalize(v_normalInterp);\n        vec3 lightDir = normalize(k_lightPos - v_vertPos);\n\n        float lambertian = max(dot(lightDir,v_normalInterp.xyz), 0.0);\n        float specular = 0.0;\n\n        if (lambertian > 0.0)\n        {\n            // lighting specular\n\n            vec3 reflectDir = reflect(-lightDir, normal);\n            vec3 viewDir = normalize(-v_vertPos);\n\n            float specAngle = max(dot(reflectDir, viewDir), 0.0);\n            specular = pow(specAngle, 16.0);\n        }\n\n        // lighting output\n\n        vec3 ambiant_color = tmp_color.xyz * 0.05;\n        vec3 diffuse_color = tmp_color.xyz * lambertian;\n        vec3 specular_color = specular * k_specColor;\n\n        tmp_color = ambiant_color + diffuse_color + specular_color;\n\n    } // lighting\n\n    gl_FragColor = vec4(tmp_color, 1.0);\n}\n';n.letters_vert="\n\nprecision mediump float;\n\nuniform mat4 u_modelviewMatrix;\nuniform mat4 u_projectionMatrix;\n\n\nattribute vec2 a_position;\nattribute vec2 a_texCoord;\nattribute vec2 a_offsetPosition;\nattribute vec2 a_offsetTexCoord;\nattribute float a_offsetScale;\n\nvarying vec2 v_texCoord;\n\nvoid main(void)\n{\n    vec2 position = a_position * a_offsetScale + a_offsetPosition;\n\n    gl_Position = u_projectionMatrix * u_modelviewMatrix * vec4(position, 0.0, 1.0);\n\n    v_texCoord = a_texCoord + a_offsetTexCoord;\n}\n";n.letters_frag="\n\nprecision mediump float;\n\nuniform sampler2D u_texture;\n\nvarying vec2 v_texCoord;\n\nvoid main(void)\n{\n    gl_FragColor = texture2D(u_texture, v_texCoord);\n}\n\n"},{}],17:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=(o.initialise=function(t){if(!(o._gl=t.getContext("webgl",{alpha:!0,antialias:!1,depth:!0,failIfMajorPerformanceCaveat:!1,powerPreference:"high-performance",premultipliedAlpha:!0,preserveDrawingBuffer:!0,stencil:!1})))throw new Error("could not create webgl context");o._extension_vao=o._gl.getExtension("OES_vertex_array_object")||o._gl.getExtension("MOZ_OES_vertex_array_object")||o._gl.getExtension("WEBKIT_OES_vertex_array_object"),o._extension_lose_context=o._gl.getExtension("WEBGL_lose_context"),o._instancing_extension=o._gl.getExtension("ANGLE_instanced_arrays"),o._viewportSize[0]=t.clientWidth,o._viewportSize[1]=t.clientHeight},o.getContext=function(){if(!o._gl)throw new Error("webgl context not initialised");return o._gl},o.getExtensionVao=function(){return o._extension_vao},o.getExtensionLoseContext=function(){return o._extension_lose_context},o.getExtensionInstancing=function(){return o._instancing_extension},o.getExtensionVaoStrict=function(){if(!o._extension_vao)throw new Error("vao extension not available");return o._extension_vao},o.getExtensionLoseContextStrict=function(){if(!o._extension_lose_context)throw new Error("lose context extension not available");return o._extension_lose_context},o.getExtensionInstancingStrict=function(){if(!o._instancing_extension)throw new Error("instancing extension not available");return o._instancing_extension},o.getViewportSize=function(){return o._viewportSize},o._gl=null,o._extension_vao=null,o._extension_lose_context=null,o._instancing_extension=null,o._viewportSize=[0,0],o);function o(){}n.default=r},{}],18:[function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,i,u,s){return new(u=u||Promise)(function(n,e){function r(t){try{a(s.next(t))}catch(t){e(t)}}function o(t){try{a(s.throw(t))}catch(t){e(t)}}function a(t){var e;t.done?n(t.value):((e=t.value)instanceof u?e:new u(function(t){t(e)})).then(r,o)}a((s=s.apply(t,i||[])).next())})},o=this&&this.__generator||function(n,r){var o,a,i,u={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},t={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(o)throw new TypeError("Generator is already executing.");for(;u;)try{if(o=1,a&&(i=2&e[0]?a.return:e[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,e[1])).done)return i;switch(a=0,(e=i?[2&e[0],i.value]:e)[0]){case 0:case 1:i=e;break;case 4:return u.label++,{value:e[1],done:!1};case 5:u.label++,a=e[1],e=[0];continue;case 7:e=u.ops.pop(),u.trys.pop();continue;default:if(!(i=0<(i=u.trys).length&&i[i.length-1])&&(6===e[0]||2===e[0])){u=0;continue}if(3===e[0]&&(!i||e[1]>i[0]&&e[1]<i[3])){u.label=e[1];break}if(6===e[0]&&u.label<i[1]){u.label=i[1],i=e;break}if(i&&u.label<i[2]){u.label=i[2],u.ops.push(e);break}i[2]&&u.ops.pop(),u.trys.pop();continue}e=r.call(n,u)}catch(t){e=[6,t],a=0}finally{o=i=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};Object.defineProperty(n,"__esModule",{value:!0});var l=t("../../constants"),h=t("./WebGLContext"),a=t("./camera/FreeFlyCamera"),i=t("./camera/FrustumCulling"),c=t("./utils/ShaderProgram"),_=t("./utils/Texture"),f=t("./ShaderSrc"),m=t("./utils/Geometry"),d=t("./utils/generateCubeVertices"),p=t("./utils/generateFrustumVertices"),u=t("./camera/glhProject"),v=t("gl-matrix"),t=(s.prototype._initialiseChunkRendering=function(){var t=new c.default({vs_src:f.experimental_vert,fs_src:f.experimental_frag,arr_attrib:["a_vertexPosition","a_vertexColor","a_vertexNormal","a_vertexBCenter"],arr_uniform:["u_modelviewMatrix","u_projMatrix","u_cameraPos","u_sampler"]}),e={vbos:[{attrs:[{name:"a_vertexPosition",type:m.GeometryWrapper.AttributeType.vec3f,index:0},{name:"a_vertexColor",type:m.GeometryWrapper.AttributeType.vec3f,index:3},{name:"a_vertexNormal",type:m.GeometryWrapper.AttributeType.vec3f,index:6},{name:"a_vertexBCenter",type:m.GeometryWrapper.AttributeType.vec3f,index:9}],stride:48,instanced:!1}],primitiveType:m.GeometryWrapper.PrimitiveType.triangles};this._chunkRendering={texture:new _.default,shader:t,geometryDefinition:e}},s.prototype._initialiseWireframeRendering=function(){var t=new c.default({vs_src:f.color_vert,fs_src:f.color_frag,arr_attrib:["a_vertexPosition","a_vertexColor"],arr_uniform:["u_modelviewMatrix","u_projMatrix"]}),e={vbos:[{attrs:[{name:"a_vertexPosition",type:m.GeometryWrapper.AttributeType.vec3f,index:0},{name:"a_vertexColor",type:m.GeometryWrapper.AttributeType.vec3f,index:3}],stride:24,instanced:!1}],primitiveType:m.GeometryWrapper.PrimitiveType.lines};(o=[]).push(0,0,0,1,0,0,20,0,0,1,0,0),o.push(0,0,0,0,1,0,0,20,0,0,1,0),o.push(0,0,0,0,0,1,0,0,20,0,0,1);var n=new m.GeometryWrapper.Geometry(t,e);n.updateBuffer(0,o),n.setPrimitiveCount(o.length/6),o.length=0;o.push(-5,0,0,1,1,1),o.push(25,0,0,1,1,1),o.push(0,-5,0,1,1,1),o.push(0,5,0,1,1,1),o.push(0,0,-5,1,1,1),o.push(0,0,5,1,1,1);var r=new m.GeometryWrapper.Geometry(t,e);r.updateBuffer(0,o),r.setPrimitiveCount(o.length/6);var o=d.default(l.default,[1,0,0]),a=new m.GeometryWrapper.Geometry(t,e);a.updateBuffer(0,o),a.setPrimitiveCount(o.length/6),o=d.default(l.default,[1,1,1]);var i=new m.GeometryWrapper.Geometry(t,e);i.updateBuffer(0,o),i.setPrimitiveCount(o.length/6),o=d.default(l.default,[0,1,0]);var u=new m.GeometryWrapper.Geometry(t,e);u.updateBuffer(0,o),u.setPrimitiveCount(o.length/6);var s=new m.GeometryWrapper.Geometry(t,e);o=p.default(70,this._aspectRatio,.1,40);e=new m.GeometryWrapper.Geometry(t,e);e.updateBuffer(0,o),e.setPrimitiveCount(o.length/6),this._wireframeRendering={shader:t,geometry_frustum:e,geometry_axis:n,geometry_cross:r,geometry_cubeR:a,geometry_cubeW:i,geometry_cubeG:u,geometry_stack_rendering:s}},s.prototype._initialiseTextRendering=function(){for(var t=new c.default({vs_src:f.letters_vert,fs_src:f.letters_frag,arr_uniform:["u_modelviewMatrix","u_projectionMatrix","u_texture"],arr_attrib:["a_position","a_texCoord","a_offsetPosition","a_offsetTexCoord","a_offsetScale"]}),e={vbos:[{attrs:[{name:"a_position",type:m.GeometryWrapper.AttributeType.vec2f,index:0},{name:"a_texCoord",type:m.GeometryWrapper.AttributeType.vec2f,index:2}],stride:16,instanced:!1},{attrs:[{name:"a_offsetPosition",type:m.GeometryWrapper.AttributeType.vec2f,index:0},{name:"a_offsetTexCoord",type:m.GeometryWrapper.AttributeType.vec2f,index:2},{name:"a_offsetScale",type:m.GeometryWrapper.AttributeType.float,index:4}],stride:20,instanced:!0}],primitiveType:m.GeometryWrapper.PrimitiveType.triangles},n=new m.GeometryWrapper.Geometry(t,e),r=[256,256],e=[16,16],e=[r[0]/e[0],r[1]/e[1]],r=[e[0]/r[0],e[1]/r[1]],o=[[[+e[0],0],[r[0],r[1]]],[[0,0],[0,r[1]]],[[+e[0],+e[1]],[r[0],0]],[[0,+e[1]],[0,0]]],a=[],i=0,u=[1,0,2,1,3,2];i<u.length;i++){var s=o[u[i]];a.push(s[0][0],s[0][1],s[1][0],s[1][1])}n.updateBuffer(0,a),n.setPrimitiveCount(a.length/4);r=new Map([[" ",[0*r[0],0*r[1]]],["!",[+r[0],0*r[1]]],['"',[2*r[0],0*r[1]]],["#",[3*r[0],0*r[1]]],["$",[4*r[0],0*r[1]]],["%",[5*r[0],0*r[1]]],["&",[6*r[0],0*r[1]]],["'",[7*r[0],0*r[1]]],["(",[8*r[0],0*r[1]]],[")",[9*r[0],0*r[1]]],["*",[10*r[0],0*r[1]]],["+",[11*r[0],0*r[1]]],[",",[12*r[0],0*r[1]]],["-",[13*r[0],0*r[1]]],[".",[14*r[0],0*r[1]]],["/",[15*r[0],0*r[1]]],["0",[0*r[0],+r[1]]],["1",[+r[0],+r[1]]],["2",[2*r[0],+r[1]]],["3",[3*r[0],+r[1]]],["4",[4*r[0],+r[1]]],["5",[5*r[0],+r[1]]],["6",[6*r[0],+r[1]]],["7",[7*r[0],+r[1]]],["8",[8*r[0],+r[1]]],["9",[9*r[0],+r[1]]],[":",[10*r[0],+r[1]]],[";",[11*r[0],+r[1]]],["<",[12*r[0],+r[1]]],["=",[13*r[0],+r[1]]],[">",[14*r[0],+r[1]]],["?",[15*r[0],+r[1]]],["@",[0*r[0],2*r[1]]],["A",[+r[0],2*r[1]]],["B",[2*r[0],2*r[1]]],["C",[3*r[0],2*r[1]]],["D",[4*r[0],2*r[1]]],["E",[5*r[0],2*r[1]]],["F",[6*r[0],2*r[1]]],["G",[7*r[0],2*r[1]]],["H",[8*r[0],2*r[1]]],["I",[9*r[0],2*r[1]]],["J",[10*r[0],2*r[1]]],["K",[11*r[0],2*r[1]]],["L",[12*r[0],2*r[1]]],["M",[13*r[0],2*r[1]]],["N",[14*r[0],2*r[1]]],["O",[15*r[0],2*r[1]]],["P",[0*r[0],3*r[1]]],["Q",[+r[0],3*r[1]]],["R",[2*r[0],3*r[1]]],["S",[3*r[0],3*r[1]]],["T",[4*r[0],3*r[1]]],["U",[5*r[0],3*r[1]]],["V",[6*r[0],3*r[1]]],["W",[7*r[0],3*r[1]]],["X",[8*r[0],3*r[1]]],["Y",[9*r[0],3*r[1]]],["Z",[10*r[0],3*r[1]]],["[",[11*r[0],3*r[1]]],["\\",[12*r[0],3*r[1]]],["]",[13*r[0],3*r[1]]],["^",[14*r[0],3*r[1]]],["_",[15*r[0],3*r[1]]],["`",[0*r[0],4*r[1]]],["a",[+r[0],4*r[1]]],["b",[2*r[0],4*r[1]]],["c",[3*r[0],4*r[1]]],["d",[4*r[0],4*r[1]]],["e",[5*r[0],4*r[1]]],["f",[6*r[0],4*r[1]]],["g",[7*r[0],4*r[1]]],["h",[8*r[0],4*r[1]]],["i",[9*r[0],4*r[1]]],["j",[10*r[0],4*r[1]]],["k",[11*r[0],4*r[1]]],["l",[12*r[0],4*r[1]]],["m",[13*r[0],4*r[1]]],["n",[14*r[0],4*r[1]]],["o",[15*r[0],4*r[1]]],["p",[0*r[0],5*r[1]]],["q",[+r[0],5*r[1]]],["r",[2*r[0],5*r[1]]],["s",[3*r[0],5*r[1]]],["t",[4*r[0],5*r[1]]],["u",[5*r[0],5*r[1]]],["v",[6*r[0],5*r[1]]],["w",[7*r[0],5*r[1]]],["x",[8*r[0],5*r[1]]],["y",[9*r[0],5*r[1]]],["z",[10*r[0],5*r[1]]],["{",[11*r[0],5*r[1]]],["|",[12*r[0],5*r[1]]],["}",[13*r[0],5*r[1]]],["~",[14*r[0],5*r[1]]]]);this._textRendering={texture:new _.default,shader:t,geometry:n,TexCoordMap:r,stack_vertices:[]}},s.prototype.chunk_is_visible=function(t){var e=.5*l.default;return this._frustum_culling.cubeInFrustum(t[0]+e,t[1]+e,t[2]+e,e)},s.prototype.point_is_visible=function(t){return this._frustum_culling.pointInFrustum(t[0],t[1],t[2])},s.prototype.add_geom=function(t){var e=new m.GeometryWrapper.Geometry(this._chunkRendering.shader,this._chunkRendering.geometryDefinition);return e.updateBuffer(0,t),e.setPrimitiveCount(t.length/12),e},s.prototype.update_geom=function(t,e){t.updateBuffer(0,e)},s.prototype.getCameraPosition=function(){return this._free_fly_camera.getPosition()},s.prototype.getFreeFlyCamera=function(){return this._free_fly_camera},s.prototype.resize=function(t,e){var n=h.default.getViewportSize();n[0]=t,n[1]=e,this._aspectRatio=.75*n[0]/n[1];n=p.default(70,this._aspectRatio,.1,40);this._wireframeRendering.geometry_frustum.updateBuffer(0,n),this._wireframeRendering.geometry_frustum.setPrimitiveCount(n.length/6)},s.prototype.toggle_context_loss=function(){var t=h.default.getContext(),e=h.default.getExtensionLoseContext();e&&(t.isContextLost()?e.restoreContext():e.loseContext())},s.prototype.context_is_lost=function(){return h.default.getContext().isContextLost()},s.prototype.set_on_context_lost=function(t){this.on_context_lost=t},s.prototype.set_on_context_restored=function(t){this.on_context_restored=t},s.prototype.init=function(){return r(this,void 0,void 0,function(){var e;return o(this,function(t){switch(t.label){case 0:return(e=h.default.getContext()).clearColor(0,0,0,1),e.enable(e.DEPTH_TEST),e.activeTexture(e.TEXTURE0),[4,this._chunkRendering.texture.load("assets/texture.png")];case 1:return t.sent(),[4,this._textRendering.texture.load("assets/ascii_font.png")];case 2:return t.sent(),[2]}})})},s.prototype.getSize=function(){var t=h.default.getViewportSize();return[t[0],t[1]]},s.prototype.update=function(t){var e=h.default.getViewportSize();this._free_fly_camera.handleKeys(),this._free_fly_camera.update(1/60),v.mat4.perspective(this._projection_matrix,70,this._aspectRatio,.1,70),this._free_fly_camera.updateViewMatrix(this._modelview_matrix),this._frustum_culling.calculateFrustum(this._projection_matrix,this._modelview_matrix);for(var n=[0,0,.75*e[0],e[1]],r=0;r<t.length;++r){var o=t[r].position;t[r].visible=this.chunk_is_visible(o),t[r].coord2d=null,!this.point_is_visible(o)||(o=u.default(o[0],o[1],o[2],this._modelview_matrix,this._projection_matrix,n))&&(t[r].coord2d=o)}},s.prototype.pushText=function(t,e,n){for(var r=[256,256],o=[16,16],a=[r[0]/o[0],r[1]/o[1]],i=[e[0],e[1]],u=0,s=t;u<s.length;u++){var c=s[u];if("\n"!=c){var f=this._textRendering.TexCoordMap.get(c);if(!f)throw new Error("fail to find a letter, letter="+c);this._textRendering.stack_vertices.push(i[0],i[1],f[0],f[1],n),i[0]+=a[0]*n}else i[0]=e[0],i[1]-=a[1]*n}},s.prototype.renderScene=function(t){var e=h.default.getContext(),n=h.default.getViewportSize();e.viewport(0,0,.75*n[0],n[1]),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT),this._chunkRendering.shader.bind(),this._chunkRendering.texture.bind(),e.uniform1i(this._chunkRendering.shader.getUniform("u_sampler"),0),e.uniformMatrix4fv(this._chunkRendering.shader.getUniform("u_modelviewMatrix"),!1,this._modelview_matrix),e.uniformMatrix4fv(this._chunkRendering.shader.getUniform("u_projMatrix"),!1,this._projection_matrix);n=this._free_fly_camera.getPosition();e.uniform3f(this._chunkRendering.shader.getUniform("u_cameraPos"),n[0],n[1],n[2]);for(var r=0;r<t.length;++r)t[r].visible&&t[r].geometry.render();this._wireframeRendering.shader.bind(),e.uniformMatrix4fv(this._wireframeRendering.shader.getUniform("u_projMatrix"),!1,this._projection_matrix),e.uniformMatrix4fv(this._wireframeRendering.shader.getUniform("u_modelviewMatrix"),!1,this._modelview_matrix);for(var o,a=v.mat4.create(),r=0;r<t.length;++r)t[r].visible&&(o=t[r].position,v.mat4.translate(a,this._modelview_matrix,o),e.uniformMatrix4fv(this._wireframeRendering.shader.getUniform("u_modelviewMatrix"),!1,a),this._wireframeRendering.geometry_cubeW.render());c.default.unbind()},s.prototype.renderHUD=function(t,e,n){var r=h.default.getContext(),o=h.default.getViewportSize();this._wireframeRendering.shader.bind();var a=.25*o[0],i=.75*o[0],o=.33*o[1];r.clear(r.DEPTH_BUFFER_BIT),this._render_main_hud(n),this._wireframeRendering.shader.bind(),this._render_side_hud(t,e,[i,0*o,a,o],[1,1.2,1],[0,0,1]),this._render_side_hud(t,e,[i,o,a,o],[0,1,0],[0,0,1]),this._render_side_hud(t,e,[i,2*o,a,o],[0,0,1],[0,1,0]),c.default.unbind()},s.prototype._render_main_hud=function(t){var e=h.default.getContext(),n=h.default.getViewportSize(),r=.75*n[0],o=n[1];e.viewport(0,0,r,o);var a=v.mat4.create();v.mat4.ortho(a,.5*-r,.5*r,.5*-o,.5*+o,-200,200);n=v.mat4.create();v.mat4.lookAt(n,[.5*r,.5*+o,1],[.5*r,.5*+o,0],[0,1,0]),e.uniformMatrix4fv(this._wireframeRendering.shader.getUniform("u_modelviewMatrix"),!1,n),e.uniformMatrix4fv(this._wireframeRendering.shader.getUniform("u_projMatrix"),!1,a);for(var i=[],u=0,s=t;u<s.length;u++){var c=s[u],f=200;i.push(c[0]-f,c[1]-f,0,1,0,0),i.push(c[0]+f,c[1]+f,0,1,0,0),i.push(c[0]+f,c[1]-f,0,1,0,0),i.push(c[0]-f,c[1]+f,0,1,0,0),this._free_fly_camera.getForceForward()&&(i.push(c[0]-f,c[1],0,1,0,0),i.push(c[0]+f,c[1],0,1,0,0),i.push(c[0],c[1]-f,0,1,0,0),i.push(c[0],c[1]+f,0,1,0,0))}this._wireframeRendering.geometry_stack_rendering.updateBuffer(0,i),this._wireframeRendering.geometry_stack_rendering.setPrimitiveCount(i.length/6),this._wireframeRendering.geometry_stack_rendering.render(),this._textRendering.shader.bind(),this._textRendering.texture.bind(),e.uniformMatrix4fv(this._textRendering.shader.getUniform("u_modelviewMatrix"),!1,n),e.uniformMatrix4fv(this._textRendering.shader.getUniform("u_projectionMatrix"),!1,a),this._textRendering.geometry.updateBuffer(1,this._textRendering.stack_vertices,!0),this._textRendering.geometry.setInstancedCount(this._textRendering.stack_vertices.length/5),this._textRendering.geometry.render(),_.default.unbind(),this._textRendering.stack_vertices.length=0},s.prototype._render_side_hud=function(t,e,n,r,o){var a=h.default.getContext();a.viewport(n[0],n[1],n[2],n[3]);var i=v.mat4.create(),n=n[2]/n[3];v.mat4.ortho(i,-65*n,65*n,-65,65,-200,200);var n=this._free_fly_camera.getPosition(),u=v.mat4.create();v.mat4.lookAt(u,[n[0]+r[0],n[1]+r[1],n[2]+r[2]],[n[0],n[1],n[2]],o),a.uniformMatrix4fv(this._wireframeRendering.shader.getUniform("u_modelviewMatrix"),!1,u),a.uniformMatrix4fv(this._wireframeRendering.shader.getUniform("u_projMatrix"),!1,i),this._wireframeRendering.geometry_axis.render();for(var s=v.mat4.create(),c=0;c<t.length;++c){var f=t[c].position;v.mat4.identity(s),t[c].visible?(v.mat4.translate(s,u,f),a.uniformMatrix4fv(this._wireframeRendering.shader.getUniform("u_modelviewMatrix"),!1,s),this._wireframeRendering.geometry_cubeW.render()):(v.mat4.translate(s,u,[f[0]+.15*l.default,f[1]+.15*l.default,f[2]+.15*l.default]),v.mat4.scale(s,s,[.7,.7,.7]),a.uniformMatrix4fv(this._wireframeRendering.shader.getUniform("u_modelviewMatrix"),!1,s),this._wireframeRendering.geometry_cubeR.render())}if(0<e.length)for(c=0;c<e.length;++c)v.mat4.translate(s,u,[e[c][0]+.2*l.default,e[c][1]+.2*l.default,e[c][2]+.2*l.default]),v.mat4.scale(s,s,[.6,.6,.6]),a.uniformMatrix4fv(this._wireframeRendering.shader.getUniform("u_modelviewMatrix"),!1,s),this._wireframeRendering.geometry_cubeG.render();v.mat4.translate(u,u,this._free_fly_camera.getPosition()),v.mat4.rotate(u,u,this._free_fly_camera.getTheta()*Math.PI/180,[0,0,1]),v.mat4.rotate(u,u,this._free_fly_camera.getPhi()*Math.PI/180,[0,-1,0]),a.uniformMatrix4fv(this._wireframeRendering.shader.getUniform("u_modelviewMatrix"),!1,u),this._wireframeRendering.geometry_cross.render(),this._wireframeRendering.geometry_frustum.render()},s);function s(t,e){var n=this;this.on_context_lost=null,this.on_context_restored=null,h.default.initialise(e),e.addEventListener("webglcontextlost",function(t){t.preventDefault(),console.log("context is lost"),n.on_context_lost&&n.on_context_lost()},!1),e.addEventListener("webglcontextrestored",function(){console.log("context is restored"),h.default.initialise(e),n.on_context_restored&&n.on_context_restored()},!1);var r=h.default.getViewportSize();this._free_fly_camera=new a.default(t),this._free_fly_camera.activate(),this._free_fly_camera.setPosition(l.default/4*3,l.default/4*3,0),this._frustum_culling=new i.default,this._projection_matrix=v.mat4.create(),this._modelview_matrix=v.mat4.create(),this._aspectRatio=.75*r[0]/r[1],this._initialiseChunkRendering(),this._initialiseWireframeRendering(),this._initialiseTextRendering()}n.default=t},{"../../constants":13,"./ShaderSrc":16,"./WebGLContext":17,"./camera/FreeFlyCamera":19,"./camera/FrustumCulling":20,"./camera/glhProject":21,"./utils/Geometry":24,"./utils/ShaderProgram":25,"./utils/Texture":26,"./utils/generateCubeVertices":27,"./utils/generateFrustumVertices":28,"gl-matrix":3}],19:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=t("gl-matrix"),i=t("./helpers/KeyboardHandler"),u=t("./helpers/PointerLockSetup"),t=(o.prototype.update=function(t){this.handleKeys();var e=Date.now();this._time_immobile+=t,3e3<e-this._last_time&&(this._time_immobile=10),this._last_time=e,this._force_forward&&(this._time_immobile=0);if(1&this._movement_flag||1==this._force_forward)for(var n=0;n<3;++n)this._position[n]+=this._forward[n]*t*16;else if(2&this._movement_flag)for(n=0;n<3;++n)this._position[n]-=this._forward[n]*t*16;if(4&this._movement_flag)for(n=0;n<3;++n)this._position[n]-=this._left[n]*t*16;else if(8&this._movement_flag)for(n=0;n<3;++n)this._position[n]+=this._left[n]*t*16;this._movement_flag=0;this._phi=Math.min(Math.max(this._phi,-89),89);var r=[0,0,1],e=Math.cos(3.14*(this._phi-90)/180);r[2]=Math.sin(3.14*(this._phi-90)/180),r[0]=e*Math.cos(3.14*this._theta/180),r[1]=e*Math.sin(3.14*this._theta/180);e=Math.cos(3.14*this._phi/180);this._forward[2]=Math.sin(3.14*this._phi/180),this._forward[0]=e*Math.cos(3.14*this._theta/180),this._forward[1]=e*Math.sin(3.14*this._theta/180),this._left[0]=r[1]*this._forward[2]-r[2]*this._forward[1],this._left[1]=r[2]*this._forward[0]-r[0]*this._forward[2],this._left[2]=r[0]*this._forward[1]-r[1]*this._forward[0],this._target[0]=this._position[0]+this._forward[0],this._target[1]=this._position[1]+this._forward[1],this._target[2]=this._position[2]+this._forward[2]},o.prototype.updateViewMatrix=function(t){r.mat4.lookAt(t,[this._position[0],this._position[1],this._position[2]],[this._target[0],this._target[1],this._target[2]],[0,0,1])},o.prototype.setPosition=function(t,e,n){this._position[0]=t,this._position[1]=e,this._position[2]=n},o.prototype.getPosition=function(){return[this._position[0],this._position[1],this._position[2]]},o.prototype.getTheta=function(){return this._theta},o.prototype.getPhi=function(){return this._phi},o.prototype.getForceForward=function(){return this._force_forward},o.prototype.getTimeImmobile=function(){return this._time_immobile},o.prototype.handleKeys=function(){(this._keyboard_handler.isPressed(i.keyCodes.KEY_Z)||this._keyboard_handler.isPressed(i.keyCodes.KEY_W))&&(this._movement_flag|=1,this._time_immobile=0),this._keyboard_handler.isPressed(i.keyCodes.KEY_S)&&(this._movement_flag|=2,this._time_immobile=0),(this._keyboard_handler.isPressed(i.keyCodes.KEY_A)||this._keyboard_handler.isPressed(i.keyCodes.KEY_Q))&&(this._movement_flag|=4,this._time_immobile=0),this._keyboard_handler.isPressed(i.keyCodes.KEY_D)&&(this._movement_flag|=8,this._time_immobile=0),this._keyboard_handler.isPressed(i.keyCodes.ARROW_UP)&&(this._phi++,this._time_immobile=0),this._keyboard_handler.isPressed(i.keyCodes.ARROW_DOWN)&&(this._phi--,this._time_immobile=0),this._keyboard_handler.isPressed(i.keyCodes.ARROW_LEFT)&&(this._theta++,this._time_immobile=0),this._keyboard_handler.isPressed(i.keyCodes.ARROW_RIGHT)&&(this._theta--,this._time_immobile=0)},o.prototype.activate=function(){this._keyboard_handler.activate()},o.prototype.deactivate=function(){this._keyboard_handler.deactivate()},o);function o(t){var r=this;this._phi=0,this._theta=0,this._forward=[1,0,0],this._left=[0,0,0],this._position=[0,0,0],this._target=[0,0,0],this._movement_flag=0,this._keyboard_handler=new i.KeyboardHandler,this._force_forward=!1,this._time_immobile=0,this._last_time=0,this._last_time=Date.now();function e(t){var e=t.movementX||t.mozMovementX||t.webkitMovementX||0,t=t.movementY||t.mozMovementY||t.webkitMovementY||0;r._theta-=e/5,r._phi-=t/5,r._time_immobile=0}u.default({target_element:t,cb_enabled:function(){t.addEventListener("mousemove",e,!1)},cb_disabled:function(){t.removeEventListener("mousemove",e,!1)}});var o=null,a=null,n=Date.now();t.addEventListener("touchstart",function(t){t.preventDefault(),a=o=null;var e=Date.now();1==t.targetTouches.length&&e-n<250&&(r._force_forward=!0),n=e}),t.addEventListener("touchend",function(t){t.preventDefault(),a=o=null,r._force_forward=!1}),t.addEventListener("touchmove",function(t){t.preventDefault();var e,n,t=t.targetTouches;0==t.length||2<t.length||(2==t.length?(n=t[0].pageX-t[1].pageX,e=t[0].pageY-t[1].pageY,n=Math.sqrt(n*n+e*e),a&&(r._movement_flag|=a<n?1:2),a=n):(o&&(e=o.pageX-t[0].pageX,n=o.pageY-t[0].pageY,r._theta-=e/5,r._phi-=n/5),o=t[0]),r._time_immobile=0)})}n.default=t},{"./helpers/KeyboardHandler":22,"./helpers/PointerLockSetup":23,"gl-matrix":3}],20:[function(t,e,n){"use strict";var r,i;Object.defineProperty(n,"__esModule",{value:!0}),(o=r=r||{})[o.Right=0]="Right",o[o.Left=1]="Left",o[o.Bottom=2]="Bottom",o[o.Top=3]="Top",o[o.Back=4]="Back",o[o.Front=5]="Front",(o=i=i||{})[o.A=0]="A",o[o.B=1]="B",o[o.C=2]="C",o[o.D=3]="D";var o=(a.prototype.normalizePlane=function(t){var e=4*t,t=Math.sqrt(this._Frustum[e+i.A]*this._Frustum[e+i.A]+this._Frustum[e+i.B]*this._Frustum[e+i.B]+this._Frustum[e+i.C]*this._Frustum[e+i.C]);this._Frustum[e+i.A]/=t,this._Frustum[e+i.B]/=t,this._Frustum[e+i.C]/=t,this._Frustum[e+i.D]/=t},a.prototype.calculateFrustum=function(t,e){var n=new Float32Array(16);n[0]=e[0]*t[0]+e[1]*t[4]+e[2]*t[8]+e[3]*t[12],n[1]=e[0]*t[1]+e[1]*t[5]+e[2]*t[9]+e[3]*t[13],n[2]=e[0]*t[2]+e[1]*t[6]+e[2]*t[10]+e[3]*t[14],n[3]=e[0]*t[3]+e[1]*t[7]+e[2]*t[11]+e[3]*t[15],n[4]=e[4]*t[0]+e[5]*t[4]+e[6]*t[8]+e[7]*t[12],n[5]=e[4]*t[1]+e[5]*t[5]+e[6]*t[9]+e[7]*t[13],n[6]=e[4]*t[2]+e[5]*t[6]+e[6]*t[10]+e[7]*t[14],n[7]=e[4]*t[3]+e[5]*t[7]+e[6]*t[11]+e[7]*t[15],n[8]=e[8]*t[0]+e[9]*t[4]+e[10]*t[8]+e[11]*t[12],n[9]=e[8]*t[1]+e[9]*t[5]+e[10]*t[9]+e[11]*t[13],n[10]=e[8]*t[2]+e[9]*t[6]+e[10]*t[10]+e[11]*t[14],n[11]=e[8]*t[3]+e[9]*t[7]+e[10]*t[11]+e[11]*t[15],n[12]=e[12]*t[0]+e[13]*t[4]+e[14]*t[8]+e[15]*t[12],n[13]=e[12]*t[1]+e[13]*t[5]+e[14]*t[9]+e[15]*t[13],n[14]=e[12]*t[2]+e[13]*t[6]+e[14]*t[10]+e[15]*t[14],n[15]=e[12]*t[3]+e[13]*t[7]+e[14]*t[11]+e[15]*t[15];t=4*r.Right;this._Frustum[t+i.A]=n[3]-n[0],this._Frustum[t+i.B]=n[7]-n[4],this._Frustum[t+i.C]=n[11]-n[8],this._Frustum[t+i.D]=n[15]-n[12],this.normalizePlane(r.Right),t=4*r.Left,this._Frustum[t+i.A]=n[3]+n[0],this._Frustum[t+i.B]=n[7]+n[4],this._Frustum[t+i.C]=n[11]+n[8],this._Frustum[t+i.D]=n[15]+n[12],this.normalizePlane(r.Left),t=4*r.Bottom,this._Frustum[t+i.A]=n[3]+n[1],this._Frustum[t+i.B]=n[7]+n[5],this._Frustum[t+i.C]=n[11]+n[9],this._Frustum[t+i.D]=n[15]+n[13],this.normalizePlane(r.Bottom),t=4*r.Top,this._Frustum[t+i.A]=n[3]-n[1],this._Frustum[t+i.B]=n[7]-n[5],this._Frustum[t+i.C]=n[11]-n[9],this._Frustum[t+i.D]=n[15]-n[13],this.normalizePlane(r.Top),t=4*r.Back,this._Frustum[t+i.A]=n[3]-n[2],this._Frustum[t+i.B]=n[7]-n[6],this._Frustum[t+i.C]=n[11]-n[10],this._Frustum[t+i.D]=n[15]-n[14],this.normalizePlane(r.Back),t=4*r.Front,this._Frustum[t+i.A]=n[3]+n[2],this._Frustum[t+i.B]=n[7]+n[6],this._Frustum[t+i.C]=n[11]+n[10],this._Frustum[t+i.D]=n[15]+n[14],this.normalizePlane(r.Front)},a.prototype.pointInFrustum=function(t,e,n){for(var r=0;r<6;++r)if(this._Frustum[4*r+i.A]*t+this._Frustum[4*r+i.B]*e+this._Frustum[4*r+i.C]*n+this._Frustum[4*r+i.D]<=0)return!1;return!0},a.prototype.sphereInFrustum=function(t,e,n,r){for(var o=0;o<6;++o)if(this._Frustum[4*o+i.A]*t+this._Frustum[4*o+i.B]*e+this._Frustum[4*o+i.C]*n+this._Frustum[4*o+i.D]<=r)return!1;return!0},a.prototype.cubeInFrustum=function(t,e,n,r){for(var o=0;o<6;++o){var a=4*o;if(!(0<this._Frustum[a+i.A]*(t-r)+this._Frustum[a+i.B]*(e-r)+this._Frustum[a+i.C]*(n-r)+this._Frustum[a+i.D])&&!(0<this._Frustum[a+i.A]*(t+r)+this._Frustum[a+i.B]*(e-r)+this._Frustum[a+i.C]*(n-r)+this._Frustum[a+i.D]||0<this._Frustum[a+i.A]*(t-r)+this._Frustum[a+i.B]*(e+r)+this._Frustum[a+i.C]*(n-r)+this._Frustum[a+i.D]||0<this._Frustum[a+i.A]*(t+r)+this._Frustum[a+i.B]*(e+r)+this._Frustum[a+i.C]*(n-r)+this._Frustum[a+i.D]||0<this._Frustum[a+i.A]*(t-r)+this._Frustum[a+i.B]*(e-r)+this._Frustum[a+i.C]*(n+r)+this._Frustum[a+i.D]||0<this._Frustum[a+i.A]*(t+r)+this._Frustum[a+i.B]*(e-r)+this._Frustum[a+i.C]*(n+r)+this._Frustum[a+i.D]||0<this._Frustum[a+i.A]*(t-r)+this._Frustum[a+i.B]*(e+r)+this._Frustum[a+i.C]*(n+r)+this._Frustum[a+i.D]||0<this._Frustum[a+i.A]*(t+r)+this._Frustum[a+i.B]*(e+r)+this._Frustum[a+i.C]*(n+r)+this._Frustum[a+i.D]))return!1}return!0},a);function a(){this._Frustum=new Float32Array(24)}n.default=o},{}],21:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function(t,e,n,r,o,a){var i=[0,0,0,0,0,0,0,0];return i[0]=r[0]*t+r[4]*e+r[8]*n+r[12],i[1]=r[1]*t+r[5]*e+r[9]*n+r[13],i[2]=r[2]*t+r[6]*e+r[10]*n+r[14],i[3]=r[3]*t+r[7]*e+r[11]*n+r[15],i[4]=o[0]*i[0]+o[4]*i[1]+o[8]*i[2]+o[12]*i[3],i[5]=o[1]*i[0]+o[5]*i[1]+o[9]*i[2]+o[13]*i[3],i[6]=o[2]*i[0]+o[6]*i[1]+o[10]*i[2]+o[14]*i[3],i[7]=-i[2],0==i[7]?null:(i[7]=1/i[7],i[4]*=i[7],i[5]*=i[7],i[6]*=i[7],[(.5*i[4]+.5)*a[2]+a[0],(.5*i[5]+.5)*a[3]+a[1]])}},{}],22:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.KeyboardHandler=n.keyCodes=void 0;n.keyCodes={KEY_Z:90,KEY_W:87,KEY_S:83,KEY_A:65,KEY_Q:81,KEY_D:68,ARROW_LEFT:37,ARROW_RIGHT:39,ARROW_UP:38,ARROW_DOWN:40};var r=(o.prototype.isPressed=function(t){return this._pressedKeys.get(t)||!1},o.prototype.activate=function(){this._activated||(document.addEventListener("keydown",this._handleKeyDown),document.addEventListener("keyup",this._handleKeyUp),this._activated=!0)},o.prototype.deactivate=function(){this._activated&&(document.removeEventListener("keydown",this._handleKeyDown),document.removeEventListener("keyup",this._handleKeyUp),this._activated=!1)},o);function o(){var e=this;this._pressedKeys=new Map,this._activated=!1;this._activated=!1,this._handleKeyDown=function(t){t.preventDefault(),e._pressedKeys.set(t.keyCode,!0)}.bind(this),this._handleKeyUp=function(t){t.preventDefault(),e._pressedKeys.set(t.keyCode,!1)}.bind(this)}n.KeyboardHandler=r},{}],23:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function(e){e.target_element.requestPointerLock=e.target_element.requestPointerLock||e.target_element.mozRequestPointerLock||e.target_element.webkitRequestPointerLock,document.exitPointerLock=document.exitPointerLock||document.mozExitPointerLock||document.webkitExitPointerLock,e.target_element.onclick=function(){e.target_element.requestPointerLock&&e.target_element.requestPointerLock()};function t(){document.pointerLockElement===e.target_element||document.mozPointerLockElement===e.target_element||document.webkitPointerLockElement===e.target_element?(console.log("The pointer lock status is now locked"),e.cb_enabled()):(console.log("The pointer lock status is now unlocked"),e.cb_disabled())}function n(t){console.error("Pointer lock failed"),console.error(t),e.cb_error&&e.cb_error(t)}"onpointerlockchange"in document?document.addEventListener("pointerlockchange",t,!1):"onmozpointerlockchange"in document?document.addEventListener("mozpointerlockchange",t,!1):"onwebkitpointerlockchange"in document&&document.addEventListener("webkitpointerlockchange",t,!1),"onpointerlockerror"in document?document.addEventListener("pointerlockerror",n,!1):"onmozpointerlockerror"in document?document.addEventListener("mozpointerlockerror",n,!1):"onwebkitpointerlockerror"in document&&document.addEventListener("webkitpointerlockerror",n,!1)}},{}],24:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.GeometryWrapper=void 0;var A=t("../WebGLContext");!function(E){var R,k;E.BytesPerPixel=4,(t=R=E.AttributeType||(E.AttributeType={}))[t.float=0]="float",t[t.vec2f=1]="vec2f",t[t.vec3f=2]="vec3f",t[t.vec4f=3]="vec4f",t[t.mat3f=4]="mat3f",t[t.mat4f=5]="mat4f",(t=k=E.PrimitiveType||(E.PrimitiveType={}))[t.lines=0]="lines",t[t.triangles=1]="triangles";var t=(e.prototype.dispose=function(){for(var t=A.default.getContext(),e=A.default.getExtensionVaoStrict(),n=0;n<this._vbos.length;++n)t.deleteBuffer(this._vbos[n]);e.deleteVertexArrayOES(this._vao)},e.prototype.updateBuffer=function(t,e,n){if(void 0===n&&(n=!1),t<0||t>=this._vbos.length)throw new Error("no buffer avaialble to tha index");var r=A.default.getContext(),t=this._vbos[t],e=e instanceof Float32Array?e:new Float32Array(e),n=n?r.DYNAMIC_DRAW:r.STATIC_DRAW;r.bindBuffer(r.ARRAY_BUFFER,t),r.bufferData(r.ARRAY_BUFFER,e,n),r.bindBuffer(r.ARRAY_BUFFER,null)},e.prototype.render=function(){var t,e,n;0==this._primitiveCount||this._isInstanced&&0==this._instanceCount||(t=A.default.getContext(),e=A.default.getExtensionVaoStrict(),n=A.default.getExtensionInstancingStrict(),e.bindVertexArrayOES(this._vao),!0===this._isInstanced?n.drawArraysInstancedANGLE(this._primitiveType,this._primitiveStart,this._primitiveCount,this._instanceCount):t.drawArrays(this._primitiveType,this._primitiveStart,this._primitiveCount),e.bindVertexArrayOES(null))},e.prototype.setPrimitiveStart=function(t){this._primitiveStart=t},e.prototype.setPrimitiveCount=function(t){this._primitiveCount=t},e.prototype.setInstancedCount=function(t){this._instanceCount=t},e);function e(t,e){this._primitiveStart=0,this._primitiveCount=0,this._instanceCount=0,this._isInstanced=!1;var n=A.default.getContext();if(0===e.vbos.length)throw new Error("empty vbo defintion");for(var r=0,o=e.vbos;r<o.length;r++){if(0===(h=o[r]).attrs.length)throw new Error("empty vbo attribute defintion");for(var a=0,i=h.attrs;a<i.length;a++){var u=i[a];if(!t.hasAttribute(u.name))throw new Error('attribute not found, name="'+u.name+'"')}}switch((this._def=e).primitiveType){case k.lines:this._primitiveType=n.LINES;break;case k.triangles:this._primitiveType=n.TRIANGLES;break;default:throw new Error("primitive type not found")}var s=A.default.getExtensionVaoStrict(),c=A.default.getExtensionInstancingStrict(),e=s.createVertexArrayOES();if(!e)throw new Error("fail o create a vao unit");this._vao=e,s.bindVertexArrayOES(this._vao),this._vbos=[];for(var f=0,l=this._def.vbos;f<l.length;f++){var h,_=l[f];if(!(h=n.createBuffer()))throw new Error("fail o create a vbo unit");this._vbos.push(h),n.bindBuffer(n.ARRAY_BUFFER,h);var m=_.stride||0;if(!m){for(var d=0,p=_.attrs;d<p.length;d++)switch((u=p[d]).type){case R.float:m+=1;break;case R.vec2f:m+=2;break;case R.vec3f:m+=3;break;case R.vec4f:m+=4;break;case R.mat3f:m+=9;break;case R.mat4f:m+=16}m*=E.BytesPerPixel}for(var v=0,g=_.attrs;v<g.length;v++){var y=1,b=1;switch((u=g[v]).type){case R.float:b=y=1;break;case R.vec2f:y=2,b=1;break;case R.vec3f:y=3,b=1;break;case R.vec4f:y=4,b=1;break;case R.mat3f:b=y=3;break;case R.mat4f:b=y=4}for(var M=t.getAttribute(u.name),x=0;x<b;++x){var w=M+x,P=(u.index+x*y)*E.BytesPerPixel;n.enableVertexAttribArray(w),n.vertexAttribPointer(w,y,n.FLOAT,!1,m,P),!0===_.instanced&&(c.vertexAttribDivisorANGLE(w,1),this._isInstanced=!0)}}}s.bindVertexArrayOES(null)}E.Geometry=t}(n.GeometryWrapper||(n.GeometryWrapper={}))},{"../WebGLContext":17}],25:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=t("../WebGLContext"),t=(r.prototype.bind=function(){a.default.getContext().useProgram(this._program)},r.unbind=function(){a.default.getContext().useProgram(null)},r.prototype.hasAttribute=function(t){return this._attributes.has(t)},r.prototype.getAttribute=function(t){var e=this._attributes.get(t);if(void 0===e)throw new Error("attribute not found: "+t);return e},r.prototype.getUniform=function(t){var e=this._uniforms.get(t);if(void 0===e)throw new Error("uniform not found: "+t);return e},r.prototype._getAttribAndLocation=function(t,e){var n=a.default.getContext();if(!this._program)throw new Error("shader program not initialised");n.useProgram(this._program);for(var r=0;r<t.length;++r){if((o=n.getAttribLocation(this._program,t[r]))<0)throw new Error("attribute not found => "+t[r]);this._attributes.set(t[r],o)}for(var o,r=0;r<e.length;++r){if(null===(o=n.getUniformLocation(this._program,e[r])))throw new Error("uniform not found => "+e[r]);this._uniforms.set(e[r],o)}n.useProgram(null)},r.prototype._getShader=function(t,e){var n=a.default.getContext(),e=n.createShader(e);if(!e)throw new Error("could not create a shader");if(n.shaderSource(e,t),n.compileShader(e),n.getShaderParameter(e,n.COMPILE_STATUS))return e;e=(e=n.getShaderInfoLog(e))||"failed to compile a shader";throw new Error(e)},r);function r(t){this._attributes=new Map,this._uniforms=new Map;var e=a.default.getContext(),n=this._getShader(t.vs_src,e.VERTEX_SHADER),r=this._getShader(t.fs_src,e.FRAGMENT_SHADER);if(this._program=e.createProgram(),!this._program)throw new Error("could not create a shader program");if(e.attachShader(this._program,n),e.attachShader(this._program,r),e.linkProgram(this._program),!e.getProgramParameter(this._program,e.LINK_STATUS)){e=e.getProgramInfoLog(this._program);throw new Error("Failed to initialised shaders, Error linking:"+e)}this._getAttribAndLocation(t.arr_attrib,t.arr_uniform)}n.default=t},{"../WebGLContext":17}],26:[function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,i,u,s){return new(u=u||Promise)(function(n,e){function r(t){try{a(s.next(t))}catch(t){e(t)}}function o(t){try{a(s.throw(t))}catch(t){e(t)}}function a(t){var e;t.done?n(t.value):((e=t.value)instanceof u?e:new u(function(t){t(e)})).then(r,o)}a((s=s.apply(t,i||[])).next())})},l=this&&this.__generator||function(n,r){var o,a,i,u={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},t={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(o)throw new TypeError("Generator is already executing.");for(;u;)try{if(o=1,a&&(i=2&e[0]?a.return:e[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,e[1])).done)return i;switch(a=0,(e=i?[2&e[0],i.value]:e)[0]){case 0:case 1:i=e;break;case 4:return u.label++,{value:e[1],done:!1};case 5:u.label++,a=e[1],e=[0];continue;case 7:e=u.ops.pop(),u.trys.pop();continue;default:if(!(i=0<(i=u.trys).length&&i[i.length-1])&&(6===e[0]||2===e[0])){u=0;continue}if(3===e[0]&&(!i||e[1]>i[0]&&e[1]<i[3])){u.label=e[1];break}if(6===e[0]&&u.label<i[1]){u.label=i[1],i=e;break}if(i&&u.label<i[2]){u.label=i[2],u.ops.push(e);break}i[2]&&u.ops.pop(),u.trys.pop();continue}e=r.call(n,u)}catch(t){e=[6,t],a=0}finally{o=i=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};Object.defineProperty(n,"__esModule",{value:!0});var h=t("../WebGLContext"),t=(o.prototype.load=function(c,f){return void 0===f&&(f=!1),r(this,void 0,void 0,function(){var o,a,i,u,e,s=this;return l(this,function(t){return o=h.default.getContext(),this._texture=o.createTexture(),o.bindTexture(o.TEXTURE_2D,this._texture),a=o.RGBA,0,i=o.RGBA,u=o.UNSIGNED_BYTE,e=new Uint8Array([0,0,255,255]),o.texImage2D(o.TEXTURE_2D,0,a,1,1,0,i,u,e),[2,new Promise(function(e,n){var r=new Image;r.onerror=function(t){n(t)},r.onload=function(){s._width=r.width,s._height=r.height,o.bindTexture(o.TEXTURE_2D,s._texture),o.texImage2D(o.TEXTURE_2D,0,a,i,u,r),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_S,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_T,o.CLAMP_TO_EDGE);var t=f?o.NEAREST:o.LINEAR;o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,t),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MAG_FILTER,t),o.bindTexture(o.TEXTURE_2D,null),e()},r.src=c})]})})},o.prototype.getWidth=function(){if(!this._texture)throw new Error("texture not initialised");return this._width},o.prototype.getHeight=function(){if(!this._texture)throw new Error("texture not initialised");return this._height},o.prototype.bind=function(){if(!this._texture)throw new Error("texture not initialised");var t=h.default.getContext();t.bindTexture(t.TEXTURE_2D,this._texture)},o.unbind=function(){var t=h.default.getContext();t.bindTexture(t.TEXTURE_2D,null)},o);function o(){this._width=0,this._height=0,this._texture=null}n.default=t},{"../WebGLContext":17}],27:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function(t,e,n){var r=t/2,t=t/2.1,o=[r,r,r,-r,r,r,r,-r,r,-r,-r,r,r,r,-r,-r,r,-r,r,-r,-r,-r,-r,-r,t,t,t,-t,t,t,t,-t,t,-t,-t,t,t,t,-t,-t,t,-t,t,-t,-t,-t,-t,-t],a=[0,1,1,3,3,2,2,0,4,5,5,7,7,6,6,4,0,4,1,5,3,7,2,6,8,9,9,11,11,10,10,8,12,13,13,15,15,14,14,12,8,12,9,13,11,15,10,14];(n=void 0===n?!1:n)&&(a.length/=2);for(var i=[],u=0;u<a.length;++u){for(var s=3*a[u],c=0;c<3;++c)i.push(o[s+c]+r);for(c=0;c<3;++c)i.push(e[c])}return i}},{}],28:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function(t,e,n,r){for(var o=Math.tan(t/360*Math.PI)*n,a=o*e,i=-a,u=+a,a=+o,o=-o,t=r*Math.sin(t*Math.PI/180),e=t*e,s=[n,i,a,n,u,a,n,i,o,n,u,o,r,-e,+t,r,+e,+t,r,-e,-t,r,+e,-t,r,1.66*-e,-t,r,1.66*-e,+t],c=[0,1,1,3,3,2,2,0,0,4,1,5,2,6,3,7,4,5,5,7,7,6,6,4,8,9,7,8,5,9],f=[],l=0;l<c.length;++l){for(var h=3*c[l],_=0;_<3;++_)f.push(s[h+_]);f.push(1,1,0)}return f}},{}],29:[function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,i,u,s){return new(u=u||Promise)(function(n,e){function r(t){try{a(s.next(t))}catch(t){e(t)}}function o(t){try{a(s.throw(t))}catch(t){e(t)}}function a(t){var e;t.done?n(t.value):((e=t.value)instanceof u?e:new u(function(t){t(e)})).then(r,o)}a((s=s.apply(t,i||[])).next())})},o=this&&this.__generator||function(n,r){var o,a,i,u={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},t={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(o)throw new TypeError("Generator is already executing.");for(;u;)try{if(o=1,a&&(i=2&e[0]?a.return:e[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,e[1])).done)return i;switch(a=0,(e=i?[2&e[0],i.value]:e)[0]){case 0:case 1:i=e;break;case 4:return u.label++,{value:e[1],done:!1};case 5:u.label++,a=e[1],e=[0];continue;case 7:e=u.ops.pop(),u.trys.pop();continue;default:if(!(i=0<(i=u.trys).length&&i[i.length-1])&&(6===e[0]||2===e[0])){u=0;continue}if(3===e[0]&&(!i||e[1]>i[0]&&e[1]<i[3])){u.label=e[1];break}if(6===e[0]&&u.label<i[1]){u.label=i[1],i=e;break}if(i&&u.label<i[2]){u.label=i[2],u.ops.push(e);break}i[2]&&u.ops.pop(),u.trys.pop();continue}e=r.call(n,u)}catch(t){e=[6,t],a=0}finally{o=i=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};Object.defineProperty(n,"__esModule",{value:!0}),window.onerror=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];alert(JSON.stringify(t))};var a=t("./experiment/WebGLExperiment");r(void 0,void 0,void 0,function(){var e,n;return o(this,function(t){switch(t.label){case 0:return[4,(e=new a.default).init()];case 1:if(t.sent(),e.start(),(n=document.getElementById("touch_id"))&&("ontouchstart"in window?n.innerHTML+="Supported":n.innerHTML+="Not Supported"),!(n=document.getElementById("gui_toggle_start")))throw new Error("gui_toggle_start not found");return n.addEventListener("click",function(){console.log("toggle_start"),e.isRunning()?e.stop():e.start()}),[2]}})})},{"./experiment/WebGLExperiment":14}]},{},[29]);