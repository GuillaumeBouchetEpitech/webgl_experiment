!function n(o,a,i){function u(e,t){if(!a[e]){if(!o[e]){var r="function"==typeof require&&require;if(!t&&r)return r(e,!0);if(s)return s(e,!0);throw(r=new Error("Cannot find module '"+e+"'")).code="MODULE_NOT_FOUND",r}r=a[e]={exports:{}},o[e][0].call(r.exports,function(t){return u(o[e][1][t]||t)},r,r.exports,n,o,a,i)}return a[e].exports}for(var s="function"==typeof require&&require,t=0;t<i.length;t++)u(i[t]);return u}({1:[function(t,e,r){!function(o,T){"use strict";function F(t){return document.createElement(t)}function C(t,e){for(var r in e)try{t.style[r]=e[r]}catch(t){}return t}function j(t){return null==t?String(t):"object"==typeof t||"function"==typeof t?Object.prototype.toString.call(t).match(/\s([a-z]+)/i)[1].toLowerCase()||"object":typeof t}function I(t,e){if("array"!==j(e))return-1;if(e.indexOf)return e.indexOf(t);for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}function D(){var t,e=arguments;for(t in e[1])if(e[1].hasOwnProperty(t))switch(j(e[1][t])){case"object":e[0][t]=D({},e[0][t],e[1][t]);break;case"array":e[0][t]=e[1][t].slice(0);break;default:e[0][t]=e[1][t]}return 2<e.length?D.apply(null,[e[0]].concat(Array.prototype.slice.call(e,2))):e[0]}function q(t){return 1===(t=Math.round(255*t).toString(16)).length?"0"+t:t}function W(t,e,r,n){t.addEventListener?t[n?"removeEventListener":"addEventListener"](e,r,!1):t.attachEvent&&t[n?"detachEvent":"attachEvent"]("on"+e,r)}var Y,t;t=o.performance,Y=t&&(t.now||t.webkitNow)?t[t.now?"now":"webkitNow"].bind(t):function(){return+new Date};var N=o.cancelAnimationFrame||o.cancelRequestAnimationFrame,G=o.requestAnimationFrame;!function(){for(var t=["moz","webkit","o"],n=0,e=0,r=t.length;e<r&&!N;++e)N=o[t[e]+"CancelAnimationFrame"]||o[t[e]+"CancelRequestAnimationFrame"],G=N&&o[t[e]+"RequestAnimationFrame"];N||(G=function(t){var e=Y(),r=Math.max(0,16-(e-n));return n=e+r,o.setTimeout(function(){t(e+r)},r)},N=function(t){clearTimeout(t)})}();var B="string"===j(document.createElement("div").textContent)?"textContent":"innerText";function z(e,t){"object"===j(e)&&e.nodeType===T&&(t=e,e=document.body),e=e||document.body;var i,u,r,n,o,a,s,c,f,h=this,l=D({},z.defaults,t||{}),_={},m=[],d=100,p=[],v=l.threshold,g=0,y=Y()-v,b=[],M=[],x="fps"===l.show;function w(t,e,r,n){return u[0|t][Math.round(Math.min((e-r)/(n-r)*d,d))]}function P(){_.legend.fps!==x&&(_.legend.fps=x,_.legend[B]=x?"FPS":"ms"),s=x?h.fps:h.duration,_.count[B]=999<s?"999+":s.toFixed(99<s?0:l.decimals)}function E(){if(r=Y(),y<r-l.threshold&&(h.fps-=h.fps/Math.max(1,60*l.smoothing/l.interval),h.duration=1e3/h.fps),function(){for(c=l.history;c--;)b[c]=0===c?h.fps:b[c-1],M[c]=0===c?h.duration:M[c-1]}(),P(),l.heat){if(p.length)for(c=p.length;c--;)p[c].el.style[i[p[c].name].heatOn]=x?w(i[p[c].name].heatmap,h.fps,0,l.maxFps):w(i[p[c].name].heatmap,h.duration,l.threshold,0);if(_.graph&&i.column.heatOn)for(c=m.length;c--;)m[c].style[i.column.heatOn]=x?w(i.column.heatmap,b[c],0,l.maxFps):w(i.column.heatmap,M[c],l.threshold,0)}if(_.graph)for(f=0;f<l.history;f++)m[f].style.height=(x?b[f]?Math.round(a/l.maxFps*Math.min(b[f],l.maxFps)):0:M[f]?Math.round(a/l.threshold*Math.min(M[f],l.threshold)):0)+"px"}function k(){l.interval<20?(n=G(k),E()):(n=setTimeout(k,l.interval),o=G(E))}function R(t){(t=t||window.event).preventDefault?(t.preventDefault(),t.stopPropagation()):(t.returnValue=!1,t.cancelBubble=!0),h.toggle()}function A(){l.toggleOn&&W(_.container,l.toggleOn,R,1),e.removeChild(_.container)}function O(){if(i=z.theme[l.theme],!(u=i.compiledHeatmaps||[]).length&&i.heatmaps.length){for(f=0;f<i.heatmaps.length;f++)for(u[f]=[],c=0;c<=d;c++)u[f][c]=(t=.33/d*c,e=i.heatmaps[f].saturation,r=i.heatmaps[f].lightness,a=o=n=void 0,0===(a=r<=.5?r*(1+e):r+e-r*e)?"#000":(t=a*((a-(e=2*r-a))/a)*((t*=6)-(r=Math.floor(t))),t=0===r||6===r?(n=a,o=e+t,e):1===r?(n=a-t,o=a,e):2===r?(o=a,(n=e)+t):3===r?(n=e,o=a-t,a):4===r?(n=e+t,o=e,a):(o=e,(n=a)-t),"#"+q(n)+q(o)+q(t)));i.compiledHeatmaps=u}var t,e,r,n,o,a}function S(){for(var t in _.container&&A(),O(),_.container=C(F("div"),i.container),_.count=_.container.appendChild(C(F("div"),i.count)),_.legend=_.container.appendChild(C(F("div"),i.legend)),_.graph=l.graph?_.container.appendChild(C(F("div"),i.graph)):0,p.length=0,_)_[t]&&i[t].heatOn&&p.push({name:t,el:_[t]});if(m.length=0,_.graph)for(_.graph.style.width=l.history*i.column.width+(l.history-1)*i.column.spacing+"px",c=0;c<l.history;c++)m[c]=_.graph.appendChild(C(F("div"),i.column)),m[c].style.position="absolute",m[c].style.bottom=0,m[c].style.right=c*i.column.width+c*i.column.spacing+"px",m[c].style.width=i.column.width+"px",m[c].style.height="0px";L(),P(),e.appendChild(_.container),_.graph&&(a=_.graph.clientHeight),l.toggleOn&&("click"===l.toggleOn&&(_.container.style.cursor="pointer"),W(_.container,l.toggleOn,R))}function L(){C(_.container,l)}h.options=l,h.fps=0,h.duration=0,h.isPaused=0,h.tickStart=function(){g=Y()},h.tick=function(){r=Y(),v+=(r-y-v)/l.smoothing,h.fps=1e3/v,h.duration=g<y?v:r-g,y=r},h.pause=function(){return n&&(h.isPaused=1,clearTimeout(n),N(n),N(o),n=o=0),h},h.resume=function(){return n||(h.isPaused=0,k()),h},h.set=function(t,e){return l[t]=e,x="fps"===l.show,-1!==I(t,U)&&S(),-1!==I(t,V)&&L(),h},h.showDuration=function(){return h.set("show","ms"),h},h.showFps=function(){return h.set("show","fps"),h},h.toggle=function(){return h.set("show",x?"ms":"fps"),h},h.hide=function(){return h.pause(),_.container.style.display="none",h},h.show=function(){return h.resume(),_.container.style.display="block",h},h.destroy=function(){h.pause(),A(),h.tick=h.tickStart=function(){}},S(),k()}z.extend=D,(window.FPSMeter=z).defaults={interval:100,smoothing:10,show:"fps",toggleOn:"click",decimals:1,maxFps:60,threshold:100,position:"absolute",zIndex:10,left:"5px",top:"5px",right:"auto",bottom:"auto",margin:"0 0 0 0",theme:"dark",heat:0,graph:0,history:20};var U=["toggleOn","theme","heat","graph","history"],V=["position","zIndex","left","top","right","bottom","margin"]}(window),function(t){"use strict";t.theme={};var e=t.theme.base={heatmaps:[],container:{heatOn:null,heatmap:null,padding:"5px",minWidth:"95px",height:"30px",lineHeight:"30px",textAlign:"right",textShadow:"none"},count:{heatOn:null,heatmap:null,position:"absolute",top:0,right:0,padding:"5px 10px",height:"30px",fontSize:"24px",fontFamily:"Consolas, Andale Mono, monospace",zIndex:2},legend:{heatOn:null,heatmap:null,position:"absolute",top:0,left:0,padding:"5px 10px",height:"30px",fontSize:"12px",lineHeight:"32px",fontFamily:"sans-serif",textAlign:"left",zIndex:2},graph:{heatOn:null,heatmap:null,position:"relative",boxSizing:"padding-box",MozBoxSizing:"padding-box",height:"100%",zIndex:1},column:{width:4,spacing:1,heatOn:null,heatmap:null}};t.theme.dark=t.extend({},e,{heatmaps:[{saturation:.8,lightness:.8}],container:{background:"#222",color:"#fff",border:"1px solid #1a1a1a",textShadow:"1px 1px 0 #222"},count:{heatOn:"color"},column:{background:"#3f3f3f"}}),t.theme.light=t.extend({},e,{heatmaps:[{saturation:.5,lightness:.5}],container:{color:"#666",background:"#fff",textShadow:"1px 1px 0 rgba(255,255,255,.5), -1px -1px 0 rgba(255,255,255,.5)",boxShadow:"0 0 0 1px rgba(0,0,0,.1)"},count:{heatOn:"color"},column:{background:"#eaeaea"}}),t.theme.colorful=t.extend({},e,{heatmaps:[{saturation:.5,lightness:.6}],container:{heatOn:"backgroundColor",background:"#888",color:"#fff",textShadow:"1px 1px 0 rgba(0,0,0,.2)",boxShadow:"0 0 0 1px rgba(0,0,0,.1)"},column:{background:"#777",backgroundColor:"rgba(0,0,0,.2)"}}),t.theme.transparent=t.extend({},e,{heatmaps:[{saturation:.8,lightness:.5}],container:{padding:0,color:"#fff",textShadow:"1px 1px 0 rgba(0,0,0,.5)"},count:{padding:"0 5px",height:"40px",lineHeight:"40px"},legend:{padding:"0 5px",height:"40px",lineHeight:"42px"},graph:{height:"40px"},column:{width:5,background:"#999",heatOn:"backgroundColor",opacity:.5}})}((window,FPSMeter))},{}],2:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.setMatrixArrayType=function(t){r.ARRAY_TYPE=o=t},r.toRadian=function(t){return t*i},r.equals=function(t,e){return Math.abs(t-e)<=n*Math.max(1,Math.abs(t),Math.abs(e))},r.RANDOM=r.ARRAY_TYPE=r.EPSILON=void 0;var n=1e-6;r.EPSILON=n;var o="undefined"!=typeof Float32Array?Float32Array:Array;r.ARRAY_TYPE=o;var a=Math.random;r.RANDOM=a;var i=Math.PI/180;Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)})},{}],3:[function(t,e,r){"use strict";function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(r,"__esModule",{value:!0}),r.vec4=r.vec3=r.vec2=r.quat2=r.quat=r.mat4=r.mat3=r.mat2d=r.mat2=r.glMatrix=void 0;var n=o(t("./common.js"));r.glMatrix=n;n=o(t("./mat2.js"));r.mat2=n;n=o(t("./mat2d.js"));r.mat2d=n;n=o(t("./mat3.js"));r.mat3=n;n=o(t("./mat4.js"));r.mat4=n;n=o(t("./quat.js"));r.quat=n;n=o(t("./quat2.js"));r.quat2=n;n=o(t("./vec2.js"));r.vec2=n;n=o(t("./vec3.js"));r.vec3=n;t=o(t("./vec4.js"));function u(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return u=function(){return t},t}function o(t){if(t&&t.__esModule)return t;if(null===t||"object"!==i(t)&&"function"!=typeof t)return{default:t};var e=u();if(e&&e.has(t))return e.get(t);var r,n,o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&((n=a?Object.getOwnPropertyDescriptor(t,r):null)&&(n.get||n.set)?Object.defineProperty(o,r,n):o[r]=t[r]);return o.default=t,e&&e.set(t,o),o}r.vec4=t},{"./common.js":2,"./mat2.js":4,"./mat2d.js":5,"./mat3.js":6,"./mat4.js":7,"./quat.js":8,"./quat2.js":9,"./vec2.js":10,"./vec3.js":11,"./vec4.js":12}],4:[function(t,e,r){"use strict";function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(r,"__esModule",{value:!0}),r.create=function(){var t=new s.ARRAY_TYPE(4);s.ARRAY_TYPE!=Float32Array&&(t[1]=0,t[2]=0);return t[0]=1,t[3]=1,t},r.clone=function(t){var e=new s.ARRAY_TYPE(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},r.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},r.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},r.fromValues=function(t,e,r,n){var o=new s.ARRAY_TYPE(4);return o[0]=t,o[1]=e,o[2]=r,o[3]=n,o},r.set=function(t,e,r,n,o){return t[0]=e,t[1]=r,t[2]=n,t[3]=o,t},r.transpose=function(t,e){{var r;t===e?(r=e[1],t[1]=e[2],t[2]=r):(t[0]=e[0],t[1]=e[2],t[2]=e[1],t[3]=e[3])}return t},r.invert=function(t,e){var r=e[0],n=e[1],o=e[2],a=e[3],e=r*a-o*n;return e?(e=1/e,t[0]=a*e,t[1]=-n*e,t[2]=-o*e,t[3]=r*e,t):null},r.adjoint=function(t,e){var r=e[0];return t[0]=e[3],t[1]=-e[1],t[2]=-e[2],t[3]=r,t},r.determinant=function(t){return t[0]*t[3]-t[2]*t[1]},r.multiply=n,r.rotate=function(t,e,r){var n=e[0],o=e[1],a=e[2],i=e[3],e=Math.sin(r),r=Math.cos(r);return t[0]=n*r+a*e,t[1]=o*r+i*e,t[2]=n*-e+a*r,t[3]=o*-e+i*r,t},r.scale=function(t,e,r){var n=e[0],o=e[1],a=e[2],i=e[3],e=r[0],r=r[1];return t[0]=n*e,t[1]=o*e,t[2]=a*r,t[3]=i*r,t},r.fromRotation=function(t,e){var r=Math.sin(e),e=Math.cos(e);return t[0]=e,t[1]=r,t[2]=-r,t[3]=e,t},r.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t},r.str=function(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},r.frob=function(t){return Math.hypot(t[0],t[1],t[2],t[3])},r.LDU=function(t,e,r,n){return t[2]=n[2]/n[0],r[0]=n[0],r[1]=n[1],r[3]=n[3]-t[2]*r[1],[t,e,r]},r.add=function(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t},r.subtract=o,r.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]},r.equals=function(t,e){var r=t[0],n=t[1],o=t[2],a=t[3],i=e[0],u=e[1],t=e[2],e=e[3];return Math.abs(r-i)<=s.EPSILON*Math.max(1,Math.abs(r),Math.abs(i))&&Math.abs(n-u)<=s.EPSILON*Math.max(1,Math.abs(n),Math.abs(u))&&Math.abs(o-t)<=s.EPSILON*Math.max(1,Math.abs(o),Math.abs(t))&&Math.abs(a-e)<=s.EPSILON*Math.max(1,Math.abs(a),Math.abs(e))},r.multiplyScalar=function(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t},r.multiplyScalarAndAdd=function(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t},r.sub=r.mul=void 0;var s=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==i(t)&&"function"!=typeof t)return{default:t};var e=u();if(e&&e.has(t))return e.get(t);var r,n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(r in t){var a;Object.prototype.hasOwnProperty.call(t,r)&&((a=o?Object.getOwnPropertyDescriptor(t,r):null)&&(a.get||a.set)?Object.defineProperty(n,r,a):n[r]=t[r])}n.default=t,e&&e.set(t,n);return n}(t("./common.js"));function u(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return u=function(){return t},t}function n(t,e,r){var n=e[0],o=e[1],a=e[2],i=e[3],u=r[0],s=r[1],e=r[2],r=r[3];return t[0]=n*u+a*s,t[1]=o*u+i*s,t[2]=n*e+a*r,t[3]=o*e+i*r,t}function o(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t}r.mul=n,r.sub=o},{"./common.js":2}],5:[function(t,e,r){"use strict";function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(r,"__esModule",{value:!0}),r.create=function(){var t=new l.ARRAY_TYPE(6);l.ARRAY_TYPE!=Float32Array&&(t[1]=0,t[2]=0,t[4]=0,t[5]=0);return t[0]=1,t[3]=1,t},r.clone=function(t){var e=new l.ARRAY_TYPE(6);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e},r.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t},r.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},r.fromValues=function(t,e,r,n,o,a){var i=new l.ARRAY_TYPE(6);return i[0]=t,i[1]=e,i[2]=r,i[3]=n,i[4]=o,i[5]=a,i},r.set=function(t,e,r,n,o,a,i){return t[0]=e,t[1]=r,t[2]=n,t[3]=o,t[4]=a,t[5]=i,t},r.invert=function(t,e){var r=e[0],n=e[1],o=e[2],a=e[3],i=e[4],u=e[5],e=r*a-n*o;return e?(e=1/e,t[0]=a*e,t[1]=-n*e,t[2]=-o*e,t[3]=r*e,t[4]=(o*u-a*i)*e,t[5]=(n*i-r*u)*e,t):null},r.determinant=function(t){return t[0]*t[3]-t[1]*t[2]},r.multiply=n,r.rotate=function(t,e,r){var n=e[0],o=e[1],a=e[2],i=e[3],u=e[4],s=e[5],e=Math.sin(r),r=Math.cos(r);return t[0]=n*r+a*e,t[1]=o*r+i*e,t[2]=n*-e+a*r,t[3]=o*-e+i*r,t[4]=u,t[5]=s,t},r.scale=function(t,e,r){var n=e[0],o=e[1],a=e[2],i=e[3],u=e[4],s=e[5],e=r[0],r=r[1];return t[0]=n*e,t[1]=o*e,t[2]=a*r,t[3]=i*r,t[4]=u,t[5]=s,t},r.translate=function(t,e,r){var n=e[0],o=e[1],a=e[2],i=e[3],u=e[4],s=e[5],e=r[0],r=r[1];return t[0]=n,t[1]=o,t[2]=a,t[3]=i,t[4]=n*e+a*r+u,t[5]=o*e+i*r+s,t},r.fromRotation=function(t,e){var r=Math.sin(e),e=Math.cos(e);return t[0]=e,t[1]=r,t[2]=-r,t[3]=e,t[4]=0,t[5]=0,t},r.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t[4]=0,t[5]=0,t},r.fromTranslation=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=e[0],t[5]=e[1],t},r.str=function(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"},r.frob=function(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],1)},r.add=function(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t[4]=e[4]+r[4],t[5]=e[5]+r[5],t},r.subtract=o,r.multiplyScalar=function(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*r,t[5]=e[5]*r,t},r.multiplyScalarAndAdd=function(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t[4]=e[4]+r[4]*n,t[5]=e[5]+r[5]*n,t},r.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]},r.equals=function(t,e){var r=t[0],n=t[1],o=t[2],a=t[3],i=t[4],u=t[5],s=e[0],c=e[1],f=e[2],h=e[3],t=e[4],e=e[5];return Math.abs(r-s)<=l.EPSILON*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(n-c)<=l.EPSILON*Math.max(1,Math.abs(n),Math.abs(c))&&Math.abs(o-f)<=l.EPSILON*Math.max(1,Math.abs(o),Math.abs(f))&&Math.abs(a-h)<=l.EPSILON*Math.max(1,Math.abs(a),Math.abs(h))&&Math.abs(i-t)<=l.EPSILON*Math.max(1,Math.abs(i),Math.abs(t))&&Math.abs(u-e)<=l.EPSILON*Math.max(1,Math.abs(u),Math.abs(e))},r.sub=r.mul=void 0;var l=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==i(t)&&"function"!=typeof t)return{default:t};var e=u();if(e&&e.has(t))return e.get(t);var r,n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(r in t){var a;Object.prototype.hasOwnProperty.call(t,r)&&((a=o?Object.getOwnPropertyDescriptor(t,r):null)&&(a.get||a.set)?Object.defineProperty(n,r,a):n[r]=t[r])}n.default=t,e&&e.set(t,n);return n}(t("./common.js"));function u(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return u=function(){return t},t}function n(t,e,r){var n=e[0],o=e[1],a=e[2],i=e[3],u=e[4],s=e[5],c=r[0],f=r[1],h=r[2],l=r[3],e=r[4],r=r[5];return t[0]=n*c+a*f,t[1]=o*c+i*f,t[2]=n*h+a*l,t[3]=o*h+i*l,t[4]=n*e+a*r+u,t[5]=o*e+i*r+s,t}function o(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t[4]=e[4]-r[4],t[5]=e[5]-r[5],t}r.mul=n,r.sub=o},{"./common.js":2}],6:[function(t,e,r){"use strict";function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(r,"__esModule",{value:!0}),r.create=function(){var t=new g.ARRAY_TYPE(9);g.ARRAY_TYPE!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0);return t[0]=1,t[4]=1,t[8]=1,t},r.fromMat4=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t},r.clone=function(t){var e=new g.ARRAY_TYPE(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e},r.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},r.fromValues=function(t,e,r,n,o,a,i,u,s){var c=new g.ARRAY_TYPE(9);return c[0]=t,c[1]=e,c[2]=r,c[3]=n,c[4]=o,c[5]=a,c[6]=i,c[7]=u,c[8]=s,c},r.set=function(t,e,r,n,o,a,i,u,s,c){return t[0]=e,t[1]=r,t[2]=n,t[3]=o,t[4]=a,t[5]=i,t[6]=u,t[7]=s,t[8]=c,t},r.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},r.transpose=function(t,e){{var r,n,o;t===e?(r=e[1],n=e[2],o=e[5],t[1]=e[3],t[2]=e[6],t[3]=r,t[5]=e[7],t[6]=n,t[7]=o):(t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8])}return t},r.invert=function(t,e){var r=e[0],n=e[1],o=e[2],a=e[3],i=e[4],u=e[5],s=e[6],c=e[7],f=e[8],h=f*i-u*c,l=-f*a+u*s,_=c*a-i*s,e=r*h+n*l+o*_;return e?(e=1/e,t[0]=h*e,t[1]=(-f*n+o*c)*e,t[2]=(u*n-o*i)*e,t[3]=l*e,t[4]=(f*r-o*s)*e,t[5]=(-u*r+o*a)*e,t[6]=_*e,t[7]=(-c*r+n*s)*e,t[8]=(i*r-n*a)*e,t):null},r.adjoint=function(t,e){var r=e[0],n=e[1],o=e[2],a=e[3],i=e[4],u=e[5],s=e[6],c=e[7],e=e[8];return t[0]=i*e-u*c,t[1]=o*c-n*e,t[2]=n*u-o*i,t[3]=u*s-a*e,t[4]=r*e-o*s,t[5]=o*a-r*u,t[6]=a*c-i*s,t[7]=n*s-r*c,t[8]=r*i-n*a,t},r.determinant=function(t){var e=t[0],r=t[1],n=t[2],o=t[3],a=t[4],i=t[5],u=t[6],s=t[7],t=t[8];return e*(t*a-i*s)+r*(-t*o+i*u)+n*(s*o-a*u)},r.multiply=n,r.translate=function(t,e,r){var n=e[0],o=e[1],a=e[2],i=e[3],u=e[4],s=e[5],c=e[6],f=e[7],h=e[8],e=r[0],r=r[1];return t[0]=n,t[1]=o,t[2]=a,t[3]=i,t[4]=u,t[5]=s,t[6]=e*n+r*i+c,t[7]=e*o+r*u+f,t[8]=e*a+r*s+h,t},r.rotate=function(t,e,r){var n=e[0],o=e[1],a=e[2],i=e[3],u=e[4],s=e[5],c=e[6],f=e[7],h=e[8],e=Math.sin(r),r=Math.cos(r);return t[0]=r*n+e*i,t[1]=r*o+e*u,t[2]=r*a+e*s,t[3]=r*i-e*n,t[4]=r*u-e*o,t[5]=r*s-e*a,t[6]=c,t[7]=f,t[8]=h,t},r.scale=function(t,e,r){var n=r[0],r=r[1];return t[0]=n*e[0],t[1]=n*e[1],t[2]=n*e[2],t[3]=r*e[3],t[4]=r*e[4],t[5]=r*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},r.fromTranslation=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t},r.fromRotation=function(t,e){var r=Math.sin(e),e=Math.cos(e);return t[0]=e,t[1]=r,t[2]=0,t[3]=-r,t[4]=e,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},r.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},r.fromMat2d=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t},r.fromQuat=function(t,e){var r=e[0],n=e[1],o=e[2],a=e[3],i=r+r,u=n+n,s=o+o,c=r*i,f=n*i,e=n*u,r=o*i,n=o*u,o=o*s,i=a*i,u=a*u,s=a*s;return t[0]=1-e-o,t[3]=f-s,t[6]=r+u,t[1]=f+s,t[4]=1-c-o,t[7]=n-i,t[2]=r-u,t[5]=n+i,t[8]=1-c-e,t},r.normalFromMat4=function(t,e){var r=e[0],n=e[1],o=e[2],a=e[3],i=e[4],u=e[5],s=e[6],c=e[7],f=e[8],h=e[9],l=e[10],_=e[11],m=e[12],d=e[13],p=e[14],v=e[15],g=r*u-n*i,y=r*s-o*i,b=r*c-a*i,M=n*s-o*u,x=n*c-a*u,w=o*c-a*s,P=f*d-h*m,E=f*p-l*m,e=f*v-_*m,f=h*p-l*d,h=h*v-_*d,l=l*v-_*p,_=g*l-y*h+b*f+M*e-x*E+w*P;return _?(_=1/_,t[0]=(u*l-s*h+c*f)*_,t[1]=(s*e-i*l-c*E)*_,t[2]=(i*h-u*e+c*P)*_,t[3]=(o*h-n*l-a*f)*_,t[4]=(r*l-o*e+a*E)*_,t[5]=(n*e-r*h-a*P)*_,t[6]=(d*w-p*x+v*M)*_,t[7]=(p*b-m*w-v*y)*_,t[8]=(m*x-d*b+v*g)*_,t):null},r.projection=function(t,e,r){return t[0]=2/e,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/r,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t},r.str=function(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"},r.frob=function(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8])},r.add=function(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t[4]=e[4]+r[4],t[5]=e[5]+r[5],t[6]=e[6]+r[6],t[7]=e[7]+r[7],t[8]=e[8]+r[8],t},r.subtract=o,r.multiplyScalar=function(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t[8]=e[8]*r,t},r.multiplyScalarAndAdd=function(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t[4]=e[4]+r[4]*n,t[5]=e[5]+r[5]*n,t[6]=e[6]+r[6]*n,t[7]=e[7]+r[7]*n,t[8]=e[8]+r[8]*n,t},r.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]},r.equals=function(t,e){var r=t[0],n=t[1],o=t[2],a=t[3],i=t[4],u=t[5],s=t[6],c=t[7],f=t[8],h=e[0],l=e[1],_=e[2],m=e[3],d=e[4],p=e[5],v=e[6],t=e[7],e=e[8];return Math.abs(r-h)<=g.EPSILON*Math.max(1,Math.abs(r),Math.abs(h))&&Math.abs(n-l)<=g.EPSILON*Math.max(1,Math.abs(n),Math.abs(l))&&Math.abs(o-_)<=g.EPSILON*Math.max(1,Math.abs(o),Math.abs(_))&&Math.abs(a-m)<=g.EPSILON*Math.max(1,Math.abs(a),Math.abs(m))&&Math.abs(i-d)<=g.EPSILON*Math.max(1,Math.abs(i),Math.abs(d))&&Math.abs(u-p)<=g.EPSILON*Math.max(1,Math.abs(u),Math.abs(p))&&Math.abs(s-v)<=g.EPSILON*Math.max(1,Math.abs(s),Math.abs(v))&&Math.abs(c-t)<=g.EPSILON*Math.max(1,Math.abs(c),Math.abs(t))&&Math.abs(f-e)<=g.EPSILON*Math.max(1,Math.abs(f),Math.abs(e))},r.sub=r.mul=void 0;var g=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==i(t)&&"function"!=typeof t)return{default:t};var e=u();if(e&&e.has(t))return e.get(t);var r,n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(r in t){var a;Object.prototype.hasOwnProperty.call(t,r)&&((a=o?Object.getOwnPropertyDescriptor(t,r):null)&&(a.get||a.set)?Object.defineProperty(n,r,a):n[r]=t[r])}n.default=t,e&&e.set(t,n);return n}(t("./common.js"));function u(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return u=function(){return t},t}function n(t,e,r){var n=e[0],o=e[1],a=e[2],i=e[3],u=e[4],s=e[5],c=e[6],f=e[7],h=e[8],l=r[0],_=r[1],m=r[2],d=r[3],p=r[4],v=r[5],g=r[6],e=r[7],r=r[8];return t[0]=l*n+_*i+m*c,t[1]=l*o+_*u+m*f,t[2]=l*a+_*s+m*h,t[3]=d*n+p*i+v*c,t[4]=d*o+p*u+v*f,t[5]=d*a+p*s+v*h,t[6]=g*n+e*i+r*c,t[7]=g*o+e*u+r*f,t[8]=g*a+e*s+r*h,t}function o(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t[4]=e[4]-r[4],t[5]=e[5]-r[5],t[6]=e[6]-r[6],t[7]=e[7]-r[7],t[8]=e[8]-r[8],t}r.mul=n,r.sub=o},{"./common.js":2}],7:[function(t,e,r){"use strict";function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(r,"__esModule",{value:!0}),r.create=function(){var t=new T.ARRAY_TYPE(16);T.ARRAY_TYPE!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0);return t[0]=1,t[5]=1,t[10]=1,t[15]=1,t},r.clone=function(t){var e=new T.ARRAY_TYPE(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},r.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},r.fromValues=function(t,e,r,n,o,a,i,u,s,c,f,h,l,_,m,d){var p=new T.ARRAY_TYPE(16);return p[0]=t,p[1]=e,p[2]=r,p[3]=n,p[4]=o,p[5]=a,p[6]=i,p[7]=u,p[8]=s,p[9]=c,p[10]=f,p[11]=h,p[12]=l,p[13]=_,p[14]=m,p[15]=d,p},r.set=function(t,e,r,n,o,a,i,u,s,c,f,h,l,_,m,d,p){return t[0]=e,t[1]=r,t[2]=n,t[3]=o,t[4]=a,t[5]=i,t[6]=u,t[7]=s,t[8]=c,t[9]=f,t[10]=h,t[11]=l,t[12]=_,t[13]=m,t[14]=d,t[15]=p,t},r.identity=m,r.transpose=function(t,e){{var r,n,o,a,i,u;t===e?(r=e[1],n=e[2],o=e[3],a=e[6],i=e[7],u=e[11],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=r,t[6]=e[9],t[7]=e[13],t[8]=n,t[9]=a,t[11]=e[14],t[12]=o,t[13]=i,t[14]=u):(t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15])}return t},r.invert=function(t,e){var r=e[0],n=e[1],o=e[2],a=e[3],i=e[4],u=e[5],s=e[6],c=e[7],f=e[8],h=e[9],l=e[10],_=e[11],m=e[12],d=e[13],p=e[14],v=e[15],g=r*u-n*i,y=r*s-o*i,b=r*c-a*i,M=n*s-o*u,x=n*c-a*u,w=o*c-a*s,P=f*d-h*m,E=f*p-l*m,k=f*v-_*m,R=h*p-l*d,A=h*v-_*d,O=l*v-_*p,e=g*O-y*A+b*R+M*k-x*E+w*P;return e?(e=1/e,t[0]=(u*O-s*A+c*R)*e,t[1]=(o*A-n*O-a*R)*e,t[2]=(d*w-p*x+v*M)*e,t[3]=(l*x-h*w-_*M)*e,t[4]=(s*k-i*O-c*E)*e,t[5]=(r*O-o*k+a*E)*e,t[6]=(p*b-m*w-v*y)*e,t[7]=(f*w-l*b+_*y)*e,t[8]=(i*A-u*k+c*P)*e,t[9]=(n*k-r*A-a*P)*e,t[10]=(m*x-d*b+v*g)*e,t[11]=(h*b-f*x-_*g)*e,t[12]=(u*E-i*R-s*P)*e,t[13]=(r*R-n*E+o*P)*e,t[14]=(d*y-m*M-p*g)*e,t[15]=(f*M-h*y+l*g)*e,t):null},r.adjoint=function(t,e){var r=e[0],n=e[1],o=e[2],a=e[3],i=e[4],u=e[5],s=e[6],c=e[7],f=e[8],h=e[9],l=e[10],_=e[11],m=e[12],d=e[13],p=e[14],e=e[15];return t[0]=u*(l*e-_*p)-h*(s*e-c*p)+d*(s*_-c*l),t[1]=-(n*(l*e-_*p)-h*(o*e-a*p)+d*(o*_-a*l)),t[2]=n*(s*e-c*p)-u*(o*e-a*p)+d*(o*c-a*s),t[3]=-(n*(s*_-c*l)-u*(o*_-a*l)+h*(o*c-a*s)),t[4]=-(i*(l*e-_*p)-f*(s*e-c*p)+m*(s*_-c*l)),t[5]=r*(l*e-_*p)-f*(o*e-a*p)+m*(o*_-a*l),t[6]=-(r*(s*e-c*p)-i*(o*e-a*p)+m*(o*c-a*s)),t[7]=r*(s*_-c*l)-i*(o*_-a*l)+f*(o*c-a*s),t[8]=i*(h*e-_*d)-f*(u*e-c*d)+m*(u*_-c*h),t[9]=-(r*(h*e-_*d)-f*(n*e-a*d)+m*(n*_-a*h)),t[10]=r*(u*e-c*d)-i*(n*e-a*d)+m*(n*c-a*u),t[11]=-(r*(u*_-c*h)-i*(n*_-a*h)+f*(n*c-a*u)),t[12]=-(i*(h*p-l*d)-f*(u*p-s*d)+m*(u*l-s*h)),t[13]=r*(h*p-l*d)-f*(n*p-o*d)+m*(n*l-o*h),t[14]=-(r*(u*p-s*d)-i*(n*p-o*d)+m*(n*s-o*u)),t[15]=r*(u*l-s*h)-i*(n*l-o*h)+f*(n*s-o*u),t},r.determinant=function(t){var e=t[0],r=t[1],n=t[2],o=t[3],a=t[4],i=t[5],u=t[6],s=t[7],c=t[8],f=t[9],h=t[10],l=t[11],_=t[12],m=t[13],d=t[14],t=t[15];return(e*i-r*a)*(h*t-l*d)-(e*u-n*a)*(f*t-l*m)+(e*s-o*a)*(f*d-h*m)+(r*u-n*i)*(c*t-l*_)-(r*s-o*i)*(c*d-h*_)+(n*s-o*u)*(c*m-f*_)},r.multiply=n,r.translate=function(t,e,r){var n,o,a,i,u,s,c,f,h,l,_,m=r[0],d=r[1],p=r[2];e===t?(t[12]=e[0]*m+e[4]*d+e[8]*p+e[12],t[13]=e[1]*m+e[5]*d+e[9]*p+e[13],t[14]=e[2]*m+e[6]*d+e[10]*p+e[14],t[15]=e[3]*m+e[7]*d+e[11]*p+e[15]):(n=e[0],o=e[1],a=e[2],i=e[3],u=e[4],s=e[5],c=e[6],f=e[7],h=e[8],l=e[9],_=e[10],r=e[11],t[0]=n,t[1]=o,t[2]=a,t[3]=i,t[4]=u,t[5]=s,t[6]=c,t[7]=f,t[8]=h,t[9]=l,t[10]=_,t[11]=r,t[12]=n*m+u*d+h*p+e[12],t[13]=o*m+s*d+l*p+e[13],t[14]=a*m+c*d+_*p+e[14],t[15]=i*m+f*d+r*p+e[15]);return t},r.scale=function(t,e,r){var n=r[0],o=r[1],r=r[2];return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*o,t[5]=e[5]*o,t[6]=e[6]*o,t[7]=e[7]*o,t[8]=e[8]*r,t[9]=e[9]*r,t[10]=e[10]*r,t[11]=e[11]*r,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},r.rotate=function(t,e,r,n){var o,a,i,u,s,c,f,h,l,_,m,d,p,v,g,y,b,M,x,w=n[0],P=n[1],E=n[2],k=Math.hypot(w,P,E);if(k<T.EPSILON)return null;w*=k=1/k,P*=k,E*=k,M=Math.sin(r),x=Math.cos(r),o=1-x,a=e[0],i=e[1],u=e[2],s=e[3],c=e[4],f=e[5],h=e[6],l=e[7],_=e[8],m=e[9],d=e[10],p=e[11],v=w*w*o+x,g=P*w*o+E*M,y=E*w*o-P*M,b=w*P*o-E*M,n=P*P*o+x,k=E*P*o+w*M,r=w*E*o+P*M,M=P*E*o-w*M,x=E*E*o+x,t[0]=a*v+c*g+_*y,t[1]=i*v+f*g+m*y,t[2]=u*v+h*g+d*y,t[3]=s*v+l*g+p*y,t[4]=a*b+c*n+_*k,t[5]=i*b+f*n+m*k,t[6]=u*b+h*n+d*k,t[7]=s*b+l*n+p*k,t[8]=a*r+c*M+_*x,t[9]=i*r+f*M+m*x,t[10]=u*r+h*M+d*x,t[11]=s*r+l*M+p*x,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]);return t},r.rotateX=function(t,e,r){var n=Math.sin(r),o=Math.cos(r),a=e[4],i=e[5],u=e[6],s=e[7],c=e[8],f=e[9],h=e[10],r=e[11];e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]);return t[4]=a*o+c*n,t[5]=i*o+f*n,t[6]=u*o+h*n,t[7]=s*o+r*n,t[8]=c*o-a*n,t[9]=f*o-i*n,t[10]=h*o-u*n,t[11]=r*o-s*n,t},r.rotateY=function(t,e,r){var n=Math.sin(r),o=Math.cos(r),a=e[0],i=e[1],u=e[2],s=e[3],c=e[8],f=e[9],h=e[10],r=e[11];e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]);return t[0]=a*o-c*n,t[1]=i*o-f*n,t[2]=u*o-h*n,t[3]=s*o-r*n,t[8]=a*n+c*o,t[9]=i*n+f*o,t[10]=u*n+h*o,t[11]=s*n+r*o,t},r.rotateZ=function(t,e,r){var n=Math.sin(r),o=Math.cos(r),a=e[0],i=e[1],u=e[2],s=e[3],c=e[4],f=e[5],h=e[6],r=e[7];e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]);return t[0]=a*o+c*n,t[1]=i*o+f*n,t[2]=u*o+h*n,t[3]=s*o+r*n,t[4]=c*o-a*n,t[5]=f*o-i*n,t[6]=h*o-u*n,t[7]=r*o-s*n,t},r.fromTranslation=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t},r.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},r.fromRotation=function(t,e,r){var n=r[0],o=r[1],a=r[2],i=Math.hypot(n,o,a);if(i<T.EPSILON)return null;return n*=i=1/i,o*=i,a*=i,r=Math.sin(e),i=Math.cos(e),e=1-i,t[0]=n*n*e+i,t[1]=o*n*e+a*r,t[2]=a*n*e-o*r,t[3]=0,t[4]=n*o*e-a*r,t[5]=o*o*e+i,t[6]=a*o*e+n*r,t[7]=0,t[8]=n*a*e+o*r,t[9]=o*a*e-n*r,t[10]=a*a*e+i,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},r.fromXRotation=function(t,e){var r=Math.sin(e),e=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e,t[6]=r,t[7]=0,t[8]=0,t[9]=-r,t[10]=e,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},r.fromYRotation=function(t,e){var r=Math.sin(e),e=Math.cos(e);return t[0]=e,t[1]=0,t[2]=-r,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=r,t[9]=0,t[10]=e,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},r.fromZRotation=function(t,e){var r=Math.sin(e),e=Math.cos(e);return t[0]=e,t[1]=r,t[2]=0,t[3]=0,t[4]=-r,t[5]=e,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},r.fromRotationTranslation=l,r.fromQuat2=function(t,e){var r=new T.ARRAY_TYPE(3),n=-e[0],o=-e[1],a=-e[2],i=e[3],u=e[4],s=e[5],c=e[6],f=e[7],h=n*n+o*o+a*a+i*i;0<h?(r[0]=2*(u*i+f*n+s*a-c*o)/h,r[1]=2*(s*i+f*o+c*n-u*a)/h,r[2]=2*(c*i+f*a+u*o-s*n)/h):(r[0]=2*(u*i+f*n+s*a-c*o),r[1]=2*(s*i+f*o+c*n-u*a),r[2]=2*(c*i+f*a+u*o-s*n));return l(t,e,r),t},r.getTranslation=function(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t},r.getScaling=_,r.getRotation=function(t,e){var r=new T.ARRAY_TYPE(3);_(r,e);var n=1/r[0],o=1/r[1],a=1/r[2],i=e[0]*n,u=e[1]*o,s=e[2]*a,c=e[4]*n,f=e[5]*o,h=e[6]*a,r=e[8]*n,n=e[9]*o,o=e[10]*a,e=i+f+o,a=0;0<e?(a=2*Math.sqrt(1+e),t[3]=.25*a,t[0]=(h-n)/a,t[1]=(r-s)/a,t[2]=(u-c)/a):f<i&&o<i?(a=2*Math.sqrt(1+i-f-o),t[3]=(h-n)/a,t[0]=.25*a,t[1]=(u+c)/a,t[2]=(r+s)/a):o<f?(a=2*Math.sqrt(1+f-i-o),t[3]=(r-s)/a,t[0]=(u+c)/a,t[1]=.25*a,t[2]=(h+n)/a):(a=2*Math.sqrt(1+o-i-f),t[3]=(u-c)/a,t[0]=(r+s)/a,t[1]=(h+n)/a,t[2]=.25*a);return t},r.fromRotationTranslationScale=function(t,e,r,n){var o=e[0],a=e[1],i=e[2],u=e[3],s=o+o,c=a+a,f=i+i,h=o*s,l=o*c,_=o*f,e=a*c,o=a*f,a=i*f,i=u*s,s=u*c,c=u*f,u=n[0],f=n[1],n=n[2];return t[0]=(1-(e+a))*u,t[1]=(l+c)*u,t[2]=(_-s)*u,t[3]=0,t[4]=(l-c)*f,t[5]=(1-(h+a))*f,t[6]=(o+i)*f,t[7]=0,t[8]=(_+s)*n,t[9]=(o-i)*n,t[10]=(1-(h+e))*n,t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t},r.fromRotationTranslationScaleOrigin=function(t,e,r,n,o){var a=e[0],i=e[1],u=e[2],s=e[3],c=a+a,f=i+i,h=u+u,l=a*c,_=a*f,m=a*h,d=i*f,p=i*h,v=u*h,g=s*c,e=s*f,a=s*h,i=n[0],u=n[1],c=n[2],f=o[0],s=o[1],h=o[2],n=(1-(d+v))*i,o=(_+a)*i,i=(m-e)*i,a=(_-a)*u,v=(1-(l+v))*u,u=(p+g)*u,e=(m+e)*c,g=(p-g)*c,c=(1-(l+d))*c;return t[0]=n,t[1]=o,t[2]=i,t[3]=0,t[4]=a,t[5]=v,t[6]=u,t[7]=0,t[8]=e,t[9]=g,t[10]=c,t[11]=0,t[12]=r[0]+f-(n*f+a*s+e*h),t[13]=r[1]+s-(o*f+v*s+g*h),t[14]=r[2]+h-(i*f+u*s+c*h),t[15]=1,t},r.fromQuat=function(t,e){var r=e[0],n=e[1],o=e[2],a=e[3],i=r+r,u=n+n,s=o+o,c=r*i,f=n*i,e=n*u,r=o*i,n=o*u,o=o*s,i=a*i,u=a*u,s=a*s;return t[0]=1-e-o,t[1]=f+s,t[2]=r-u,t[3]=0,t[4]=f-s,t[5]=1-c-o,t[6]=n+i,t[7]=0,t[8]=r+u,t[9]=n-i,t[10]=1-c-e,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},r.frustum=function(t,e,r,n,o,a,i){var u=1/(r-e),s=1/(o-n),c=1/(a-i);return t[0]=2*a*u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*a*s,t[6]=0,t[7]=0,t[8]=(r+e)*u,t[9]=(o+n)*s,t[10]=(i+a)*c,t[11]=-1,t[12]=0,t[13]=0,t[14]=i*a*2*c,t[15]=0,t},r.perspective=function(t,e,r,n,o){e=1/Math.tan(e/2);t[0]=e/r,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=o&&o!==1/0?(e=1/(n-o),t[10]=(o+n)*e,t[14]=2*o*n*e):(t[10]=-1,t[14]=-2*n);return t},r.perspectiveFromFieldOfView=function(t,e,r,n){var o=Math.tan(e.upDegrees*Math.PI/180),a=Math.tan(e.downDegrees*Math.PI/180),i=Math.tan(e.leftDegrees*Math.PI/180),u=Math.tan(e.rightDegrees*Math.PI/180),s=2/(i+u),e=2/(o+a);return t[0]=s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e,t[6]=0,t[7]=0,t[8]=-(i-u)*s*.5,t[9]=(o-a)*e*.5,t[10]=n/(r-n),t[11]=-1,t[12]=0,t[13]=0,t[14]=n*r/(r-n),t[15]=0,t},r.ortho=function(t,e,r,n,o,a,i){var u=1/(e-r),s=1/(n-o),c=1/(a-i);return t[0]=-2*u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(e+r)*u,t[13]=(o+n)*s,t[14]=(i+a)*c,t[15]=1,t},r.lookAt=function(t,e,r,n){var o,a=e[0],i=e[1],u=e[2],s=n[0],c=n[1],f=n[2],h=r[0],l=r[1],_=r[2];if(Math.abs(a-h)<T.EPSILON&&Math.abs(i-l)<T.EPSILON&&Math.abs(u-_)<T.EPSILON)return m(t);o=a-h,e=i-l,n=u-_,r=1/Math.hypot(o,e,n),h=c*(n*=r)-f*(e*=r),l=f*(o*=r)-s*n,_=s*e-c*o,(r=Math.hypot(h,l,_))?(h*=r=1/r,l*=r,_*=r):_=l=h=0;f=e*_-n*l,s=n*h-o*_,c=o*l-e*h,(r=Math.hypot(f,s,c))?(f*=r=1/r,s*=r,c*=r):c=s=f=0;return t[0]=h,t[1]=f,t[2]=o,t[3]=0,t[4]=l,t[5]=s,t[6]=e,t[7]=0,t[8]=_,t[9]=c,t[10]=n,t[11]=0,t[12]=-(h*a+l*i+_*u),t[13]=-(f*a+s*i+c*u),t[14]=-(o*a+e*i+n*u),t[15]=1,t},r.targetTo=function(t,e,r,n){var o=e[0],a=e[1],i=e[2],u=n[0],s=n[1],c=n[2],f=o-r[0],h=a-r[1],e=i-r[2],n=f*f+h*h+e*e;0<n&&(n=1/Math.sqrt(n),f*=n,h*=n,e*=n);r=s*e-c*h,c=c*f-u*e,s=u*h-s*f;0<(n=r*r+c*c+s*s)&&(n=1/Math.sqrt(n),r*=n,c*=n,s*=n);return t[0]=r,t[1]=c,t[2]=s,t[3]=0,t[4]=h*s-e*c,t[5]=e*r-f*s,t[6]=f*c-h*r,t[7]=0,t[8]=f,t[9]=h,t[10]=e,t[11]=0,t[12]=o,t[13]=a,t[14]=i,t[15]=1,t},r.str=function(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"},r.frob=function(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])},r.add=function(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t[4]=e[4]+r[4],t[5]=e[5]+r[5],t[6]=e[6]+r[6],t[7]=e[7]+r[7],t[8]=e[8]+r[8],t[9]=e[9]+r[9],t[10]=e[10]+r[10],t[11]=e[11]+r[11],t[12]=e[12]+r[12],t[13]=e[13]+r[13],t[14]=e[14]+r[14],t[15]=e[15]+r[15],t},r.subtract=o,r.multiplyScalar=function(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t[8]=e[8]*r,t[9]=e[9]*r,t[10]=e[10]*r,t[11]=e[11]*r,t[12]=e[12]*r,t[13]=e[13]*r,t[14]=e[14]*r,t[15]=e[15]*r,t},r.multiplyScalarAndAdd=function(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t[4]=e[4]+r[4]*n,t[5]=e[5]+r[5]*n,t[6]=e[6]+r[6]*n,t[7]=e[7]+r[7]*n,t[8]=e[8]+r[8]*n,t[9]=e[9]+r[9]*n,t[10]=e[10]+r[10]*n,t[11]=e[11]+r[11]*n,t[12]=e[12]+r[12]*n,t[13]=e[13]+r[13]*n,t[14]=e[14]+r[14]*n,t[15]=e[15]+r[15]*n,t},r.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]},r.equals=function(t,e){var r=t[0],n=t[1],o=t[2],a=t[3],i=t[4],u=t[5],s=t[6],c=t[7],f=t[8],h=t[9],l=t[10],_=t[11],m=t[12],d=t[13],p=t[14],v=t[15],g=e[0],y=e[1],b=e[2],M=e[3],x=e[4],w=e[5],P=e[6],E=e[7],k=e[8],R=e[9],A=e[10],O=e[11],S=e[12],L=e[13],t=e[14],e=e[15];return Math.abs(r-g)<=T.EPSILON*Math.max(1,Math.abs(r),Math.abs(g))&&Math.abs(n-y)<=T.EPSILON*Math.max(1,Math.abs(n),Math.abs(y))&&Math.abs(o-b)<=T.EPSILON*Math.max(1,Math.abs(o),Math.abs(b))&&Math.abs(a-M)<=T.EPSILON*Math.max(1,Math.abs(a),Math.abs(M))&&Math.abs(i-x)<=T.EPSILON*Math.max(1,Math.abs(i),Math.abs(x))&&Math.abs(u-w)<=T.EPSILON*Math.max(1,Math.abs(u),Math.abs(w))&&Math.abs(s-P)<=T.EPSILON*Math.max(1,Math.abs(s),Math.abs(P))&&Math.abs(c-E)<=T.EPSILON*Math.max(1,Math.abs(c),Math.abs(E))&&Math.abs(f-k)<=T.EPSILON*Math.max(1,Math.abs(f),Math.abs(k))&&Math.abs(h-R)<=T.EPSILON*Math.max(1,Math.abs(h),Math.abs(R))&&Math.abs(l-A)<=T.EPSILON*Math.max(1,Math.abs(l),Math.abs(A))&&Math.abs(_-O)<=T.EPSILON*Math.max(1,Math.abs(_),Math.abs(O))&&Math.abs(m-S)<=T.EPSILON*Math.max(1,Math.abs(m),Math.abs(S))&&Math.abs(d-L)<=T.EPSILON*Math.max(1,Math.abs(d),Math.abs(L))&&Math.abs(p-t)<=T.EPSILON*Math.max(1,Math.abs(p),Math.abs(t))&&Math.abs(v-e)<=T.EPSILON*Math.max(1,Math.abs(v),Math.abs(e))},r.sub=r.mul=void 0;var T=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==i(t)&&"function"!=typeof t)return{default:t};var e=u();if(e&&e.has(t))return e.get(t);var r,n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(r in t){var a;Object.prototype.hasOwnProperty.call(t,r)&&((a=o?Object.getOwnPropertyDescriptor(t,r):null)&&(a.get||a.set)?Object.defineProperty(n,r,a):n[r]=t[r])}n.default=t,e&&e.set(t,n);return n}(t("./common.js"));function u(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return u=function(){return t},t}function m(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function n(t,e,r){var n=e[0],o=e[1],a=e[2],i=e[3],u=e[4],s=e[5],c=e[6],f=e[7],h=e[8],l=e[9],_=e[10],m=e[11],d=e[12],p=e[13],v=e[14],g=e[15],y=r[0],b=r[1],M=r[2],e=r[3];return t[0]=y*n+b*u+M*h+e*d,t[1]=y*o+b*s+M*l+e*p,t[2]=y*a+b*c+M*_+e*v,t[3]=y*i+b*f+M*m+e*g,y=r[4],b=r[5],M=r[6],e=r[7],t[4]=y*n+b*u+M*h+e*d,t[5]=y*o+b*s+M*l+e*p,t[6]=y*a+b*c+M*_+e*v,t[7]=y*i+b*f+M*m+e*g,y=r[8],b=r[9],M=r[10],e=r[11],t[8]=y*n+b*u+M*h+e*d,t[9]=y*o+b*s+M*l+e*p,t[10]=y*a+b*c+M*_+e*v,t[11]=y*i+b*f+M*m+e*g,y=r[12],b=r[13],M=r[14],e=r[15],t[12]=y*n+b*u+M*h+e*d,t[13]=y*o+b*s+M*l+e*p,t[14]=y*a+b*c+M*_+e*v,t[15]=y*i+b*f+M*m+e*g,t}function l(t,e,r){var n=e[0],o=e[1],a=e[2],i=e[3],u=n+n,s=o+o,c=a+a,f=n*u,h=n*s,e=n*c,n=o*s,o=o*c,a=a*c,u=i*u,s=i*s,c=i*c;return t[0]=1-(n+a),t[1]=h+c,t[2]=e-s,t[3]=0,t[4]=h-c,t[5]=1-(f+a),t[6]=o+u,t[7]=0,t[8]=e+s,t[9]=o-u,t[10]=1-(f+n),t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t}function _(t,e){var r=e[0],n=e[1],o=e[2],a=e[4],i=e[5],u=e[6],s=e[8],c=e[9],e=e[10];return t[0]=Math.hypot(r,n,o),t[1]=Math.hypot(a,i,u),t[2]=Math.hypot(s,c,e),t}function o(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t[4]=e[4]-r[4],t[5]=e[5]-r[5],t[6]=e[6]-r[6],t[7]=e[7]-r[7],t[8]=e[8]-r[8],t[9]=e[9]-r[9],t[10]=e[10]-r[10],t[11]=e[11]-r[11],t[12]=e[12]-r[12],t[13]=e[13]-r[13],t[14]=e[14]-r[14],t[15]=e[15]-r[15],t}r.mul=n,r.sub=o},{"./common.js":2}],8:[function(t,e,r){"use strict";function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(r,"__esModule",{value:!0}),r.create=c,r.identity=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},r.setAxisAngle=f,r.getAxisAngle=function(t,e){var r=2*Math.acos(e[3]),n=Math.sin(r/2);n>_.EPSILON?(t[0]=e[0]/n,t[1]=e[1]/n,t[2]=e[2]/n):(t[0]=1,t[1]=0,t[2]=0);return r},r.getAngle=function(t,e){e=g(t,e);return Math.acos(2*e*e-1)},r.multiply=h,r.rotateX=function(t,e,r){r*=.5;var n=e[0],o=e[1],a=e[2],i=e[3],e=Math.sin(r),r=Math.cos(r);return t[0]=n*r+i*e,t[1]=o*r+a*e,t[2]=a*r-o*e,t[3]=i*r-n*e,t},r.rotateY=function(t,e,r){r*=.5;var n=e[0],o=e[1],a=e[2],i=e[3],e=Math.sin(r),r=Math.cos(r);return t[0]=n*r-a*e,t[1]=o*r+i*e,t[2]=a*r+n*e,t[3]=i*r-o*e,t},r.rotateZ=function(t,e,r){r*=.5;var n=e[0],o=e[1],a=e[2],i=e[3],e=Math.sin(r),r=Math.cos(r);return t[0]=n*r+o*e,t[1]=o*r-n*e,t[2]=a*r+i*e,t[3]=i*r-a*e,t},r.calculateW=function(t,e){var r=e[0],n=e[1],e=e[2];return t[0]=r,t[1]=n,t[2]=e,t[3]=Math.sqrt(Math.abs(1-r*r-n*n-e*e)),t},r.exp=l,r.ln=m,r.pow=function(t,e,r){return m(t,e),v(t,t,r),l(t,t),t},r.slerp=d,r.random=function(t){var e=_.RANDOM(),r=_.RANDOM(),n=_.RANDOM(),o=Math.sqrt(1-e),e=Math.sqrt(e);return t[0]=o*Math.sin(2*Math.PI*r),t[1]=o*Math.cos(2*Math.PI*r),t[2]=e*Math.sin(2*Math.PI*n),t[3]=e*Math.cos(2*Math.PI*n),t},r.invert=function(t,e){var r=e[0],n=e[1],o=e[2],a=e[3],e=r*r+n*n+o*o+a*a,e=e?1/e:0;return t[0]=-r*e,t[1]=-n*e,t[2]=-o*e,t[3]=a*e,t},r.conjugate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t},r.fromMat3=p,r.fromEuler=function(t,e,r,n){var o=.5*Math.PI/180;e*=o,r*=o,n*=o;var a=Math.sin(e),i=Math.cos(e),o=Math.sin(r),e=Math.cos(r),r=Math.sin(n),n=Math.cos(n);return t[0]=a*e*n-i*o*r,t[1]=i*o*n+a*e*r,t[2]=i*e*r-a*o*n,t[3]=i*e*n+a*o*r,t},r.str=function(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},r.setAxes=r.sqlerp=r.rotationTo=r.equals=r.exactEquals=r.normalize=r.sqrLen=r.squaredLength=r.len=r.length=r.lerp=r.dot=r.scale=r.mul=r.add=r.set=r.copy=r.fromValues=r.clone=void 0;var _=s(t("./common.js")),n=s(t("./mat3.js")),o=s(t("./vec3.js")),a=s(t("./vec4.js"));function u(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return u=function(){return t},t}function s(t){if(t&&t.__esModule)return t;if(null===t||"object"!==i(t)&&"function"!=typeof t)return{default:t};var e=u();if(e&&e.has(t))return e.get(t);var r,n,o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&((n=a?Object.getOwnPropertyDescriptor(t,r):null)&&(n.get||n.set)?Object.defineProperty(o,r,n):o[r]=t[r]);return o.default=t,e&&e.set(t,o),o}function c(){var t=new _.ARRAY_TYPE(4);return _.ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function f(t,e,r){r*=.5;var n=Math.sin(r);return t[0]=n*e[0],t[1]=n*e[1],t[2]=n*e[2],t[3]=Math.cos(r),t}function h(t,e,r){var n=e[0],o=e[1],a=e[2],i=e[3],u=r[0],s=r[1],e=r[2],r=r[3];return t[0]=n*r+i*u+o*e-a*s,t[1]=o*r+i*s+a*u-n*e,t[2]=a*r+i*e+n*s-o*u,t[3]=i*r-n*u-o*s-a*e,t}function l(t,e){var r=e[0],n=e[1],o=e[2],a=e[3],i=Math.sqrt(r*r+n*n+o*o),e=Math.exp(a),a=0<i?e*Math.sin(i)/i:0;return t[0]=r*a,t[1]=n*a,t[2]=o*a,t[3]=e*Math.cos(i),t}function m(t,e){var r=e[0],n=e[1],o=e[2],a=e[3],e=Math.sqrt(r*r+n*n+o*o),e=0<e?Math.atan2(e,a)/e:0;return t[0]=r*e,t[1]=n*e,t[2]=o*e,t[3]=.5*Math.log(r*r+n*n+o*o+a*a),t}function d(t,e,r,n){var o,a=e[0],i=e[1],u=e[2],s=e[3],c=r[0],f=r[1],h=r[2],l=r[3],e=a*c+i*f+u*h+s*l;return e<0&&(e=-e,c=-c,f=-f,h=-h,l=-l),n=1-e>_.EPSILON?(r=Math.acos(e),e=Math.sin(r),o=Math.sin((1-n)*r)/e,Math.sin(n*r)/e):(o=1-n,n),t[0]=o*a+n*c,t[1]=o*i+n*f,t[2]=o*u+n*h,t[3]=o*s+n*l,t}function p(t,e){var r,n,o,a=e[0]+e[4]+e[8];return 0<a?(o=Math.sqrt(a+1),t[3]=.5*o,t[0]=(e[5]-e[7])*(o=.5/o),t[1]=(e[6]-e[2])*o,t[2]=(e[1]-e[3])*o):(e[4]>e[r=0]&&(r=1),n=((r=e[8]>e[3*r+r]?2:r)+1)%3,a=(r+2)%3,o=Math.sqrt(e[3*r+r]-e[3*n+n]-e[3*a+a]+1),t[r]=.5*o,t[3]=(e[3*n+a]-e[3*a+n])*(o=.5/o),t[n]=(e[3*n+r]+e[3*r+n])*o,t[a]=(e[3*a+r]+e[3*r+a])*o),t}t=a.clone;r.clone=t;t=a.fromValues;r.fromValues=t;t=a.copy;r.copy=t;t=a.set;r.set=t;t=a.add;r.add=t,r.mul=h;var v=a.scale;r.scale=v;var g=a.dot;r.dot=g;t=a.lerp;r.lerp=t;t=a.length;r.length=t,r.len=t;t=a.squaredLength;r.squaredLength=t,r.sqrLen=t;var y=a.normalize;r.normalize=y;t=a.exactEquals;r.exactEquals=t;a=a.equals;r.equals=a;var b,M,x,a=(b=o.create(),M=o.fromValues(1,0,0),x=o.fromValues(0,1,0),function(t,e,r){var n=o.dot(e,r);return n<-.999999?(o.cross(b,M,e),o.len(b)<1e-6&&o.cross(b,x,e),o.normalize(b,b),f(t,b,Math.PI),t):.999999<n?(t[0]=0,t[1]=0,t[2]=0,t[3]=1,t):(o.cross(b,e,r),t[0]=b[0],t[1]=b[1],t[2]=b[2],t[3]=1+n,y(t,t))});r.rotationTo=a;var w,P,a=(w=c(),P=c(),function(t,e,r,n,o,a){return d(w,e,o,a),d(P,r,n,a),d(t,w,P,2*a*(1-a)),t});r.sqlerp=a;var E,n=(E=n.create(),function(t,e,r,n){return E[0]=r[0],E[3]=r[1],E[6]=r[2],E[1]=n[0],E[4]=n[1],E[7]=n[2],E[2]=-e[0],E[5]=-e[1],E[8]=-e[2],y(t,p(t,E))});r.setAxes=n},{"./common.js":2,"./mat3.js":6,"./vec3.js":11,"./vec4.js":12}],9:[function(t,e,r){"use strict";function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(r,"__esModule",{value:!0}),r.create=function(){var t=new p.ARRAY_TYPE(8);p.ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[4]=0,t[5]=0,t[6]=0,t[7]=0);return t[3]=1,t},r.clone=function(t){var e=new p.ARRAY_TYPE(8);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e},r.fromValues=function(t,e,r,n,o,a,i,u){var s=new p.ARRAY_TYPE(8);return s[0]=t,s[1]=e,s[2]=r,s[3]=n,s[4]=o,s[5]=a,s[6]=i,s[7]=u,s},r.fromRotationTranslationValues=function(t,e,r,n,o,a,i){var u=new p.ARRAY_TYPE(8);u[0]=t,u[1]=e,u[2]=r,u[3]=n;o*=.5,a*=.5,i*=.5;return u[4]=o*n+a*r-i*e,u[5]=a*n+i*t-o*r,u[6]=i*n+o*e-a*t,u[7]=-o*t-a*e-i*r,u},r.fromRotationTranslation=a,r.fromTranslation=function(t,e){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=.5*e[0],t[5]=.5*e[1],t[6]=.5*e[2],t[7]=0,t},r.fromRotation=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=0,t[5]=0,t[6]=0,t[7]=0,t},r.fromMat4=function(t,e){var r=m.create();o.getRotation(r,e);var n=new p.ARRAY_TYPE(3);return o.getTranslation(n,e),a(t,r,n),t},r.copy=f,r.identity=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t[6]=0,t[7]=0,t},r.set=function(t,e,r,n,o,a,i,u,s){return t[0]=e,t[1]=r,t[2]=n,t[3]=o,t[4]=a,t[5]=i,t[6]=u,t[7]=s,t},r.getDual=function(t,e){return t[0]=e[4],t[1]=e[5],t[2]=e[6],t[3]=e[7],t},r.setDual=function(t,e){return t[4]=e[0],t[5]=e[1],t[6]=e[2],t[7]=e[3],t},r.getTranslation=function(t,e){var r=e[4],n=e[5],o=e[6],a=e[7],i=-e[0],u=-e[1],s=-e[2],e=e[3];return t[0]=2*(r*e+a*i+n*s-o*u),t[1]=2*(n*e+a*u+o*i-r*s),t[2]=2*(o*e+a*s+r*u-n*i),t},r.translate=function(t,e,r){var n=e[0],o=e[1],a=e[2],i=e[3],u=.5*r[0],s=.5*r[1],c=.5*r[2],f=e[4],h=e[5],r=e[6],e=e[7];return t[0]=n,t[1]=o,t[2]=a,t[3]=i,t[4]=i*u+o*c-a*s+f,t[5]=i*s+a*u-n*c+h,t[6]=i*c+n*s-o*u+r,t[7]=-n*u-o*s-a*c+e,t},r.rotateX=function(t,e,r){var n=-e[0],o=-e[1],a=-e[2],i=e[3],u=e[4],s=e[5],c=e[6],f=e[7],h=u*i+f*n+s*a-c*o,l=s*i+f*o+c*n-u*a,_=c*i+f*a+u*o-s*n,c=f*i-u*n-s*o-c*a;return m.rotateX(t,e,r),n=t[0],o=t[1],a=t[2],i=t[3],t[4]=h*i+c*n+l*a-_*o,t[5]=l*i+c*o+_*n-h*a,t[6]=_*i+c*a+h*o-l*n,t[7]=c*i-h*n-l*o-_*a,t},r.rotateY=function(t,e,r){var n=-e[0],o=-e[1],a=-e[2],i=e[3],u=e[4],s=e[5],c=e[6],f=e[7],h=u*i+f*n+s*a-c*o,l=s*i+f*o+c*n-u*a,_=c*i+f*a+u*o-s*n,c=f*i-u*n-s*o-c*a;return m.rotateY(t,e,r),n=t[0],o=t[1],a=t[2],i=t[3],t[4]=h*i+c*n+l*a-_*o,t[5]=l*i+c*o+_*n-h*a,t[6]=_*i+c*a+h*o-l*n,t[7]=c*i-h*n-l*o-_*a,t},r.rotateZ=function(t,e,r){var n=-e[0],o=-e[1],a=-e[2],i=e[3],u=e[4],s=e[5],c=e[6],f=e[7],h=u*i+f*n+s*a-c*o,l=s*i+f*o+c*n-u*a,_=c*i+f*a+u*o-s*n,c=f*i-u*n-s*o-c*a;return m.rotateZ(t,e,r),n=t[0],o=t[1],a=t[2],i=t[3],t[4]=h*i+c*n+l*a-_*o,t[5]=l*i+c*o+_*n-h*a,t[6]=_*i+c*a+h*o-l*n,t[7]=c*i-h*n-l*o-_*a,t},r.rotateByQuatAppend=function(t,e,r){var n=r[0],o=r[1],a=r[2],i=r[3],u=e[0],s=e[1],c=e[2],r=e[3];return t[0]=u*i+r*n+s*a-c*o,t[1]=s*i+r*o+c*n-u*a,t[2]=c*i+r*a+u*o-s*n,t[3]=r*i-u*n-s*o-c*a,u=e[4],s=e[5],c=e[6],r=e[7],t[4]=u*i+r*n+s*a-c*o,t[5]=s*i+r*o+c*n-u*a,t[6]=c*i+r*a+u*o-s*n,t[7]=r*i-u*n-s*o-c*a,t},r.rotateByQuatPrepend=function(t,e,r){var n=e[0],o=e[1],a=e[2],i=e[3],u=r[0],s=r[1],c=r[2],e=r[3];return t[0]=n*e+i*u+o*c-a*s,t[1]=o*e+i*s+a*u-n*c,t[2]=a*e+i*c+n*s-o*u,t[3]=i*e-n*u-o*s-a*c,u=r[4],s=r[5],c=r[6],e=r[7],t[4]=n*e+i*u+o*c-a*s,t[5]=o*e+i*s+a*u-n*c,t[6]=a*e+i*c+n*s-o*u,t[7]=i*e-n*u-o*s-a*c,t},r.rotateAroundAxis=function(t,e,r,n){if(Math.abs(n)<p.EPSILON)return f(t,e);var o=Math.hypot(r[0],r[1],r[2]);n*=.5;var a=Math.sin(n),i=a*r[0]/o,u=a*r[1]/o,s=a*r[2]/o,c=Math.cos(n),a=e[0],r=e[1],o=e[2],n=e[3];t[0]=a*c+n*i+r*s-o*u,t[1]=r*c+n*u+o*i-a*s,t[2]=o*c+n*s+a*u-r*i,t[3]=n*c-a*i-r*u-o*s;a=e[4],r=e[5],o=e[6],e=e[7];return t[4]=a*c+e*i+r*s-o*u,t[5]=r*c+e*u+o*i-a*s,t[6]=o*c+e*s+a*u-r*i,t[7]=e*c-a*i-r*u-o*s,t},r.add=function(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t[4]=e[4]+r[4],t[5]=e[5]+r[5],t[6]=e[6]+r[6],t[7]=e[7]+r[7],t},r.multiply=s,r.scale=function(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t},r.lerp=function(t,e,r,n){var o=1-n;c(e,r)<0&&(n=-n);return t[0]=e[0]*o+r[0]*n,t[1]=e[1]*o+r[1]*n,t[2]=e[2]*o+r[2]*n,t[3]=e[3]*o+r[3]*n,t[4]=e[4]*o+r[4]*n,t[5]=e[5]*o+r[5]*n,t[6]=e[6]*o+r[6]*n,t[7]=e[7]*o+r[7]*n,t},r.invert=function(t,e){var r=h(e);return t[0]=-e[0]/r,t[1]=-e[1]/r,t[2]=-e[2]/r,t[3]=e[3]/r,t[4]=-e[4]/r,t[5]=-e[5]/r,t[6]=-e[6]/r,t[7]=e[7]/r,t},r.conjugate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t[4]=-e[4],t[5]=-e[5],t[6]=-e[6],t[7]=e[7],t},r.normalize=function(t,e){var r=h(e);{var n,o,a,i,u,s,c,f;0<r&&(r=Math.sqrt(r),n=e[0]/r,o=e[1]/r,a=e[2]/r,i=e[3]/r,u=e[4],s=e[5],c=e[6],f=e[7],e=n*u+o*s+a*c+i*f,t[0]=n,t[1]=o,t[2]=a,t[3]=i,t[4]=(u-n*e)/r,t[5]=(s-o*e)/r,t[6]=(c-a*e)/r,t[7]=(f-i*e)/r)}return t},r.str=function(t){return"quat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+")"},r.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]},r.equals=function(t,e){var r=t[0],n=t[1],o=t[2],a=t[3],i=t[4],u=t[5],s=t[6],c=t[7],f=e[0],h=e[1],l=e[2],_=e[3],m=e[4],d=e[5],t=e[6],e=e[7];return Math.abs(r-f)<=p.EPSILON*Math.max(1,Math.abs(r),Math.abs(f))&&Math.abs(n-h)<=p.EPSILON*Math.max(1,Math.abs(n),Math.abs(h))&&Math.abs(o-l)<=p.EPSILON*Math.max(1,Math.abs(o),Math.abs(l))&&Math.abs(a-_)<=p.EPSILON*Math.max(1,Math.abs(a),Math.abs(_))&&Math.abs(i-m)<=p.EPSILON*Math.max(1,Math.abs(i),Math.abs(m))&&Math.abs(u-d)<=p.EPSILON*Math.max(1,Math.abs(u),Math.abs(d))&&Math.abs(s-t)<=p.EPSILON*Math.max(1,Math.abs(s),Math.abs(t))&&Math.abs(c-e)<=p.EPSILON*Math.max(1,Math.abs(c),Math.abs(e))},r.sqrLen=r.squaredLength=r.len=r.length=r.dot=r.mul=r.setReal=r.getReal=void 0;var p=n(t("./common.js")),m=n(t("./quat.js")),o=n(t("./mat4.js"));function u(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return u=function(){return t},t}function n(t){if(t&&t.__esModule)return t;if(null===t||"object"!==i(t)&&"function"!=typeof t)return{default:t};var e=u();if(e&&e.has(t))return e.get(t);var r,n,o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&((n=a?Object.getOwnPropertyDescriptor(t,r):null)&&(n.get||n.set)?Object.defineProperty(o,r,n):o[r]=t[r]);return o.default=t,e&&e.set(t,o),o}function a(t,e,r){var n=.5*r[0],o=.5*r[1],a=.5*r[2],i=e[0],u=e[1],r=e[2],e=e[3];return t[0]=i,t[1]=u,t[2]=r,t[3]=e,t[4]=n*e+o*r-a*u,t[5]=o*e+a*i-n*r,t[6]=a*e+n*u-o*i,t[7]=-n*i-o*u-a*r,t}function f(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t}t=m.copy;r.getReal=t;t=m.copy;function s(t,e,r){var n=e[0],o=e[1],a=e[2],i=e[3],u=r[4],s=r[5],c=r[6],f=r[7],h=e[4],l=e[5],_=e[6],m=e[7],d=r[0],p=r[1],e=r[2],r=r[3];return t[0]=n*r+i*d+o*e-a*p,t[1]=o*r+i*p+a*d-n*e,t[2]=a*r+i*e+n*p-o*d,t[3]=i*r-n*d-o*p-a*e,t[4]=n*f+i*u+o*c-a*s+h*r+m*d+l*e-_*p,t[5]=o*f+i*s+a*u-n*c+l*r+m*p+_*d-h*e,t[6]=a*f+i*c+n*s-o*u+_*r+m*e+h*p-l*d,t[7]=i*f-n*u-o*s-a*c+m*r-h*d-l*p-_*e,t}r.setReal=t,r.mul=s;var c=m.dot;r.dot=c;t=m.length;r.length=t,r.len=t;var h=m.squaredLength;r.squaredLength=h,r.sqrLen=h},{"./common.js":2,"./mat4.js":7,"./quat.js":8}],10:[function(t,e,r){"use strict";function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(r,"__esModule",{value:!0}),r.create=n,r.clone=function(t){var e=new o.ARRAY_TYPE(2);return e[0]=t[0],e[1]=t[1],e},r.fromValues=function(t,e){var r=new o.ARRAY_TYPE(2);return r[0]=t,r[1]=e,r},r.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t},r.set=function(t,e,r){return t[0]=e,t[1]=r,t},r.add=function(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t},r.subtract=a,r.multiply=s,r.divide=c,r.ceil=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t},r.floor=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t},r.min=function(t,e,r){return t[0]=Math.min(e[0],r[0]),t[1]=Math.min(e[1],r[1]),t},r.max=function(t,e,r){return t[0]=Math.max(e[0],r[0]),t[1]=Math.max(e[1],r[1]),t},r.round=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t},r.scale=function(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t},r.scaleAndAdd=function(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t},r.distance=f,r.squaredDistance=h,r.length=l,r.squaredLength=_,r.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t},r.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t},r.normalize=function(t,e){var r=e[0],n=e[1],n=r*r+n*n;0<n&&(n=1/Math.sqrt(n));return t[0]=e[0]*n,t[1]=e[1]*n,t},r.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]},r.cross=function(t,e,r){r=e[0]*r[1]-e[1]*r[0];return t[0]=t[1]=0,t[2]=r,t},r.lerp=function(t,e,r,n){var o=e[0],e=e[1];return t[0]=o+n*(r[0]-o),t[1]=e+n*(r[1]-e),t},r.random=function(t,e){e=e||1;var r=2*o.RANDOM()*Math.PI;return t[0]=Math.cos(r)*e,t[1]=Math.sin(r)*e,t},r.transformMat2=function(t,e,r){var n=e[0],e=e[1];return t[0]=r[0]*n+r[2]*e,t[1]=r[1]*n+r[3]*e,t},r.transformMat2d=function(t,e,r){var n=e[0],e=e[1];return t[0]=r[0]*n+r[2]*e+r[4],t[1]=r[1]*n+r[3]*e+r[5],t},r.transformMat3=function(t,e,r){var n=e[0],e=e[1];return t[0]=r[0]*n+r[3]*e+r[6],t[1]=r[1]*n+r[4]*e+r[7],t},r.transformMat4=function(t,e,r){var n=e[0],e=e[1];return t[0]=r[0]*n+r[4]*e+r[12],t[1]=r[1]*n+r[5]*e+r[13],t},r.rotate=function(t,e,r,n){var o=e[0]-r[0],a=e[1]-r[1],e=Math.sin(n),n=Math.cos(n);return t[0]=o*n-a*e+r[0],t[1]=o*e+a*n+r[1],t},r.angle=function(t,e){var r=t[0],n=t[1],o=e[0],t=e[1],e=Math.sqrt(r*r+n*n)*Math.sqrt(o*o+t*t),e=e&&(r*o+n*t)/e;return Math.acos(Math.min(Math.max(e,-1),1))},r.zero=function(t){return t[0]=0,t[1]=0,t},r.str=function(t){return"vec2("+t[0]+", "+t[1]+")"},r.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]},r.equals=function(t,e){var r=t[0],n=t[1],t=e[0],e=e[1];return Math.abs(r-t)<=o.EPSILON*Math.max(1,Math.abs(r),Math.abs(t))&&Math.abs(n-e)<=o.EPSILON*Math.max(1,Math.abs(n),Math.abs(e))},r.forEach=r.sqrLen=r.sqrDist=r.dist=r.div=r.mul=r.sub=r.len=void 0;var o=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==i(t)&&"function"!=typeof t)return{default:t};var e=u();if(e&&e.has(t))return e.get(t);var r,n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(r in t){var a;Object.prototype.hasOwnProperty.call(t,r)&&((a=o?Object.getOwnPropertyDescriptor(t,r):null)&&(a.get||a.set)?Object.defineProperty(n,r,a):n[r]=t[r])}n.default=t,e&&e.set(t,n);return n}(t("./common.js"));function u(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return u=function(){return t},t}function n(){var t=new o.ARRAY_TYPE(2);return o.ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0),t}function a(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t}function s(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t}function c(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t}function f(t,e){var r=e[0]-t[0],t=e[1]-t[1];return Math.hypot(r,t)}function h(t,e){var r=e[0]-t[0],t=e[1]-t[1];return r*r+t*t}function l(t){var e=t[0],t=t[1];return Math.hypot(e,t)}function _(t){var e=t[0],t=t[1];return e*e+t*t}r.len=l,r.sub=a,r.mul=s,r.div=c,r.dist=f,r.sqrDist=h,r.sqrLen=_;var m,t=(m=n(),function(t,e,r,n,o,a){var i,u;for(e=e||2,r=r||0,u=n?Math.min(n*e+r,t.length):t.length,i=r;i<u;i+=e)m[0]=t[i],m[1]=t[i+1],o(m,m,a),t[i]=m[0],t[i+1]=m[1];return t});r.forEach=t},{"./common.js":2}],11:[function(t,e,r){"use strict";function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(r,"__esModule",{value:!0}),r.create=n,r.clone=function(t){var e=new u.ARRAY_TYPE(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},r.length=o,r.fromValues=function(t,e,r){var n=new u.ARRAY_TYPE(3);return n[0]=t,n[1]=e,n[2]=r,n},r.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},r.set=function(t,e,r,n){return t[0]=e,t[1]=r,t[2]=n,t},r.add=function(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t},r.subtract=a,r.multiply=c,r.divide=f,r.ceil=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t},r.floor=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t},r.min=function(t,e,r){return t[0]=Math.min(e[0],r[0]),t[1]=Math.min(e[1],r[1]),t[2]=Math.min(e[2],r[2]),t},r.max=function(t,e,r){return t[0]=Math.max(e[0],r[0]),t[1]=Math.max(e[1],r[1]),t[2]=Math.max(e[2],r[2]),t},r.round=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t},r.scale=function(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t},r.scaleAndAdd=function(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t},r.distance=h,r.squaredDistance=l,r.squaredLength=_,r.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t},r.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t},r.normalize=function(t,e){var r=e[0],n=e[1],o=e[2],o=r*r+n*n+o*o;0<o&&(o=1/Math.sqrt(o));return t[0]=e[0]*o,t[1]=e[1]*o,t[2]=e[2]*o,t},r.dot=m,r.cross=function(t,e,r){var n=e[0],o=e[1],a=e[2],i=r[0],e=r[1],r=r[2];return t[0]=o*r-a*e,t[1]=a*i-n*r,t[2]=n*e-o*i,t},r.lerp=function(t,e,r,n){var o=e[0],a=e[1],e=e[2];return t[0]=o+n*(r[0]-o),t[1]=a+n*(r[1]-a),t[2]=e+n*(r[2]-e),t},r.hermite=function(t,e,r,n,o,a){var i=a*a,u=i*(2*a-3)+1,s=i*(a-2)+a,c=i*(a-1),a=i*(3-2*a);return t[0]=e[0]*u+r[0]*s+n[0]*c+o[0]*a,t[1]=e[1]*u+r[1]*s+n[1]*c+o[1]*a,t[2]=e[2]*u+r[2]*s+n[2]*c+o[2]*a,t},r.bezier=function(t,e,r,n,o,a){var i=1-a,u=i*i,s=a*a,c=u*i,u=3*a*u,i=3*s*i,a=s*a;return t[0]=e[0]*c+r[0]*u+n[0]*i+o[0]*a,t[1]=e[1]*c+r[1]*u+n[1]*i+o[1]*a,t[2]=e[2]*c+r[2]*u+n[2]*i+o[2]*a,t},r.random=function(t,e){e=e||1;var r=2*u.RANDOM()*Math.PI,n=2*u.RANDOM()-1,o=Math.sqrt(1-n*n)*e;return t[0]=Math.cos(r)*o,t[1]=Math.sin(r)*o,t[2]=n*e,t},r.transformMat4=function(t,e,r){var n=e[0],o=e[1],a=e[2],e=r[3]*n+r[7]*o+r[11]*a+r[15];return e=e||1,t[0]=(r[0]*n+r[4]*o+r[8]*a+r[12])/e,t[1]=(r[1]*n+r[5]*o+r[9]*a+r[13])/e,t[2]=(r[2]*n+r[6]*o+r[10]*a+r[14])/e,t},r.transformMat3=function(t,e,r){var n=e[0],o=e[1],e=e[2];return t[0]=n*r[0]+o*r[3]+e*r[6],t[1]=n*r[1]+o*r[4]+e*r[7],t[2]=n*r[2]+o*r[5]+e*r[8],t},r.transformQuat=function(t,e,r){var n=r[0],o=r[1],a=r[2],i=r[3],u=e[0],s=e[1],c=e[2],f=o*c-a*s,h=a*u-n*c,r=n*s-o*u,e=o*r-a*h,a=a*f-n*r,o=n*h-o*f,i=2*i;return f*=i,h*=i,r*=i,e*=2,a*=2,o*=2,t[0]=u+f+e,t[1]=s+h+a,t[2]=c+r+o,t},r.rotateX=function(t,e,r,n){var o=[],a=[];return o[0]=e[0]-r[0],o[1]=e[1]-r[1],o[2]=e[2]-r[2],a[0]=o[0],a[1]=o[1]*Math.cos(n)-o[2]*Math.sin(n),a[2]=o[1]*Math.sin(n)+o[2]*Math.cos(n),t[0]=a[0]+r[0],t[1]=a[1]+r[1],t[2]=a[2]+r[2],t},r.rotateY=function(t,e,r,n){var o=[],a=[];return o[0]=e[0]-r[0],o[1]=e[1]-r[1],o[2]=e[2]-r[2],a[0]=o[2]*Math.sin(n)+o[0]*Math.cos(n),a[1]=o[1],a[2]=o[2]*Math.cos(n)-o[0]*Math.sin(n),t[0]=a[0]+r[0],t[1]=a[1]+r[1],t[2]=a[2]+r[2],t},r.rotateZ=function(t,e,r,n){var o=[],a=[];return o[0]=e[0]-r[0],o[1]=e[1]-r[1],o[2]=e[2]-r[2],a[0]=o[0]*Math.cos(n)-o[1]*Math.sin(n),a[1]=o[0]*Math.sin(n)+o[1]*Math.cos(n),a[2]=o[2],t[0]=a[0]+r[0],t[1]=a[1]+r[1],t[2]=a[2]+r[2],t},r.angle=function(t,e){var r=t[0],n=t[1],o=t[2],a=e[0],i=e[1],u=e[2],o=Math.sqrt(r*r+n*n+o*o),u=Math.sqrt(a*a+i*i+u*u),u=o*u,u=u&&m(t,e)/u;return Math.acos(Math.min(Math.max(u,-1),1))},r.zero=function(t){return t[0]=0,t[1]=0,t[2]=0,t},r.str=function(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"},r.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]},r.equals=function(t,e){var r=t[0],n=t[1],o=t[2],a=e[0],t=e[1],e=e[2];return Math.abs(r-a)<=u.EPSILON*Math.max(1,Math.abs(r),Math.abs(a))&&Math.abs(n-t)<=u.EPSILON*Math.max(1,Math.abs(n),Math.abs(t))&&Math.abs(o-e)<=u.EPSILON*Math.max(1,Math.abs(o),Math.abs(e))},r.forEach=r.sqrLen=r.len=r.sqrDist=r.dist=r.div=r.mul=r.sub=void 0;var u=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==i(t)&&"function"!=typeof t)return{default:t};var e=s();if(e&&e.has(t))return e.get(t);var r,n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(r in t){var a;Object.prototype.hasOwnProperty.call(t,r)&&((a=o?Object.getOwnPropertyDescriptor(t,r):null)&&(a.get||a.set)?Object.defineProperty(n,r,a):n[r]=t[r])}n.default=t,e&&e.set(t,n);return n}(t("./common.js"));function s(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return s=function(){return t},t}function n(){var t=new u.ARRAY_TYPE(3);return u.ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function o(t){var e=t[0],r=t[1],t=t[2];return Math.hypot(e,r,t)}function a(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t}function c(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t[2]=e[2]*r[2],t}function f(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t[2]=e[2]/r[2],t}function h(t,e){var r=e[0]-t[0],n=e[1]-t[1],t=e[2]-t[2];return Math.hypot(r,n,t)}function l(t,e){var r=e[0]-t[0],n=e[1]-t[1],t=e[2]-t[2];return r*r+n*n+t*t}function _(t){var e=t[0],r=t[1],t=t[2];return e*e+r*r+t*t}function m(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}r.sub=a,r.mul=c,r.div=f,r.dist=h,r.sqrDist=l,r.len=o,r.sqrLen=_;var d,t=(d=n(),function(t,e,r,n,o,a){var i,u;for(e=e||3,r=r||0,u=n?Math.min(n*e+r,t.length):t.length,i=r;i<u;i+=e)d[0]=t[i],d[1]=t[i+1],d[2]=t[i+2],o(d,d,a),t[i]=d[0],t[i+1]=d[1],t[i+2]=d[2];return t});r.forEach=t},{"./common.js":2}],12:[function(t,e,r){"use strict";function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(r,"__esModule",{value:!0}),r.create=n,r.clone=function(t){var e=new c.ARRAY_TYPE(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},r.fromValues=function(t,e,r,n){var o=new c.ARRAY_TYPE(4);return o[0]=t,o[1]=e,o[2]=r,o[3]=n,o},r.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},r.set=function(t,e,r,n,o){return t[0]=e,t[1]=r,t[2]=n,t[3]=o,t},r.add=function(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t},r.subtract=o,r.multiply=a,r.divide=s,r.ceil=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t[3]=Math.ceil(e[3]),t},r.floor=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t[3]=Math.floor(e[3]),t},r.min=function(t,e,r){return t[0]=Math.min(e[0],r[0]),t[1]=Math.min(e[1],r[1]),t[2]=Math.min(e[2],r[2]),t[3]=Math.min(e[3],r[3]),t},r.max=function(t,e,r){return t[0]=Math.max(e[0],r[0]),t[1]=Math.max(e[1],r[1]),t[2]=Math.max(e[2],r[2]),t[3]=Math.max(e[3],r[3]),t},r.round=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t[3]=Math.round(e[3]),t},r.scale=function(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t},r.scaleAndAdd=function(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t},r.distance=f,r.squaredDistance=h,r.length=l,r.squaredLength=_,r.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t},r.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t},r.normalize=function(t,e){var r=e[0],n=e[1],o=e[2],a=e[3],e=r*r+n*n+o*o+a*a;0<e&&(e=1/Math.sqrt(e));return t[0]=r*e,t[1]=n*e,t[2]=o*e,t[3]=a*e,t},r.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]},r.cross=function(t,e,r,n){var o=r[0]*n[1]-r[1]*n[0],a=r[0]*n[2]-r[2]*n[0],i=r[0]*n[3]-r[3]*n[0],u=r[1]*n[2]-r[2]*n[1],s=r[1]*n[3]-r[3]*n[1],c=r[2]*n[3]-r[3]*n[2],f=e[0],r=e[1],n=e[2],e=e[3];return t[0]=r*c-n*s+e*u,t[1]=-f*c+n*i-e*a,t[2]=f*s-r*i+e*o,t[3]=-f*u+r*a-n*o,t},r.lerp=function(t,e,r,n){var o=e[0],a=e[1],i=e[2],e=e[3];return t[0]=o+n*(r[0]-o),t[1]=a+n*(r[1]-a),t[2]=i+n*(r[2]-i),t[3]=e+n*(r[3]-e),t},r.random=function(t,e){var r,n,o,a,i,u;e=e||1;for(;r=2*c.RANDOM()-1,n=2*c.RANDOM()-1,i=r*r+n*n,1<=i;);for(;o=2*c.RANDOM()-1,a=2*c.RANDOM()-1,u=o*o+a*a,1<=u;);var s=Math.sqrt((1-i)/u);return t[0]=e*r,t[1]=e*n,t[2]=e*o*s,t[3]=e*a*s,t},r.transformMat4=function(t,e,r){var n=e[0],o=e[1],a=e[2],e=e[3];return t[0]=r[0]*n+r[4]*o+r[8]*a+r[12]*e,t[1]=r[1]*n+r[5]*o+r[9]*a+r[13]*e,t[2]=r[2]*n+r[6]*o+r[10]*a+r[14]*e,t[3]=r[3]*n+r[7]*o+r[11]*a+r[15]*e,t},r.transformQuat=function(t,e,r){var n=e[0],o=e[1],a=e[2],i=r[0],u=r[1],s=r[2],c=r[3],f=c*n+u*a-s*o,h=c*o+s*n-i*a,r=c*a+i*o-u*n,a=-i*n-u*o-s*a;return t[0]=f*c+a*-i+h*-s-r*-u,t[1]=h*c+a*-u+r*-i-f*-s,t[2]=r*c+a*-s+f*-u-h*-i,t[3]=e[3],t},r.zero=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t},r.str=function(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},r.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]},r.equals=function(t,e){var r=t[0],n=t[1],o=t[2],a=t[3],i=e[0],u=e[1],t=e[2],e=e[3];return Math.abs(r-i)<=c.EPSILON*Math.max(1,Math.abs(r),Math.abs(i))&&Math.abs(n-u)<=c.EPSILON*Math.max(1,Math.abs(n),Math.abs(u))&&Math.abs(o-t)<=c.EPSILON*Math.max(1,Math.abs(o),Math.abs(t))&&Math.abs(a-e)<=c.EPSILON*Math.max(1,Math.abs(a),Math.abs(e))},r.forEach=r.sqrLen=r.len=r.sqrDist=r.dist=r.div=r.mul=r.sub=void 0;var c=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==i(t)&&"function"!=typeof t)return{default:t};var e=u();if(e&&e.has(t))return e.get(t);var r,n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(r in t){var a;Object.prototype.hasOwnProperty.call(t,r)&&((a=o?Object.getOwnPropertyDescriptor(t,r):null)&&(a.get||a.set)?Object.defineProperty(n,r,a):n[r]=t[r])}n.default=t,e&&e.set(t,n);return n}(t("./common.js"));function u(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return u=function(){return t},t}function n(){var t=new c.ARRAY_TYPE(4);return c.ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}function o(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t}function a(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t[2]=e[2]*r[2],t[3]=e[3]*r[3],t}function s(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t[2]=e[2]/r[2],t[3]=e[3]/r[3],t}function f(t,e){var r=e[0]-t[0],n=e[1]-t[1],o=e[2]-t[2],t=e[3]-t[3];return Math.hypot(r,n,o,t)}function h(t,e){var r=e[0]-t[0],n=e[1]-t[1],o=e[2]-t[2],t=e[3]-t[3];return r*r+n*n+o*o+t*t}function l(t){var e=t[0],r=t[1],n=t[2],t=t[3];return Math.hypot(e,r,n,t)}function _(t){var e=t[0],r=t[1],n=t[2],t=t[3];return e*e+r*r+n*n+t*t}r.sub=o,r.mul=a,r.div=s,r.dist=f,r.sqrDist=h,r.len=l,r.sqrLen=_;var m,t=(m=n(),function(t,e,r,n,o,a){var i,u;for(e=e||4,r=r||0,u=n?Math.min(n*e+r,t.length):t.length,i=r;i<u;i+=e)m[0]=t[i],m[1]=t[i+1],m[2]=t[i+2],m[3]=t[i+3],o(m,m,a),t[i]=m[0],t[i+1]=m[1],t[i+2]=m[2],t[i+3]=m[3];return t});r.forEach=t},{"./common.js":2}],13:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.default=15},{}],14:[function(t,e,r){"use strict";var n=this&&this.__awaiter||function(t,i,u,s){return new(u=u||Promise)(function(r,e){function n(t){try{a(s.next(t))}catch(t){e(t)}}function o(t){try{a(s.throw(t))}catch(t){e(t)}}function a(t){var e;t.done?r(t.value):((e=t.value)instanceof u?e:new u(function(t){t(e)})).then(n,o)}a((s=s.apply(t,i||[])).next())})},o=this&&this.__generator||function(r,n){var o,a,i,u={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},t={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(o)throw new TypeError("Generator is already executing.");for(;u;)try{if(o=1,a&&(i=2&e[0]?a.return:e[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,e[1])).done)return i;switch(a=0,(e=i?[2&e[0],i.value]:e)[0]){case 0:case 1:i=e;break;case 4:return u.label++,{value:e[1],done:!1};case 5:u.label++,a=e[1],e=[0];continue;case 7:e=u.ops.pop(),u.trys.pop();continue;default:if(!(i=0<(i=u.trys).length&&i[i.length-1])&&(6===e[0]||2===e[0])){u=0;continue}if(3===e[0]&&(!i||e[1]>i[0]&&e[1]<i[3])){u.label=e[1];break}if(6===e[0]&&u.label<i[1]){u.label=i[1],i=e;break}if(i&&u.label<i[2]){u.label=i[2],u.ops.push(e);break}i[2]&&u.ops.pop(),u.trys.pop();continue}e=n.call(r,u)}catch(t){e=[6,t],a=0}finally{o=i=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};Object.defineProperty(r,"__esModule",{value:!0});var i=t("../constants"),a=t("./generation/ChunkGenerator"),u=t("./rendererWebGL/RendererWebGL");t("fpsmeter");s.prototype.start=function(){return n(this,void 0,void 0,function(){return o(this,function(t){switch(t.label){case 0:return this.isRunning()?[2]:[4,this._rendererWebGL.init()];case 1:return t.sent(),this._running=!0,this._chunkGenerator.start(),this._tick(),[2]}})})},s.prototype.stop=function(){this._running=!1,this._chunkGenerator.stop()},s.prototype.isRunning=function(){return this._running&&!this._error_gcontext},s.prototype._tick=function(){var t=this,e=function(){t._running&&!t._error_gcontext&&(t._main_loop(),window.requestAnimationFrame(e))};e()},s.prototype._main_loop=function(){this._fps_meter.tickStart();var t=this._rendererWebGL.getCameraPosition();this._chunkGenerator.update(t),this._rendererWebGL.update(this._chunkGenerator.getChunks()),this._rendererWebGL.renderScene(this._chunkGenerator.getChunks());var e=[0|Math.floor(t[0]/i.default),0|Math.floor(t[1]/i.default),0|Math.floor(t[2]/i.default)];this._rendererWebGL.pushText(o="coordinates: "+e[0]+"/"+e[1]+"/"+e[2],[0,0],1);var r,n,o,a=this._rendererWebGL.getFreeFlyCamera().getTimeImmobile();3<a&&(r=5<a?1:(a-3)/2,(t=this._rendererWebGL.getSize())[0]=.75*t[0],n=0,(e=["         *---*         ","         |W/Z|         ","         *---*         ","                       ","   *---* *---* *---*   ","   |A/Q| | S | | D |   ","   *---* *---* *---*   ","","        *----*         ","        | UP |         ","        *----*         ","                       "," *----* *----* *-----* "," |LEFT| |DOWN| |RIGHT| "," *----* *----* *-----* ","","   *---------------*   ","   |MOUSE SUPPORTED|   ","   *---------------*   ","","*---------------------*","|TOUCHSCREEN SUPPORTED|","*---------------------*"]).forEach(function(t){return n=Math.max(n,t.length)}),n*=16*r,a=16*e.length*r,o=e.join("\n"),a=[.5*t[0]-.5*n,.5*t[1]+.5*a],this._rendererWebGL.pushText(o,a,r)),this._rendererWebGL.renderHUD(this._chunkGenerator.getChunks(),this._chunkGenerator.processing_pos,this._touches),this._fps_meter.tick()},t=s;function s(){var o=this;this._touches=[];var t=document.getElementById("fpsmeter");if(!t)throw new Error("fpsmeter not found");this._fps_meter=new FPSMeter(t,{theme:"transparent"});var e=document.getElementById("canvasesdiv");if(!e)throw new Error("canvasesdiv not found");t=document.getElementById("main-canvas");if(!t)throw new Error("main-canvas not found");this._rendererWebGL=new u.default(e,t),this._chunkGenerator=new a.default({chunk_is_visible:function(t){return o._rendererWebGL.chunk_is_visible(t)},point_is_visible:function(t){return o._rendererWebGL.point_is_visible(t)},add_geom:function(t){return o._rendererWebGL.add_geom(t)},update_geom:function(t,e){return o._rendererWebGL.update_geom(t,e)}});t=function(t){for(var e=t.targetTouches,r=o._rendererWebGL.getSize(),n=o._touches.length=0;n<e.length;++n)o._touches.push([e[n].pageX,r[1]-e[n].pageY])};e.addEventListener("touchstart",t),e.addEventListener("touchend",t),e.addEventListener("touchmove",t);t=document.getElementById("gui_fullscreen");if(!t)throw new Error("gui_fullscreen not found");t.addEventListener("click",function(){var t=document.getElementById("canvasesdiv");if(!t)throw new Error("canvasesdiv not found");t.requestFullscreen?t.requestFullscreen():t.webkitRequestFullscreen?t.webkitRequestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.msRequestFullscreen&&t.msRequestFullscreen()});t=function(){var t=document.getElementById("canvasesdiv");if(!t)throw new Error("canvasesdiv not found");var e=document.getElementById("main-canvas");if(!t)throw new Error("main-canvas not found");var r=null,n=null,n=document.fullscreen||document.mozFullScreen||document.webkitIsFullScreen||document.msFullscreenElement?(t.style.position="absolute",r=window.innerWidth,window.innerHeight):(t.style.position="relative",r=800,600);t.style.left="0px",t.style.top="0px",e.width=r,e.height=n,o._rendererWebGL.resize(r,n)};document.addEventListener("fullscreenchange",t,!1),document.addEventListener("mozfullscreenchange",t,!1),document.addEventListener("webkitfullscreenchange",t,!1),document.addEventListener("msfullscreenchange",t,!1),this._running=!1,this._error_gcontext=!1,this._rendererWebGL.set_on_context_lost(function(){console.log("on_context_lost"),o._error_gcontext=!0,o.stop()}),this._rendererWebGL.set_on_context_restored(function(){console.log("on_context_restored"),o._error_gcontext=!1,o.start()})}r.default=t},{"../constants":13,"./generation/ChunkGenerator":15,"./rendererWebGL/RendererWebGL":16,fpsmeter:1}],15:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var c,h=t("../../constants");(t=c=c||{})[t.available=1]="available",t[t.working=2]="working";n.prototype.start=function(){this._running=!0},n.prototype.stop=function(){this._running&&(this._running=!1,this._chunk_queue.length=0,this._chunks.length=0,this._geoms.length=0)},n.prototype.update=function(t){if(this._running){this._camera_pos=t;t=[0|Math.floor(t[0]/h.default),0|Math.floor(t[1]/h.default),0|Math.floor(t[2]/h.default)];if(0==this._chunks.length||t[0]!=this._saved_index[0]||t[1]!=this._saved_index[1]||t[2]!=this._saved_index[2]){this._saved_index[0]=t[0],this._saved_index[1]=t[1],this._saved_index[2]=t[2],this._chunk_queue.length=0;for(var e=new Int32Array([t[0]-3|0,t[1]-3|0,t[2]-3|0]),r=new Int32Array([t[0]+3|0,t[1]+3|0,t[2]+3|0]),n=0;n<this._chunks.length;++n){var o=[this._chunks[n].pos[0]/h.default|0,this._chunks[n].pos[1]/h.default|0,this._chunks[n].pos[2]/h.default|0];(o[0]<e[0]||o[0]>r[0]||o[1]<e[1]||o[1]>r[1]||o[2]<e[2]||o[2]>r[2])&&(this._geoms.push(this._chunks[n].geom),this._chunks.splice(n,1),--n)}for(var a=e[2];a<=r[2];++a)for(var i=e[1];i<=r[1];++i)for(var u=e[0];u<=r[0];++u){for(var s=[u*h.default,i*h.default,a*h.default],c=!1,f=0;f<this._chunks.length;++f)if(this._chunks[f].pos[0]===s[0]&&this._chunks[f].pos[1]===s[1]&&this._chunks[f].pos[2]===s[2]){c=!0;break}c||this._chunk_queue.push(s)}this._launch_worker()}}},n.prototype._launch_worker=function(){if(this._myWorker_status==c.available&&0!=this._chunk_queue.length){if(1==this._chunk_queue.length){var t=this._chunk_queue.pop();t&&(this.processing_pos=t)}else{for(var e=-1,r=9999,n=null,o=0;o<this._chunk_queue.length;++o){var a=this._chunk_queue[o];-1!=e&&!this._def.chunk_is_visible(a)||(i=this._camera_pos[0]-a[0]-h.default/2,u=this._camera_pos[1]-a[1]-h.default/2,s=this._camera_pos[2]-a[2]-h.default/2,r<(a=Math.sqrt(i*i+u*u+s*s))||(r=a,n=this._chunk_queue[e=o]))}this._chunk_queue.splice(e,1),n&&(this.processing_pos=n)}var i,u,s;this.is_processing_chunk=!0,this._myWorker_status=c.working,this._myWorker.postMessage({pos:this.processing_pos,buf:this._myWorker_buffer},[this._myWorker_buffer.buffer])}},n.prototype.getChunks=function(){return this._chunks},t=n;function n(t){var r=this;this._running=!1,this._chunks=[],this._chunk_queue=[],this._geoms=[],this._saved_index=[1,0,0],this._myWorker_buffer=new Float32Array(1e6),this._myWorker_status=c.available,this._camera_pos=[0,0,0],this.processing_pos=null,this.is_processing_chunk=!1,this._def=t,this._myWorker=new Worker("./dist/worker.js"),this._myWorker.addEventListener("message",function(t){var e;r.processing_pos=null,r._myWorker_buffer=t.data.vertices,r._myWorker_status=c.available,r._running&&(e=t.data.pos,t=void 0,0==r._geoms.length?t=r._def.add_geom(r._myWorker_buffer):(t=r._geoms.pop())&&r._def.update_geom(t,r._myWorker_buffer),t?(r._chunks.push({pos:e,geom:t,coord2d:null,visible:!1}),r.is_processing_chunk=!1,r._launch_worker()):console.log("worker: processing the result -> invalid geom"))},!1)}r.default=t},{"../../constants":13}],16:[function(t,e,r){"use strict";var n=this&&this.__awaiter||function(t,i,u,s){return new(u=u||Promise)(function(r,e){function n(t){try{a(s.next(t))}catch(t){e(t)}}function o(t){try{a(s.throw(t))}catch(t){e(t)}}function a(t){var e;t.done?r(t.value):((e=t.value)instanceof u?e:new u(function(t){t(e)})).then(n,o)}a((s=s.apply(t,i||[])).next())})},o=this&&this.__generator||function(r,n){var o,a,i,u={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},t={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(o)throw new TypeError("Generator is already executing.");for(;u;)try{if(o=1,a&&(i=2&e[0]?a.return:e[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,e[1])).done)return i;switch(a=0,(e=i?[2&e[0],i.value]:e)[0]){case 0:case 1:i=e;break;case 4:return u.label++,{value:e[1],done:!1};case 5:u.label++,a=e[1],e=[0];continue;case 7:e=u.ops.pop(),u.trys.pop();continue;default:if(!(i=0<(i=u.trys).length&&i[i.length-1])&&(6===e[0]||2===e[0])){u=0;continue}if(3===e[0]&&(!i||e[1]>i[0]&&e[1]<i[3])){u.label=e[1];break}if(6===e[0]&&u.label<i[1]){u.label=i[1],i=e;break}if(i&&u.label<i[2]){u.label=i[2],u.ops.push(e);break}i[2]&&u.ops.pop(),u.trys.pop();continue}e=n.call(r,u)}catch(t){e=[6,t],a=0}finally{o=i=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};Object.defineProperty(r,"__esModule",{value:!0});var d=t("../../constants"),p=t("./WebGLContext"),v=t("./camera/FreeFlyCamera"),g=t("./camera/FrustumCulling"),y=t("./utils/ShaderProgram"),b=t("./utils/Texture"),M=t("./ShaderSrc"),x=t("./utils/Geometry"),w=t("./utils/generateCubeVertices"),P=t("./utils/generateFrustumVertices"),a=t("./camera/glhProject"),E=t("gl-matrix"),t=(i.prototype.chunk_is_visible=function(t){var e=d.default/2;return this._frustum_culling.cubeInFrustum(t[0]+e,t[1]+e,t[2]+e,e)},i.prototype.point_is_visible=function(t){return this._frustum_culling.pointInFrustum(t[0],t[1],t[2])},i.prototype.add_geom=function(t){var e=new x.GeometryWrapper.Geometry(this._chunkRendering.shader,this._chunkRendering.geometryDefinition);return e.updateBuffer(0,t),e.setPrimitiveCount(t.length/12),e},i.prototype.update_geom=function(t,e){t.updateBuffer(0,e)},i.prototype.getCameraPosition=function(){return this._free_fly_camera.getPosition()},i.prototype.getFreeFlyCamera=function(){return this._free_fly_camera},i.prototype.resize=function(t,e){var r=p.default.getViewportSize();r[0]=t,r[1]=e,this._aspectRatio=.75*r[0]/r[1];r=P.default(70,this._aspectRatio,.1,40);this._wireframeRendering.geometry_frustum.updateBuffer(0,r),this._wireframeRendering.geometry_frustum.setPrimitiveCount(r.length/6)},i.prototype.toggle_context_loss=function(){var t=p.default.getContext(),e=p.default.getExtensionLoseContext();e&&(t.isContextLost()?e.restoreContext():e.loseContext())},i.prototype.context_is_lost=function(){return p.default.getContext().isContextLost()},i.prototype.set_on_context_lost=function(t){this.on_context_lost=t},i.prototype.set_on_context_restored=function(t){this.on_context_restored=t},i.prototype.init=function(){return n(this,void 0,void 0,function(){var e;return o(this,function(t){switch(t.label){case 0:return(e=p.default.getContext()).clearColor(0,0,0,1),e.enable(e.DEPTH_TEST),e.activeTexture(e.TEXTURE0),[4,this._chunkRendering.texture.load("assets/texture.png")];case 1:return t.sent(),[4,this._textRendering.texture.load("assets/ascii_font.png")];case 2:return t.sent(),[2]}})})},i.prototype.getSize=function(){var t=p.default.getViewportSize();return[t[0],t[1]]},i.prototype.update=function(t){var e=p.default.getViewportSize();this._free_fly_camera.handleKeys(),this._free_fly_camera.update(1/60),E.mat4.perspective(this._projection_matrix,70,this._aspectRatio,.1,70),this._free_fly_camera.updateViewMatrix(this._modelview_matrix),this._frustum_culling.calculateFrustum(this._projection_matrix,this._modelview_matrix);for(var r=[0,0,.75*e[0],e[1]],n=0;n<t.length;++n){var o=t[n].pos;t[n].visible=this.chunk_is_visible(o),t[n].coord2d=null,!this.point_is_visible(o)||(o=a.default(o[0],o[1],o[2],this._modelview_matrix,this._projection_matrix,r))&&(t[n].coord2d=o)}},i.prototype.pushText=function(t,e,r){for(var n=[256,256],o=[16,16],a=[n[0]/o[0],n[1]/o[1]],i=[e[0],e[1]],u=0,s=t;u<s.length;u++){var c=s[u];if("\n"!=c){var f=this._textRendering.TexCoordMap.get(c);if(!f)throw new Error("fail to find a letter, letter="+c);this._textRendering.stack_vertices.push(i[0],i[1],f[0],f[1],r),i[0]+=a[0]*r}else i[0]=e[0],i[1]-=a[1]*r}},i.prototype.renderScene=function(t){var e=p.default.getContext(),r=p.default.getViewportSize();e.viewport(0,0,.75*r[0],r[1]),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT),this._chunkRendering.shader.bind(),this._chunkRendering.texture.bind(),e.uniform1i(this._chunkRendering.shader.getUniform("u_sampler"),0),e.uniformMatrix4fv(this._chunkRendering.shader.getUniform("u_modelviewMatrix"),!1,this._modelview_matrix),e.uniformMatrix4fv(this._chunkRendering.shader.getUniform("u_projMatrix"),!1,this._projection_matrix);r=this._free_fly_camera.getPosition();e.uniform3f(this._chunkRendering.shader.getUniform("u_cameraPos"),r[0],r[1],r[2]);for(var n=0;n<t.length;++n)t[n].visible&&t[n].geom.render();this._wireframeRendering.shader.bind(),e.uniformMatrix4fv(this._wireframeRendering.shader.getUniform("u_projMatrix"),!1,this._projection_matrix),e.uniformMatrix4fv(this._wireframeRendering.shader.getUniform("u_modelviewMatrix"),!1,this._modelview_matrix);for(var o,a=E.mat4.create(),i=0;i<t.length;++i)t[i].visible&&(o=t[i].pos,E.mat4.translate(a,this._modelview_matrix,o),e.uniformMatrix4fv(this._wireframeRendering.shader.getUniform("u_modelviewMatrix"),!1,a),this._wireframeRendering.geometry_cubeW.render());y.default.unbind()},i.prototype.renderHUD=function(t,e,r){var n=p.default.getContext(),o=p.default.getViewportSize();this._wireframeRendering.shader.bind();var a=.25*o[0],i=.75*o[0],u=.33*o[1];n.clear(n.DEPTH_BUFFER_BIT);var s=.75*o[0],c=o[1];n.viewport(0,0,s,c);var f=E.mat4.create();E.mat4.ortho(f,.5*-s,.5*s,.5*-c,.5*+c,-200,200);o=E.mat4.create();E.mat4.lookAt(o,[.5*s,.5*+c,1],[.5*s,.5*+c,0],[0,1,0]),n.uniformMatrix4fv(this._wireframeRendering.shader.getUniform("u_modelviewMatrix"),!1,o),n.uniformMatrix4fv(this._wireframeRendering.shader.getUniform("u_projMatrix"),!1,f);for(var h=[],l=0,_=r;l<_.length;l++){var m=_[l],d=200;h.push(m[0]-d,m[1]-d,0,1,0,0),h.push(m[0]+d,m[1]+d,0,1,0,0),h.push(m[0]+d,m[1]-d,0,1,0,0),h.push(m[0]-d,m[1]+d,0,1,0,0),this._free_fly_camera.getForceForward()&&(h.push(m[0]-d,m[1],0,1,0,0),h.push(m[0]+d,m[1],0,1,0,0),h.push(m[0],m[1]-d,0,1,0,0),h.push(m[0],m[1]+d,0,1,0,0))}this._wireframeRendering.geometry_stack_rendering.updateBuffer(0,h),this._wireframeRendering.geometry_stack_rendering.setPrimitiveCount(h.length/6),this._wireframeRendering.geometry_stack_rendering.render(),this._textRendering.shader.bind(),this._textRendering.texture.bind(),n.uniformMatrix4fv(this._textRendering.shader.getUniform("u_modelviewMatrix"),!1,o),n.uniformMatrix4fv(this._textRendering.shader.getUniform("u_projectionMatrix"),!1,f),this._textRendering.geometry.updateBuffer(1,this._textRendering.stack_vertices,!0),this._textRendering.geometry.setInstancedCount(this._textRendering.stack_vertices.length/5),this._textRendering.geometry.render(),b.default.unbind(),this._textRendering.stack_vertices.length=0,this._wireframeRendering.shader.bind(),this._render_hud(t,e,[i,0*u,a,u],[1,1.2,1],[0,0,1]),this._render_hud(t,e,[i,u,a,u],[0,1,0],[0,0,1]),this._render_hud(t,e,[i,2*u,a,u],[0,0,1],[0,1,0]),y.default.unbind()},i.prototype._render_hud=function(t,e,r,n,o){var a=p.default.getContext();a.viewport(r[0],r[1],r[2],r[3]);var i=E.mat4.create(),r=r[2]/r[3];E.mat4.ortho(i,-65*r,65*r,-65,65,-200,200);var r=this._free_fly_camera.getPosition(),u=E.mat4.create();E.mat4.lookAt(u,[r[0]+n[0],r[1]+n[1],r[2]+n[2]],[r[0],r[1],r[2]],o),a.uniformMatrix4fv(this._wireframeRendering.shader.getUniform("u_modelviewMatrix"),!1,u),a.uniformMatrix4fv(this._wireframeRendering.shader.getUniform("u_projMatrix"),!1,i),this._wireframeRendering.geometry_axis.render();for(var s=E.mat4.create(),c=0;c<t.length;++c){var f=t[c].pos;E.mat4.identity(s),t[c].visible?(E.mat4.translate(s,u,f),a.uniformMatrix4fv(this._wireframeRendering.shader.getUniform("u_modelviewMatrix"),!1,s),this._wireframeRendering.geometry_cubeW.render()):(E.mat4.translate(s,u,[f[0]+.15*d.default,f[1]+.15*d.default,f[2]+.15*d.default]),E.mat4.scale(s,s,[.7,.7,.7]),a.uniformMatrix4fv(this._wireframeRendering.shader.getUniform("u_modelviewMatrix"),!1,s),this._wireframeRendering.geometry_cubeR.render())}e&&(E.mat4.translate(s,u,[e[0]+.2*d.default,e[1]+.2*d.default,e[2]+.2*d.default]),E.mat4.scale(s,s,[.6,.6,.6]),a.uniformMatrix4fv(this._wireframeRendering.shader.getUniform("u_modelviewMatrix"),!1,s),this._wireframeRendering.geometry_cubeG.render()),E.mat4.translate(u,u,this._free_fly_camera.getPosition()),E.mat4.rotate(u,u,this._free_fly_camera.getTheta()*Math.PI/180,[0,0,1]),E.mat4.rotate(u,u,this._free_fly_camera.getPhi()*Math.PI/180,[0,-1,0]),a.uniformMatrix4fv(this._wireframeRendering.shader.getUniform("u_modelviewMatrix"),!1,u),this._wireframeRendering.geometry_cross.render(),this._wireframeRendering.geometry_frustum.render()},i);function i(t,e){var r=this;this.on_context_lost=null,this.on_context_restored=null,p.default.initialise(e),e.addEventListener("webglcontextlost",function(t){t.preventDefault(),console.log("context is lost"),r.on_context_lost&&r.on_context_lost()},!1),e.addEventListener("webglcontextrestored",function(){console.log("context is restored"),p.default.initialise(e),r.on_context_restored&&r.on_context_restored()},!1);var n=p.default.getViewportSize();this._free_fly_camera=new v.default(t),this._free_fly_camera.activate(),this._free_fly_camera.setPosition(d.default/4*3,d.default/4*3,0),this._frustum_culling=new g.default,this._projection_matrix=E.mat4.create(),this._modelview_matrix=E.mat4.create(),this._aspectRatio=.75*n[0]/n[1];var o=new y.default({vs_src:M.experimental_vert,fs_src:M.experimental_frag,arr_attrib:["a_vertexPosition","a_vertexColor","a_vertexNormal","a_vertexBCenter"],arr_uniform:["u_modelviewMatrix","u_projMatrix","u_cameraPos","u_sampler"]}),a={vbos:[{attrs:[{name:"a_vertexPosition",type:x.GeometryWrapper.AttributeType.vec3f,index:0},{name:"a_vertexColor",type:x.GeometryWrapper.AttributeType.vec3f,index:3},{name:"a_vertexNormal",type:x.GeometryWrapper.AttributeType.vec3f,index:6},{name:"a_vertexBCenter",type:x.GeometryWrapper.AttributeType.vec3f,index:9}],stride:48,instanced:!1}],primitiveType:x.GeometryWrapper.PrimitiveType.triangles};this._chunkRendering={texture:new b.default,shader:o,geometryDefinition:a};o=new y.default({vs_src:M.color_vert,fs_src:M.color_frag,arr_attrib:["a_vertexPosition","a_vertexColor"],arr_uniform:["u_modelviewMatrix","u_projMatrix"]}),a={vbos:[{attrs:[{name:"a_vertexPosition",type:x.GeometryWrapper.AttributeType.vec3f,index:0},{name:"a_vertexColor",type:x.GeometryWrapper.AttributeType.vec3f,index:3}],stride:24,instanced:!1}],primitiveType:x.GeometryWrapper.PrimitiveType.lines};(f=[]).push(0,0,0,1,0,0,20,0,0,1,0,0),f.push(0,0,0,0,1,0,0,20,0,0,1,0),f.push(0,0,0,0,0,1,0,0,20,0,0,1);var i=new x.GeometryWrapper.Geometry(o,a);i.updateBuffer(0,f),i.setPrimitiveCount(f.length/6),f.length=0;f.push(-5,0,0,1,1,1),f.push(25,0,0,1,1,1),f.push(0,-5,0,1,1,1),f.push(0,5,0,1,1,1),f.push(0,0,-5,1,1,1),f.push(0,0,5,1,1,1);var u=new x.GeometryWrapper.Geometry(o,a);u.updateBuffer(0,f),u.setPrimitiveCount(f.length/6),f=w.default(d.default,[1,0,0]);var s=new x.GeometryWrapper.Geometry(o,a);s.updateBuffer(0,f),s.setPrimitiveCount(f.length/6),f=w.default(d.default,[1,1,1]);var c=new x.GeometryWrapper.Geometry(o,a);c.updateBuffer(0,f),c.setPrimitiveCount(f.length/6),f=w.default(d.default,[0,1,0]);t=new x.GeometryWrapper.Geometry(o,a);t.updateBuffer(0,f),t.setPrimitiveCount(f.length/6);n=new x.GeometryWrapper.Geometry(o,a);f=P.default(70,this._aspectRatio,.1,40);a=new x.GeometryWrapper.Geometry(o,a);a.updateBuffer(0,f),a.setPrimitiveCount(f.length/6),this._wireframeRendering={shader:o,geometry_frustum:a,geometry_axis:i,geometry_cross:u,geometry_cubeR:s,geometry_cubeW:c,geometry_cubeG:t,geometry_stack_rendering:n};for(var s=new y.default({vs_src:M.letters_vert,fs_src:M.letters_frag,arr_uniform:["u_modelviewMatrix","u_projectionMatrix","u_texture"],arr_attrib:["a_position","a_texCoord","a_offsetPosition","a_offsetTexCoord","a_offsetScale"]}),c={vbos:[{attrs:[{name:"a_position",type:x.GeometryWrapper.AttributeType.vec2f,index:0},{name:"a_texCoord",type:x.GeometryWrapper.AttributeType.vec2f,index:2}],stride:16,instanced:!1},{attrs:[{name:"a_offsetPosition",type:x.GeometryWrapper.AttributeType.vec2f,index:0},{name:"a_offsetTexCoord",type:x.GeometryWrapper.AttributeType.vec2f,index:2},{name:"a_offsetScale",type:x.GeometryWrapper.AttributeType.float,index:4}],stride:20,instanced:!0}],primitiveType:x.GeometryWrapper.PrimitiveType.triangles},t=new x.GeometryWrapper.Geometry(s,c),n=[256,256],c=[16,16],c=[n[0]/c[0],n[1]/c[1]],n=[c[0]/n[0],c[1]/n[1]],f=[[[+c[0],0],[n[0],n[1]]],[[0,0],[0,n[1]]],[[+c[0],+c[1]],[n[0],0]],[[0,+c[1]],[0,0]]],h=[],l=0,_=[1,0,2,1,3,2];l<_.length;l++){var m=f[_[l]];h.push(m[0][0],m[0][1],m[1][0],m[1][1])}t.updateBuffer(0,h),t.setPrimitiveCount(h.length/4);n=new Map([[" ",[0*n[0],0*n[1]]],["!",[+n[0],0*n[1]]],['"',[2*n[0],0*n[1]]],["#",[3*n[0],0*n[1]]],["$",[4*n[0],0*n[1]]],["%",[5*n[0],0*n[1]]],["&",[6*n[0],0*n[1]]],["'",[7*n[0],0*n[1]]],["(",[8*n[0],0*n[1]]],[")",[9*n[0],0*n[1]]],["*",[10*n[0],0*n[1]]],["+",[11*n[0],0*n[1]]],[",",[12*n[0],0*n[1]]],["-",[13*n[0],0*n[1]]],[".",[14*n[0],0*n[1]]],["/",[15*n[0],0*n[1]]],["0",[0*n[0],+n[1]]],["1",[+n[0],+n[1]]],["2",[2*n[0],+n[1]]],["3",[3*n[0],+n[1]]],["4",[4*n[0],+n[1]]],["5",[5*n[0],+n[1]]],["6",[6*n[0],+n[1]]],["7",[7*n[0],+n[1]]],["8",[8*n[0],+n[1]]],["9",[9*n[0],+n[1]]],[":",[10*n[0],+n[1]]],[";",[11*n[0],+n[1]]],["<",[12*n[0],+n[1]]],["=",[13*n[0],+n[1]]],[">",[14*n[0],+n[1]]],["?",[15*n[0],+n[1]]],["@",[0*n[0],2*n[1]]],["A",[+n[0],2*n[1]]],["B",[2*n[0],2*n[1]]],["C",[3*n[0],2*n[1]]],["D",[4*n[0],2*n[1]]],["E",[5*n[0],2*n[1]]],["F",[6*n[0],2*n[1]]],["G",[7*n[0],2*n[1]]],["H",[8*n[0],2*n[1]]],["I",[9*n[0],2*n[1]]],["J",[10*n[0],2*n[1]]],["K",[11*n[0],2*n[1]]],["L",[12*n[0],2*n[1]]],["M",[13*n[0],2*n[1]]],["N",[14*n[0],2*n[1]]],["O",[15*n[0],2*n[1]]],["P",[0*n[0],3*n[1]]],["Q",[+n[0],3*n[1]]],["R",[2*n[0],3*n[1]]],["S",[3*n[0],3*n[1]]],["T",[4*n[0],3*n[1]]],["U",[5*n[0],3*n[1]]],["V",[6*n[0],3*n[1]]],["W",[7*n[0],3*n[1]]],["X",[8*n[0],3*n[1]]],["Y",[9*n[0],3*n[1]]],["Z",[10*n[0],3*n[1]]],["[",[11*n[0],3*n[1]]],["\\",[12*n[0],3*n[1]]],["]",[13*n[0],3*n[1]]],["^",[14*n[0],3*n[1]]],["_",[15*n[0],3*n[1]]],["`",[0*n[0],4*n[1]]],["a",[+n[0],4*n[1]]],["b",[2*n[0],4*n[1]]],["c",[3*n[0],4*n[1]]],["d",[4*n[0],4*n[1]]],["e",[5*n[0],4*n[1]]],["f",[6*n[0],4*n[1]]],["g",[7*n[0],4*n[1]]],["h",[8*n[0],4*n[1]]],["i",[9*n[0],4*n[1]]],["j",[10*n[0],4*n[1]]],["k",[11*n[0],4*n[1]]],["l",[12*n[0],4*n[1]]],["m",[13*n[0],4*n[1]]],["n",[14*n[0],4*n[1]]],["o",[15*n[0],4*n[1]]],["p",[0*n[0],5*n[1]]],["q",[+n[0],5*n[1]]],["r",[2*n[0],5*n[1]]],["s",[3*n[0],5*n[1]]],["t",[4*n[0],5*n[1]]],["u",[5*n[0],5*n[1]]],["v",[6*n[0],5*n[1]]],["w",[7*n[0],5*n[1]]],["x",[8*n[0],5*n[1]]],["y",[9*n[0],5*n[1]]],["z",[10*n[0],5*n[1]]],["{",[11*n[0],5*n[1]]],["|",[12*n[0],5*n[1]]],["}",[13*n[0],5*n[1]]],["~",[14*n[0],5*n[1]]]]);this._textRendering={texture:new b.default,shader:s,geometry:t,TexCoordMap:n,stack_vertices:[]}}r.default=t},{"../../constants":13,"./ShaderSrc":17,"./WebGLContext":18,"./camera/FreeFlyCamera":19,"./camera/FrustumCulling":20,"./camera/glhProject":21,"./utils/Geometry":24,"./utils/ShaderProgram":25,"./utils/Texture":26,"./utils/generateCubeVertices":27,"./utils/generateFrustumVertices":28,"gl-matrix":3}],17:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.letters_frag=r.letters_vert=r.experimental_frag=r.experimental_vert=r.color_frag=r.color_vert=void 0;r.color_vert="\n\nattribute vec3 a_vertexPosition;\nattribute vec3 a_vertexColor;\n\nvarying vec4 v_color;\n\nuniform mat4 u_modelviewMatrix;\nuniform mat4 u_projMatrix;\n\nvoid main(void)\n{\n    v_color = vec4(a_vertexColor,1.0);\n\n    gl_Position = u_projMatrix * u_modelviewMatrix * vec4(a_vertexPosition, 1.0);\n}\n";r.color_frag="\n\nprecision mediump float;\n\nvarying vec4 v_color;\n\nvoid main(void)\n{\n    gl_FragColor = v_color;\n}\n";r.experimental_vert="\n\nattribute vec3 a_vertexPosition;\nattribute vec3 a_vertexColor;\nattribute vec3 a_vertexNormal;\nattribute vec3 a_vertexBCenter;\n\nuniform mat4 u_modelviewMatrix;\nuniform mat4 u_projMatrix;\nuniform vec3 u_cameraPos;\n\nvarying vec3 v_color;\nvarying vec3 v_bCenter;\n\nvarying vec3 v_normalInterp;\nvarying vec3 v_vertPos;\nvarying float v_distance;\n\nvarying vec3 v_pureVertexPos;\nvarying vec3 v_pureNormalInterp;\n\nconst float k_range_min = 20.0;\nconst float k_range_max = 23.0;\n\nvoid main(void)\n{\n    vec4 vertPos4 = u_modelviewMatrix * vec4(a_vertexPosition, 1.0);\n    v_vertPos = vec3(vertPos4) / vertPos4.w;\n    v_normalInterp = vec3(u_modelviewMatrix * vec4(a_vertexNormal, 0.0));\n\n    v_pureVertexPos = a_vertexPosition;\n    v_pureNormalInterp = a_vertexNormal;\n\n    float tmp_dist = length(a_vertexPosition - u_cameraPos);\n\n    v_distance = tmp_dist;\n\n    v_color = a_vertexColor;\n    v_bCenter = a_vertexBCenter;\n\n    if (tmp_dist < k_range_min ||\n        tmp_dist > k_range_max)\n    {\n        gl_Position = u_projMatrix * u_modelviewMatrix * vec4(a_vertexPosition, 1.0);\n    }\n    else\n    {\n        // bump effect -> bump in the direction of the normal\n\n        gl_Position = u_projMatrix * u_modelviewMatrix * vec4(a_vertexPosition + a_vertexNormal, 1.0);\n    }\n}\n";r.experimental_frag='\n\nprecision mediump float;\n\nuniform sampler2D u_sampler;\n\nvarying vec3 v_color;\nvarying vec3 v_bCenter;\n\nvarying vec3 v_normalInterp;\nvarying vec3 v_vertPos;\nvarying float v_distance;\n\nvarying vec3 v_pureVertexPos;\nvarying vec3 v_pureNormalInterp;\n\nconst vec3 k_lightPos = vec3(0.0,0.0,0.0);\nconst vec3 k_specColor = vec3(1.0, 1.0, 1.0);\n\nconst float k_range_min = 20.0;\nconst float k_range_max = 23.0;\n\nvoid main(void)\n{\n\n    { // wireframe\n\n        if (gl_FrontFacing)\n        {\n            // "bumped wireframe" effect on the front facing\n\n            if (v_distance > k_range_min &&\n                v_distance < k_range_max)\n            {\n\n                if (all(greaterThan(v_bCenter, vec3(0.03))) &&\n                    any(lessThan(v_bCenter, vec3(0.08))))\n                {\n                    gl_FragColor = vec4(v_color, 1.0);\n                    return;\n                }\n\n            }\n\n        }\n        else\n        {\n            // normal wireframe effect on the back facing\n\n            if (any(lessThan(v_bCenter, vec3(0.06))))\n            {\n                gl_FragColor = vec4(1);\n                return;\n            }\n        }\n\n        // wireframe only for the backface\n        if (!gl_FrontFacing)\n            discard;\n\n    } // /wireframe\n\n    vec3 tmp_color = v_color;\n\n    { // texture\n\n        // current 3d texture coordinate\n        vec3 flooredPos = vec3(\n            v_pureVertexPos.x - floor(v_pureVertexPos.x),\n            v_pureVertexPos.y - floor(v_pureVertexPos.y),\n            v_pureVertexPos.z - floor(v_pureVertexPos.z)\n        );\n\n        vec3 blend_weights = abs( normalize( v_pureNormalInterp.xyz ) );\n        blend_weights = max( ( blend_weights - 0.2 ) * 7., 0. );\n        blend_weights /= ( blend_weights.x + blend_weights.y + blend_weights.z );\n\n        // horizontal texture coordinates -> should be a wall\n        vec2 texcoord1 = vec2(flooredPos.y * 0.5 + 0.5, flooredPos.z * 0.5);\n        vec2 texcoord2 = vec2(flooredPos.x * 0.5 + 0.5, flooredPos.z * 0.5);\n\n        // vertical texture coord -> should be green grass\n        vec2 texcoord3 = vec2(flooredPos.x * 0.5, flooredPos.y * 0.5 + 0.5);\n\n        if (v_pureNormalInterp.z < 0.0)\n        {\n            // switch the texture Y -> dirt on the ceilling instead of grass\n            texcoord3.y -= 0.5;\n        }\n\n        // horizontal color\n        vec3 texColor1 = texture2D( u_sampler, texcoord1 ).rgb;\n        vec3 texColor2 = texture2D( u_sampler, texcoord2 ).rgb;\n\n        // vertical color\n        vec3 texColor3 = texture2D( u_sampler, texcoord3 ).rgb;\n\n        tmp_color = texColor1 * blend_weights.xxx +\n                    texColor2 * blend_weights.yyy +\n                    texColor3 * blend_weights.zzz;\n\n    } // texture\n\n    { // lighting\n\n        vec3 normal = normalize(v_normalInterp);\n        vec3 lightDir = normalize(k_lightPos - v_vertPos);\n\n        float lambertian = max(dot(lightDir,v_normalInterp.xyz), 0.0);\n        float specular = 0.0;\n\n        if (lambertian > 0.0)\n        {\n            // lighting specular\n\n            vec3 reflectDir = reflect(-lightDir, normal);\n            vec3 viewDir = normalize(-v_vertPos);\n\n            float specAngle = max(dot(reflectDir, viewDir), 0.0);\n            specular = pow(specAngle, 16.0);\n        }\n\n        // lighting output\n\n        vec3 ambiant_color = tmp_color.xyz * 0.05;\n        vec3 diffuse_color = tmp_color.xyz * lambertian;\n        vec3 specular_color = specular * k_specColor;\n\n        tmp_color = ambiant_color + diffuse_color + specular_color;\n\n    } // lighting\n\n    gl_FragColor = vec4(tmp_color, 1.0);\n}\n';r.letters_vert="\n\nprecision mediump float;\n\nuniform mat4 u_modelviewMatrix;\nuniform mat4 u_projectionMatrix;\n\n\nattribute vec2 a_position;\nattribute vec2 a_texCoord;\nattribute vec2 a_offsetPosition;\nattribute vec2 a_offsetTexCoord;\nattribute float a_offsetScale;\n\nvarying vec2 v_texCoord;\n\nvoid main(void)\n{\n    vec2 position = a_position * a_offsetScale + a_offsetPosition;\n\n    gl_Position = u_projectionMatrix * u_modelviewMatrix * vec4(position, 0.0, 1.0);\n\n    v_texCoord = a_texCoord + a_offsetTexCoord;\n}\n";r.letters_frag="\n\nprecision mediump float;\n\nuniform sampler2D u_texture;\n\nvarying vec2 v_texCoord;\n\nvoid main(void)\n{\n    gl_FragColor = texture2D(u_texture, v_texCoord);\n}\n\n"},{}],18:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=(o.initialise=function(t){if(!(o._gl=t.getContext("webgl")))throw new Error("could not create webgl context");o._extension_vao=o._gl.getExtension("OES_vertex_array_object")||o._gl.getExtension("MOZ_OES_vertex_array_object")||o._gl.getExtension("WEBKIT_OES_vertex_array_object"),o._extension_lose_context=o._gl.getExtension("WEBGL_lose_context"),o._instancing_extension=o._gl.getExtension("ANGLE_instanced_arrays"),o._viewportSize[0]=t.clientWidth,o._viewportSize[1]=t.clientHeight},o.getContext=function(){if(!o._gl)throw new Error("webgl context not initialised");return o._gl},o.getExtensionVao=function(){return o._extension_vao},o.getExtensionLoseContext=function(){return o._extension_lose_context},o.getExtensionInstancing=function(){return o._instancing_extension},o.getExtensionVaoStrict=function(){if(!o._extension_vao)throw new Error("vao extension not available");return o._extension_vao},o.getExtensionLoseContextStrict=function(){if(!o._extension_lose_context)throw new Error("lose context extension not available");return o._extension_lose_context},o.getExtensionInstancingStrict=function(){if(!o._instancing_extension)throw new Error("instancing extension not available");return o._instancing_extension},o.getViewportSize=function(){return o._viewportSize},o._gl=null,o._extension_vao=null,o._extension_lose_context=null,o._instancing_extension=null,o._viewportSize=[0,0],o);function o(){}r.default=n},{}],19:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("gl-matrix"),i=t("./helpers/KeyboardHandler"),u=t("./helpers/pointerLock"),t=(o.prototype.update=function(t){this.handleKeys();var e=Date.now();this._time_immobile+=t,3e3<e-this._last_time&&(this._time_immobile=10),this._last_time=e;if(1&this._movement_flag||1==this._force_forward)for(var r=0;r<3;++r)this._position[r]+=this._forward[r]*t*16;else if(2&this._movement_flag)for(r=0;r<3;++r)this._position[r]-=this._forward[r]*t*16;if(4&this._movement_flag)for(r=0;r<3;++r)this._position[r]-=this._left[r]*t*16;else if(8&this._movement_flag)for(r=0;r<3;++r)this._position[r]+=this._left[r]*t*16;this._movement_flag=0;this._phi=Math.min(Math.max(this._phi,-89),89);var n=[0,0,1],e=Math.cos(3.14*(this._phi-90)/180);n[2]=Math.sin(3.14*(this._phi-90)/180),n[0]=e*Math.cos(3.14*this._theta/180),n[1]=e*Math.sin(3.14*this._theta/180);e=Math.cos(3.14*this._phi/180);this._forward[2]=Math.sin(3.14*this._phi/180),this._forward[0]=e*Math.cos(3.14*this._theta/180),this._forward[1]=e*Math.sin(3.14*this._theta/180),this._left[0]=n[1]*this._forward[2]-n[2]*this._forward[1],this._left[1]=n[2]*this._forward[0]-n[0]*this._forward[2],this._left[2]=n[0]*this._forward[1]-n[1]*this._forward[0],this._target[0]=this._position[0]+this._forward[0],this._target[1]=this._position[1]+this._forward[1],this._target[2]=this._position[2]+this._forward[2]},o.prototype.updateViewMatrix=function(t){n.mat4.lookAt(t,[this._position[0],this._position[1],this._position[2]],[this._target[0],this._target[1],this._target[2]],[0,0,1])},o.prototype.setPosition=function(t,e,r){this._position[0]=t,this._position[1]=e,this._position[2]=r},o.prototype.getPosition=function(){return[this._position[0],this._position[1],this._position[2]]},o.prototype.getTheta=function(){return this._theta},o.prototype.getPhi=function(){return this._phi},o.prototype.getForceForward=function(){return this._force_forward},o.prototype.getTimeImmobile=function(){return this._time_immobile},o.prototype.handleKeys=function(){(this._keyboard_handler.isPressed(i.keyCodes.KEY_Z)||this._keyboard_handler.isPressed(i.keyCodes.KEY_W))&&(this._movement_flag|=1,this._time_immobile=0),this._keyboard_handler.isPressed(i.keyCodes.KEY_S)&&(this._movement_flag|=2,this._time_immobile=0),(this._keyboard_handler.isPressed(i.keyCodes.KEY_A)||this._keyboard_handler.isPressed(i.keyCodes.KEY_Q))&&(this._movement_flag|=4,this._time_immobile=0),this._keyboard_handler.isPressed(i.keyCodes.KEY_D)&&(this._movement_flag|=8,this._time_immobile=0),this._keyboard_handler.isPressed(i.keyCodes.ARROW_UP)&&(this._phi++,this._time_immobile=0),this._keyboard_handler.isPressed(i.keyCodes.ARROW_DOWN)&&(this._phi--,this._time_immobile=0),this._keyboard_handler.isPressed(i.keyCodes.ARROW_LEFT)&&(this._theta++,this._time_immobile=0),this._keyboard_handler.isPressed(i.keyCodes.ARROW_RIGHT)&&(this._theta--,this._time_immobile=0)},o.prototype.activate=function(){this._keyboard_handler.activate()},o.prototype.deactivate=function(){this._keyboard_handler.deactivate()},o);function o(t){var n=this;this._phi=0,this._theta=0,this._forward=[1,0,0],this._left=[0,0,0],this._position=[0,0,0],this._target=[0,0,0],this._movement_flag=0,this._keyboard_handler=new i.KeyboardHandler,this._force_forward=!1,this._time_immobile=0,this._last_time=0,this._last_time=Date.now();function e(t){var e=t.movementX||t.mozMovementX||t.webkitMovementX||0,t=t.movementY||t.mozMovementY||t.webkitMovementY||0;n._theta-=e/5,n._phi-=t/5,n._time_immobile=0}u.default(t,function(){t.addEventListener("mousemove",e,!1)},function(){t.removeEventListener("mousemove",e,!1)});var o=null,a=null,r=null;t.addEventListener("touchstart",function(t){t.preventDefault(),a=o=null;var e=Date.now();1==t.targetTouches.length&&r&&e-r<250&&(n._force_forward=!0),r=e}),t.addEventListener("touchend",function(t){t.preventDefault(),a=o=null,n._force_forward=!1}),t.addEventListener("touchmove",function(t){t.preventDefault();var e,r,t=t.targetTouches;0==t.length||2<t.length||(2==t.length?(r=t[0].pageX-t[1].pageX,e=t[0].pageY-t[1].pageY,r=Math.sqrt(r*r+e*e),a&&(n._movement_flag|=a<r?1:2),a=r):(o&&(e=o.pageX-t[0].pageX,r=o.pageY-t[0].pageY,n._theta-=e/5,n._phi-=r/5),o=t[0]),n._time_immobile=0)})}r.default=t},{"./helpers/KeyboardHandler":22,"./helpers/pointerLock":23,"gl-matrix":3}],20:[function(t,e,r){"use strict";var n,i;Object.defineProperty(r,"__esModule",{value:!0}),(o=n=n||{})[o.Right=0]="Right",o[o.Left=1]="Left",o[o.Bottom=2]="Bottom",o[o.Top=3]="Top",o[o.Back=4]="Back",o[o.Front=5]="Front",(o=i=i||{})[o.A=0]="A",o[o.B=1]="B",o[o.C=2]="C",o[o.D=3]="D";var o=(a.prototype.normalizePlane=function(t){var e=4*t,t=Math.sqrt(this._Frustum[e+i.A]*this._Frustum[e+i.A]+this._Frustum[e+i.B]*this._Frustum[e+i.B]+this._Frustum[e+i.C]*this._Frustum[e+i.C]);this._Frustum[e+i.A]/=t,this._Frustum[e+i.B]/=t,this._Frustum[e+i.C]/=t,this._Frustum[e+i.D]/=t},a.prototype.calculateFrustum=function(t,e){var r=new Float32Array(16);r[0]=e[0]*t[0]+e[1]*t[4]+e[2]*t[8]+e[3]*t[12],r[1]=e[0]*t[1]+e[1]*t[5]+e[2]*t[9]+e[3]*t[13],r[2]=e[0]*t[2]+e[1]*t[6]+e[2]*t[10]+e[3]*t[14],r[3]=e[0]*t[3]+e[1]*t[7]+e[2]*t[11]+e[3]*t[15],r[4]=e[4]*t[0]+e[5]*t[4]+e[6]*t[8]+e[7]*t[12],r[5]=e[4]*t[1]+e[5]*t[5]+e[6]*t[9]+e[7]*t[13],r[6]=e[4]*t[2]+e[5]*t[6]+e[6]*t[10]+e[7]*t[14],r[7]=e[4]*t[3]+e[5]*t[7]+e[6]*t[11]+e[7]*t[15],r[8]=e[8]*t[0]+e[9]*t[4]+e[10]*t[8]+e[11]*t[12],r[9]=e[8]*t[1]+e[9]*t[5]+e[10]*t[9]+e[11]*t[13],r[10]=e[8]*t[2]+e[9]*t[6]+e[10]*t[10]+e[11]*t[14],r[11]=e[8]*t[3]+e[9]*t[7]+e[10]*t[11]+e[11]*t[15],r[12]=e[12]*t[0]+e[13]*t[4]+e[14]*t[8]+e[15]*t[12],r[13]=e[12]*t[1]+e[13]*t[5]+e[14]*t[9]+e[15]*t[13],r[14]=e[12]*t[2]+e[13]*t[6]+e[14]*t[10]+e[15]*t[14],r[15]=e[12]*t[3]+e[13]*t[7]+e[14]*t[11]+e[15]*t[15];t=4*n.Right;this._Frustum[t+i.A]=r[3]-r[0],this._Frustum[t+i.B]=r[7]-r[4],this._Frustum[t+i.C]=r[11]-r[8],this._Frustum[t+i.D]=r[15]-r[12],this.normalizePlane(n.Right),t=4*n.Left,this._Frustum[t+i.A]=r[3]+r[0],this._Frustum[t+i.B]=r[7]+r[4],this._Frustum[t+i.C]=r[11]+r[8],this._Frustum[t+i.D]=r[15]+r[12],this.normalizePlane(n.Left),t=4*n.Bottom,this._Frustum[t+i.A]=r[3]+r[1],this._Frustum[t+i.B]=r[7]+r[5],this._Frustum[t+i.C]=r[11]+r[9],this._Frustum[t+i.D]=r[15]+r[13],this.normalizePlane(n.Bottom),t=4*n.Top,this._Frustum[t+i.A]=r[3]-r[1],this._Frustum[t+i.B]=r[7]-r[5],this._Frustum[t+i.C]=r[11]-r[9],this._Frustum[t+i.D]=r[15]-r[13],this.normalizePlane(n.Top),t=4*n.Back,this._Frustum[t+i.A]=r[3]-r[2],this._Frustum[t+i.B]=r[7]-r[6],this._Frustum[t+i.C]=r[11]-r[10],this._Frustum[t+i.D]=r[15]-r[14],this.normalizePlane(n.Back),t=4*n.Front,this._Frustum[t+i.A]=r[3]+r[2],this._Frustum[t+i.B]=r[7]+r[6],this._Frustum[t+i.C]=r[11]+r[10],this._Frustum[t+i.D]=r[15]+r[14],this.normalizePlane(n.Front)},a.prototype.pointInFrustum=function(t,e,r){for(var n=0;n<6;++n)if(this._Frustum[4*n+i.A]*t+this._Frustum[4*n+i.B]*e+this._Frustum[4*n+i.C]*r+this._Frustum[4*n+i.D]<=0)return!1;return!0},a.prototype.sphereInFrustum=function(t,e,r,n){for(var o=0;o<6;++o)if(this._Frustum[4*o+i.A]*t+this._Frustum[4*o+i.B]*e+this._Frustum[4*o+i.C]*r+this._Frustum[4*o+i.D]<=n)return!1;return!0},a.prototype.cubeInFrustum=function(t,e,r,n){for(var o=0;o<6;++o){var a=4*o;if(!(0<this._Frustum[a+i.A]*(t-n)+this._Frustum[a+i.B]*(e-n)+this._Frustum[a+i.C]*(r-n)+this._Frustum[a+i.D])&&!(0<this._Frustum[a+i.A]*(t+n)+this._Frustum[a+i.B]*(e-n)+this._Frustum[a+i.C]*(r-n)+this._Frustum[a+i.D]||0<this._Frustum[a+i.A]*(t-n)+this._Frustum[a+i.B]*(e+n)+this._Frustum[a+i.C]*(r-n)+this._Frustum[a+i.D]||0<this._Frustum[a+i.A]*(t+n)+this._Frustum[a+i.B]*(e+n)+this._Frustum[a+i.C]*(r-n)+this._Frustum[a+i.D]||0<this._Frustum[a+i.A]*(t-n)+this._Frustum[a+i.B]*(e-n)+this._Frustum[a+i.C]*(r+n)+this._Frustum[a+i.D]||0<this._Frustum[a+i.A]*(t+n)+this._Frustum[a+i.B]*(e-n)+this._Frustum[a+i.C]*(r+n)+this._Frustum[a+i.D]||0<this._Frustum[a+i.A]*(t-n)+this._Frustum[a+i.B]*(e+n)+this._Frustum[a+i.C]*(r+n)+this._Frustum[a+i.D]||0<this._Frustum[a+i.A]*(t+n)+this._Frustum[a+i.B]*(e+n)+this._Frustum[a+i.C]*(r+n)+this._Frustum[a+i.D]))return!1}return!0},a);function a(){this._Frustum=new Float32Array(24)}r.default=o},{}],21:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.default=function(t,e,r,n,o,a){var i=[0,0,0,0,0,0,0,0];return i[0]=n[0]*t+n[4]*e+n[8]*r+n[12],i[1]=n[1]*t+n[5]*e+n[9]*r+n[13],i[2]=n[2]*t+n[6]*e+n[10]*r+n[14],i[3]=n[3]*t+n[7]*e+n[11]*r+n[15],i[4]=o[0]*i[0]+o[4]*i[1]+o[8]*i[2]+o[12]*i[3],i[5]=o[1]*i[0]+o[5]*i[1]+o[9]*i[2]+o[13]*i[3],i[6]=o[2]*i[0]+o[6]*i[1]+o[10]*i[2]+o[14]*i[3],i[7]=-i[2],0==i[7]?null:(i[7]=1/i[7],i[4]*=i[7],i[5]*=i[7],i[6]*=i[7],[(.5*i[4]+.5)*a[2]+a[0],(.5*i[5]+.5)*a[3]+a[1]])}},{}],22:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.KeyboardHandler=r.keyCodes=void 0;r.keyCodes={KEY_Z:90,KEY_W:87,KEY_S:83,KEY_A:65,KEY_Q:81,KEY_D:68,ARROW_LEFT:37,ARROW_RIGHT:39,ARROW_UP:38,ARROW_DOWN:40};var n=(o.prototype.isPressed=function(t){return this._pressedKeys.get(t)||!1},o.prototype.activate=function(){this._activated||(document.addEventListener("keydown",this._handleKeyDown),document.addEventListener("keyup",this._handleKeyUp),this._activated=!0)},o.prototype.deactivate=function(){this._activated&&(document.removeEventListener("keydown",this._handleKeyDown),document.removeEventListener("keyup",this._handleKeyUp),this._activated=!1)},o);function o(){var e=this;this._pressedKeys=new Map,this._activated=!1;this._activated=!1,this._handleKeyDown=function(t){e._pressedKeys.set(t.keyCode,!0)}.bind(this),this._handleKeyUp=function(t){e._pressedKeys.set(t.keyCode,!1)}.bind(this)}r.KeyboardHandler=n},{}],23:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.default=function(t,e,r,n){t.requestPointerLock=t.requestPointerLock||t.mozRequestPointerLock||t.webkitRequestPointerLock,document.exitPointerLock=document.exitPointerLock||document.mozExitPointerLock||document.webkitExitPointerLock,t.onclick=function(){t.requestPointerLock&&t.requestPointerLock()};function o(){document.pointerLockElement===t||document.mozPointerLockElement===t||document.webkitPointerLockElement===t?(console.log("The pointer lock status is now locked"),e()):(console.log("The pointer lock status is now unlocked"),r())}function a(t){console.error("Pointer lock failed"),n&&n(t)}"onpointerlockchange"in document?document.addEventListener("pointerlockchange",o,!1):"onmozpointerlockchange"in document?document.addEventListener("mozpointerlockchange",o,!1):"onwebkitpointerlockchange"in document&&document.addEventListener("webkitpointerlockchange",o,!1),"onpointerlockerror"in document?document.addEventListener("pointerlockerror",a,!1):"onmozpointerlockerror"in document?document.addEventListener("mozpointerlockerror",a,!1):"onwebkitpointerlockerror"in document&&document.addEventListener("webkitpointerlockerror",a,!1)}},{}],24:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.GeometryWrapper=void 0;var A=t("../WebGLContext");!function(E){var k,R;E.BytesPerPixel=4,(t=k=E.AttributeType||(E.AttributeType={}))[t.float=0]="float",t[t.vec2f=1]="vec2f",t[t.vec3f=2]="vec3f",t[t.vec4f=3]="vec4f",t[t.mat3f=4]="mat3f",t[t.mat4f=5]="mat4f",(t=R=E.PrimitiveType||(E.PrimitiveType={}))[t.lines=0]="lines",t[t.triangles=1]="triangles";var t=(e.prototype.dispose=function(){for(var t=A.default.getContext(),e=A.default.getExtensionVaoStrict(),r=0;r<this._vbos.length;++r)t.deleteBuffer(this._vbos[r]);e.deleteVertexArrayOES(this._vao)},e.prototype.updateBuffer=function(t,e,r){if(void 0===r&&(r=!1),t<0||t>=this._vbos.length)throw new Error("no buffer avaialble to tha index");var n=A.default.getContext(),t=this._vbos[t],e=e instanceof Float32Array?e:new Float32Array(e),r=r?n.DYNAMIC_DRAW:n.STATIC_DRAW;n.bindBuffer(n.ARRAY_BUFFER,t),n.bufferData(n.ARRAY_BUFFER,e,r),n.bindBuffer(n.ARRAY_BUFFER,null)},e.prototype.render=function(){var t,e,r;0==this._primitiveCount||this._isInstanced&&0==this._instanceCount||(t=A.default.getContext(),e=A.default.getExtensionVaoStrict(),r=A.default.getExtensionInstancingStrict(),e.bindVertexArrayOES(this._vao),!0===this._isInstanced?r.drawArraysInstancedANGLE(this._primitiveType,this._primitiveStart,this._primitiveCount,this._instanceCount):t.drawArrays(this._primitiveType,this._primitiveStart,this._primitiveCount),e.bindVertexArrayOES(null))},e.prototype.setPrimitiveStart=function(t){this._primitiveStart=t},e.prototype.setPrimitiveCount=function(t){this._primitiveCount=t},e.prototype.setInstancedCount=function(t){this._instanceCount=t},e);function e(t,e){this._primitiveStart=0,this._primitiveCount=0,this._instanceCount=0,this._isInstanced=!1;var r=A.default.getContext();if(0===e.vbos.length)throw new Error("empty vbo defintion");for(var n=0,o=e.vbos;n<o.length;n++){if(0===(l=o[n]).attrs.length)throw new Error("empty vbo attribute defintion");for(var a=0,i=l.attrs;a<i.length;a++){var u=i[a];if(!t.hasAttribute(u.name))throw new Error('attribute not found, name="'+u.name+'"')}}switch((this._def=e).primitiveType){case R.lines:this._primitiveType=r.LINES;break;case R.triangles:this._primitiveType=r.TRIANGLES;break;default:throw new Error("primitive type not found")}var s=A.default.getExtensionVaoStrict(),c=A.default.getExtensionInstancingStrict(),e=s.createVertexArrayOES();if(!e)throw new Error("fail o create a vao unit");this._vao=e,s.bindVertexArrayOES(this._vao),this._vbos=[];for(var f=0,h=this._def.vbos;f<h.length;f++){var l,_=h[f];if(!(l=r.createBuffer()))throw new Error("fail o create a vbo unit");this._vbos.push(l),r.bindBuffer(r.ARRAY_BUFFER,l);var m=_.stride||0;if(!m){for(var d=0,p=_.attrs;d<p.length;d++)switch((u=p[d]).type){case k.float:m+=1;break;case k.vec2f:m+=2;break;case k.vec3f:m+=3;break;case k.vec4f:m+=4;break;case k.mat3f:m+=9;break;case k.mat4f:m+=16}m*=E.BytesPerPixel}for(var v=0,g=_.attrs;v<g.length;v++){var y=1,b=1;switch((u=g[v]).type){case k.float:b=y=1;break;case k.vec2f:y=2,b=1;break;case k.vec3f:y=3,b=1;break;case k.vec4f:y=4,b=1;break;case k.mat3f:b=y=3;break;case k.mat4f:b=y=4}for(var M=t.getAttribute(u.name),x=0;x<b;++x){var w=M+x,P=(u.index+x*y)*E.BytesPerPixel;r.enableVertexAttribArray(w),r.vertexAttribPointer(w,y,r.FLOAT,!1,m,P),!0===_.instanced&&(c.vertexAttribDivisorANGLE(w,1),this._isInstanced=!0)}}}s.bindVertexArrayOES(null)}E.Geometry=t}(r.GeometryWrapper||(r.GeometryWrapper={}))},{"../WebGLContext":18}],25:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a=t("../WebGLContext"),t=(n.prototype.bind=function(){a.default.getContext().useProgram(this._program)},n.unbind=function(){a.default.getContext().useProgram(null)},n.prototype.hasAttribute=function(t){return this._attributes.has(t)},n.prototype.getAttribute=function(t){var e=this._attributes.get(t);if(void 0===e)throw new Error("attribute not found: "+t);return e},n.prototype.getUniform=function(t){var e=this._uniforms.get(t);if(void 0===e)throw new Error("uniform not found: "+t);return e},n.prototype._getAttribAndLocation=function(t,e){var r=a.default.getContext();if(!this._program)throw new Error("shader program not initialised");r.useProgram(this._program);for(var n=0;n<t.length;++n){if((o=r.getAttribLocation(this._program,t[n]))<0)throw new Error("attribute not found => "+t[n]);this._attributes.set(t[n],o)}for(var o,n=0;n<e.length;++n){if(null===(o=r.getUniformLocation(this._program,e[n])))throw new Error("uniform not found => "+e[n]);this._uniforms.set(e[n],o)}r.useProgram(null)},n.prototype._getShader=function(t,e){var r=a.default.getContext(),e=r.createShader(e);if(!e)throw new Error("could not create a shader");if(r.shaderSource(e,t),r.compileShader(e),r.getShaderParameter(e,r.COMPILE_STATUS))return e;e=(e=r.getShaderInfoLog(e))||"failed to compile a shader";throw new Error(e)},n);function n(t){this._attributes=new Map,this._uniforms=new Map;var e=a.default.getContext(),r=this._getShader(t.vs_src,e.VERTEX_SHADER),n=this._getShader(t.fs_src,e.FRAGMENT_SHADER);if(this._program=e.createProgram(),!this._program)throw new Error("could not create a shader program");if(e.attachShader(this._program,r),e.attachShader(this._program,n),e.linkProgram(this._program),!e.getProgramParameter(this._program,e.LINK_STATUS)){e=e.getProgramInfoLog(this._program);throw new Error("Failed to initialised shaders, Error linking:"+e)}this._getAttribAndLocation(t.arr_attrib,t.arr_uniform)}r.default=t},{"../WebGLContext":18}],26:[function(t,e,r){"use strict";var n=this&&this.__awaiter||function(t,i,u,s){return new(u=u||Promise)(function(r,e){function n(t){try{a(s.next(t))}catch(t){e(t)}}function o(t){try{a(s.throw(t))}catch(t){e(t)}}function a(t){var e;t.done?r(t.value):((e=t.value)instanceof u?e:new u(function(t){t(e)})).then(n,o)}a((s=s.apply(t,i||[])).next())})},h=this&&this.__generator||function(r,n){var o,a,i,u={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},t={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(o)throw new TypeError("Generator is already executing.");for(;u;)try{if(o=1,a&&(i=2&e[0]?a.return:e[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,e[1])).done)return i;switch(a=0,(e=i?[2&e[0],i.value]:e)[0]){case 0:case 1:i=e;break;case 4:return u.label++,{value:e[1],done:!1};case 5:u.label++,a=e[1],e=[0];continue;case 7:e=u.ops.pop(),u.trys.pop();continue;default:if(!(i=0<(i=u.trys).length&&i[i.length-1])&&(6===e[0]||2===e[0])){u=0;continue}if(3===e[0]&&(!i||e[1]>i[0]&&e[1]<i[3])){u.label=e[1];break}if(6===e[0]&&u.label<i[1]){u.label=i[1],i=e;break}if(i&&u.label<i[2]){u.label=i[2],u.ops.push(e);break}i[2]&&u.ops.pop(),u.trys.pop();continue}e=n.call(r,u)}catch(t){e=[6,t],a=0}finally{o=i=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};Object.defineProperty(r,"__esModule",{value:!0});var l=t("../WebGLContext"),t=(o.prototype.load=function(c,f){return void 0===f&&(f=!1),n(this,void 0,void 0,function(){var o,a,i,u,e,s=this;return h(this,function(t){return o=l.default.getContext(),this._texture=o.createTexture(),o.bindTexture(o.TEXTURE_2D,this._texture),a=o.RGBA,0,i=o.RGBA,u=o.UNSIGNED_BYTE,e=new Uint8Array([0,0,255,255]),o.texImage2D(o.TEXTURE_2D,0,a,1,1,0,i,u,e),[2,new Promise(function(e,r){var n=new Image;n.onerror=function(t){r(t)},n.onload=function(){s._width=n.width,s._height=n.height,o.bindTexture(o.TEXTURE_2D,s._texture),o.texImage2D(o.TEXTURE_2D,0,a,i,u,n),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_S,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_T,o.CLAMP_TO_EDGE);var t=f?o.NEAREST:o.LINEAR;o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,t),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MAG_FILTER,t),o.bindTexture(o.TEXTURE_2D,null),e()},n.src=c})]})})},o.prototype.getWidth=function(){if(!this._texture)throw new Error("texture not initialised");return this._width},o.prototype.getHeight=function(){if(!this._texture)throw new Error("texture not initialised");return this._height},o.prototype.bind=function(){if(!this._texture)throw new Error("texture not initialised");var t=l.default.getContext();t.bindTexture(t.TEXTURE_2D,this._texture)},o.unbind=function(){var t=l.default.getContext();t.bindTexture(t.TEXTURE_2D,null)},o);function o(){this._width=0,this._height=0,this._texture=null}r.default=t},{"../WebGLContext":18}],27:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.default=function(t,e,r){var n=t/2,t=t/2.1,o=[n,n,n,-n,n,n,n,-n,n,-n,-n,n,n,n,-n,-n,n,-n,n,-n,-n,-n,-n,-n,t,t,t,-t,t,t,t,-t,t,-t,-t,t,t,t,-t,-t,t,-t,t,-t,-t,-t,-t,-t],a=[0,1,1,3,3,2,2,0,4,5,5,7,7,6,6,4,0,4,1,5,3,7,2,6,8,9,9,11,11,10,10,8,12,13,13,15,15,14,14,12,8,12,9,13,11,15,10,14];(r=void 0===r?!1:r)&&(a.length/=2);for(var i=[],u=0;u<a.length;++u){for(var s=3*a[u],c=0;c<3;++c)i.push(o[s+c]+n);for(c=0;c<3;++c)i.push(e[c])}return i}},{}],28:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.default=function(t,e,r,n){for(var o=Math.tan(t/360*Math.PI)*r,a=o*e,i=-a,u=+a,a=+o,o=-o,t=n*Math.sin(t*Math.PI/180),e=t*e,s=[r,i,a,r,u,a,r,i,o,r,u,o,n,-e,+t,n,+e,+t,n,-e,-t,n,+e,-t,n,1.66*-e,-t,n,1.66*-e,+t],c=[0,1,1,3,3,2,2,0,0,4,1,5,2,6,3,7,4,5,5,7,7,6,6,4,8,9,7,8,5,9],f=[],h=0;h<c.length;++h){for(var l=3*c[h],_=0;_<3;++_)f.push(s[l+_]);f.push(1,1,0)}return f}},{}],29:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),window.onerror=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];alert(JSON.stringify(t))};var n=new(t("./experiment/WebGLExperiment").default);n.start();t=document.getElementById("touch_id");t&&("ontouchstart"in window?t.innerHTML+="Supported":t.innerHTML+="Not Supported");t=document.getElementById("gui_toggle_start");if(!t)throw new Error("gui_toggle_start not found");t.addEventListener("click",function(){console.log("toggle_start"),n.isRunning()?n.stop():n.start()})},{"./experiment/WebGLExperiment":14}]},{},[29]);